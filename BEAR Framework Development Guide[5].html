<!DOCTYPE html>
<!-- saved from url=(0116)http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        BEAR Framework Development Guide
    </title>
    <link rel="stylesheet" href="./BEAR Framework Development Guide_files/bootstrap.min.css">
    <link rel="stylesheet" href="./BEAR Framework Development Guide_files/font-awesome.min.css">
    <link rel="stylesheet" href="./BEAR Framework Development Guide_files/ionicons.min.css">
    <link rel="stylesheet" href="./BEAR Framework Development Guide_files/octicons.min.css">
    <link rel="stylesheet" href="./BEAR Framework Development Guide_files/prism.min.css">
    <link rel="stylesheet" href="./BEAR Framework Development Guide_files/emojify.min.css">
    <link rel="stylesheet" href="./BEAR Framework Development Guide_files/documentation.min.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="/app/assets/xdce-module-bear-docs/js/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
        <script src="/app/assets/xdce-module-bear-docs/js/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
        <script src="/app/assets/xdce-module-bear-docs/js/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid"><h1 id="BEAR-Framework-Development-Guide"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#BEAR-Framework-Development-Guide" title="BEAR-Framework-Development-Guide"><i class="fa fa-link"></i></a>BEAR Framework Development Guide</h1><p>The aim of this document is to describe the necessary steps to develop an application using <strong>BEAR</strong> framework by <em>Intesa Sanpaolo</em>.</p><h2 id="RELEASE-NOTES"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#RELEASE-NOTES" title="RELEASE-NOTES"><i class="fa fa-link"></i></a>RELEASE NOTES</h2><h3 id="Build-0110"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0110" title="Build-0110"><i class="fa fa-link"></i></a><strong>Build 0.11.0</strong></h3><ul>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#BEAR-BearCore-Connector">BEAR-BearCore-Connector</a> Added the BearCore Connector</li>
<li>The class “Account” of the object model has new properties: “panCarta” and “nickName”</li>
<li>Event connector allows to set topic dinamically</li>
<li>Improvement on the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Translation-from-Error-Key-to-Error-Message">Error Manager</a></li>
<li>Improvement on <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Transaction-Manager">Transaction Manager</a></li>
</ul><h3 id="Build-0105"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0105" title="Build-0105"><i class="fa fa-link"></i></a><strong>Build 0.10.5</strong></h3><ul>
<li>Added the JDBC Query Type <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JDBC-Connector"><code>EXECUTE</code></a> to facilitate the call of a Stored Procedure.</li>
</ul><h3 id="Build-0103"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0103" title="Build-0103"><i class="fa fa-link"></i></a><strong>Build 0.10.3</strong></h3><ul>
<li>Added the <strong>nonJMSClient</strong> flag to the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#MQ-Listener">MQ Listener</a> and to the MQ&lt;-&gt;Kafka archetypes.</li>
</ul><h3 id="Build-0102"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0102" title="Build-0102"><i class="fa fa-link"></i></a><strong>Build 0.10.2</strong></h3><ul>
<li>Tracing: only <code>BaseController</code>s methods are traced when Controller tracing is enabled, so just the application APIs.</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Host-Bridge">Host Bridge</a> is available to create a microservice-bridge that can be called with HTTP Requests to invoke Business Services on Host. To start, you have to use the appropriate <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Start-up-base-structure">archetype</a>.</li>
</ul><h3 id="Build-0100"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0100" title="Build-0100"><i class="fa fa-link"></i></a><strong>Build 0.10.0</strong></h3><ul>
<li>Tracing: <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Tracing-format">query type</a> has been added to DB tracing events.</li>
<li>Old version of DataPower (no NBP, New Banking Platform) is now supported. Please see <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#DataPower-version1">here for REST connectors</a> and <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#DataPower-version">here for SOAP connectors</a>.</li>
<li>SOAP: <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Custom-SOAP-Headers">custom SOAP headers</a> are now supported.</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Shared-Library">Shared Library</a>: it is possible to create a shared library with common functionalities beetween different applications, starting from the appropriate <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Start-up-base-structure">archetype</a>.</li>
<li>[GridFS Mongo Connector] Added the GETRESOURCEBYID QueryType.</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#DB2-Connector">DB2-Connector</a> Added the DB2-connector</li>
</ul><h3 id="Build-099"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-099" title="Build-099"><i class="fa fa-link"></i></a><strong>Build 0.9.9</strong></h3><ul>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mongo-GridFS-Connector">GridFS Mongo Connector</a>. Added the <strong>bucket</strong> property on the application.yaml.</li>
</ul><h3 id="Build-097"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-097" title="Build-097"><i class="fa fa-link"></i></a><strong>Build 0.9.7</strong></h3><ul>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Tracing">Tracing</a>: if a call made by a Connector generates an error (e.g. connection refused, timeout), that error will be traced along with the request. Also, Controllers interactions will be traced in two events: one for the request and one for the response.</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mongo-GridFS-Connector">GridFS Mongo Connector</a> added to BEAR Framework in order to support GridFS support on Mongo DBs.</li>
</ul><h3 id="Build-091"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-091" title="Build-091"><i class="fa fa-link"></i></a><strong>Build 0.9.1</strong></h3><ul>
<li>Custom <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Message-Converters">Message Converters</a> can now be configured and added to the default one to handle specific media types and relative conversions/representations.</li>
</ul><h3 id="Build-090"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-090" title="Build-090"><i class="fa fa-link"></i></a><strong>Build 0.9.0</strong></h3><ul>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Tracing">Tracing</a> functionality is available to trace Connectors and Controllers requests and responses on logs or on a dedicated tracing event queue. <strong>NOTE:</strong> use the mocked version (i.e. on logs) until the definitions of the queues, since they have not been set up yet (unless you have it one on your own to use).</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Visibility-Cone">Visibility Cone</a> has been introduced to enforce some business constraints before the actual Command execution.</li>
</ul><div class="alert alert-danger">
<h4 id="FUTURE-BREAKING-CHANGES---10012019"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#FUTURE-BREAKING-CHANGES---10012019" title="FUTURE-BREAKING-CHANGES---10012019"><i class="fa fa-link"></i></a>(FUTURE) BREAKING CHANGES - 10/01/2019</h4>
<ul>
<li>Command will have to implement <code>doExecute()</code> instead of <code>execute()</code> because of the introduced logic of the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Visibility-Cone">Visibility Cone</a>. Still, Command execution is always triggered by <code>execute()</code> method inside Controllers.<br>
<strong>NOTE</strong>: to avoid Breaking Changes, constraints on these methods have been lowered <em><strong>temporarily</strong></em> (no <code>final</code> on <code>execute()</code>, no <code>abstract</code> on <code>canExecute()</code> and <code>doExecute()</code>). If you want to enable Visibility Cone, please override <code>doExecute()</code> instead of <code>execute()</code> (simply change its name in your code) and override also <code>canExecute()</code>. Future developments will be made easier thanks to the <code>abstract</code> and <code>final</code><br>
constraints, released on <strong>10/01/2019</strong>.</li>
</ul>
</div><ul>
<li>It is possible to set another optional property for Copy Switcher (<code>refreshDelaySeconds</code>) to enable a refresh call to the REST service for each Semaphore status, if no event has been received for more time than its entry in <code>validities</code>.</li>
<li>Added two new archetypes, <code>mqToKafka</code> and <code>kafkaToMq</code>, which forward a message from a queue to a topic and viceversa.</li>
</ul><h3 id="Build-080"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-080" title="Build-080"><i class="fa fa-link"></i></a><strong>Build 0.8.0</strong></h3><ul>
<li>Fixed a bug on Connectors timeout when Connection Pool is enabled (see <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#HTTP-Connection-Pool">HTTP Connection Pool</a>)</li>
<li>Added possibility to have a ResultSetExtractor (see <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JDBC-Connector">JDBC Connector</a>)</li>
</ul><h3 id="Build-070"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-070" title="Build-070"><i class="fa fa-link"></i></a><strong>Build 0.7.0</strong></h3><ul>
<li>HTTP Connection pooling for REST and SOAP connectors</li>
<li>Endpoint protection through API Gateway</li>
</ul><h3 id="Build-0617"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0617" title="Build-0617"><i class="fa fa-link"></i></a><strong>Build 0.6.17</strong></h3><ul>
<li>Most of verbose BEAR logging messages have now DEBUG level.</li>
<li>Fixed performance issue for DataPower Soap Connector.</li>
</ul><h3 id="Build-0614"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0614" title="Build-0614"><i class="fa fa-link"></i></a><strong>Build 0.6.14</strong></h3><ul>
<li>Now each field of the DataPowerHeader is forwarded with the priority described in this <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Populate-DataPower-header">section</a>.</li>
<li>Minor fixes.</li>
</ul><h3 id="Build-0610"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0610" title="Build-0610"><i class="fa fa-link"></i></a><strong>Build 0.6.10</strong></h3><ul>
<li>Stdout logging fixed with logback</li>
</ul><h3 id="Build-069"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-069" title="Build-069"><i class="fa fa-link"></i></a><strong>Build 0.6.9</strong></h3><ul>
<li>Added the ISPContext populated automatically through the http request header.</li>
</ul><h3 id="Build-068"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-068" title="Build-068"><i class="fa fa-link"></i></a><strong>Build 0.6.8</strong></h3><ul>
<li>Added <code>ParametrizedType</code> management for <code>BaseBearCache</code> keys and values.</li>
<li>Added the ability to create a warmup function for the connectors, initializing the <code>applicationContext</code> with default values.</li>
</ul><h3 id="Build-067"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-067" title="Build-067"><i class="fa fa-link"></i></a><strong>Build 0.6.7</strong></h3><ul>
<li>Added SOAP DataPower Header <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Transformer7">dynamic management</a>.</li>
</ul><h3 id="Build-063"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-063" title="Build-063"><i class="fa fa-link"></i></a><strong>Build 0.6.3</strong></h3><ul>
<li>Fixed session manager endpoint string.</li>
</ul><h3 id="Build-062"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-062" title="Build-062"><i class="fa fa-link"></i></a><strong>Build 0.6.2</strong></h3><ul>
<li>Reading session token from cdil0Session cookie if no session token is found in the headers.</li>
</ul><h3 id="Build-061"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-061" title="Build-061"><i class="fa fa-link"></i></a><strong>Build 0.6.1</strong></h3><ul>
<li>Better logging and no error output for no-copy-switcher configuration.</li>
<li>Fixed sessionContext error log, downgraded to <code>warn</code></li>
<li>Fixed URI params for Rest Connectors</li>
</ul><h3 id="Build-060"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-060" title="Build-060"><i class="fa fa-link"></i></a><strong>Build 0.6.0</strong></h3><ul>
<li><strong>NEW</strong>: In order to specify the length of the payload to log, use:</li>
</ul><pre><code class="yaml hljs"><span class="hljs-selector-tag">bear</span><span class="hljs-selector-class">.request</span><span class="hljs-selector-class">.logging</span><span class="hljs-selector-class">.max</span><span class="hljs-selector-class">.length</span>: 200
</code></pre><ul>
<li>MongoJPA support for aggregator framework</li>
</ul><div class="alert alert-danger">
<h4 id="BREAKING-CHANGES"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#BREAKING-CHANGES" title="BREAKING-CHANGES"><i class="fa fa-link"></i></a>BREAKING CHANGES</h4>
<ul>
<li>Classes that wants to log <strong>must</strong> use</li>
</ul>
<pre><code class="java hljs">Logger logger = LoggerUtils.getLogger(MyClass.class)
</code></pre>
<p>If you need the logger in an architectural managed class (an extension of Controller, Service, Connector, etc) you can use the protected field <code>logger</code>. In order to maintain backward compatibility the accessor method <code>bearLogger()</code> has ben maintained and marked as deprecated (it will be removed in a future release) even if its return type has been changed from BearLogger (that was a class) to Logger (the implemented interface)</p>
<ul>
<li>Send and receive headers for event messages<br>
The EventListener must implement the method</li>
</ul>
<pre><code class="java hljs"><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onReceived</span><span class="hljs-params">(<span class="hljs-keyword">byte</span>[] payload, Headers headers)</span> </span>{

}
</code></pre>
<ul>
<li>be4fe applications parent has to be set as follows:</li>
</ul>
<pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.intesasanpaolo.bear<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>simpleapp-bear-be4fe-v1<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
</code></pre>
<ul>
<li>We removed the <code>CallAsyncCompletableService</code> but the <code>CallAsyncService</code> now returns a <code>CompletableFuture</code>.</li>
</ul>
</div><ul>
<li>Handle soap fault in soapConnector with the handleFault method. Check all the details at <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Soap-fault">Soap fault paragraph</a></li>
<li>Added support for wiremock request matching. Check details at <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mock-the-connector4">Mock the connector paragraph</a></li>
</ul><h3 id="Build-051"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-051" title="Build-051"><i class="fa fa-link"></i></a><strong>Build 0.5.1</strong></h3><ul>
<li>Fixed SOAP Connector log with complete exception stackTrace output.</li>
</ul><h3 id="Build-050"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-050" title="Build-050"><i class="fa fa-link"></i></a><strong>Build 0.5.0</strong></h3><ul>
<li>Added DataPower Header fields definition for SOAP: now you can define your application custom fields in the <em>application.yml</em>.</li>
<li>DataPowerSoap now works with HeaderClasses generated by the application wsdl.</li>
<li>Added DataPower Rest Connector, with custom values definition thorugh the <em>application.yml</em>.</li>
<li>Added <code>CallInTransaction</code>: you can use this method within the Command layer.</li>
<li>Added <code>CallAsyncCompletableService</code> method, for Async method with <code>CompletableFuture</code> return type.</li>
<li>Added documentation paragraph related to <em>CORS</em> mechanism in the Controller section.</li>
<li>Added showcase example and documentation or wiremock request matching in rest connector</li>
<li>Added JDBC Connector <code>update</code> query type.</li>
<li>Added JDBC Controller <code>@Post</code>, <code>@Patch</code>, <code>@Delete</code> in application showcase</li>
<li>Fix REST Connector with ParametrizedType GENERICS: now you can use RESOURCE as <code>List&lt;Items&gt;</code>.</li>
<li>Minor bugs fixes</li>
</ul><h2 id="Introduction"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Introduction" title="Introduction"><i class="fa fa-link"></i></a>Introduction</h2><p>The framework suports the creation of two types of microservices:</p><ul>
<li><strong>Backend for Frontend</strong> (a.k.a. <em>BE4FE</em>)</li>
<li><strong>Core</strong></li>
</ul><p>A <em>BE4FE</em> microservice, with respect to the <strong>core</strong>, makes use of the <em>Session Context</em> information, provided by the specific channel. Moreover a <em>BE4FE</em> microservice provides out-of-the-box additional headers relative to the client and function-name information.</p><div class="alert alert-info">
<p>Further information about the context and the respective heades can be found in the specific <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Session-Manager">Session Context section</a>.</p>
</div><p><img src="./BEAR Framework Development Guide_files/LtWx95v.png" alt=""></p><h2 id="Project-creation"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Project-creation" title="Project-creation"><i class="fa fa-link"></i></a>Project creation</h2><h3 id="Requirements"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Requirements" title="Requirements"><i class="fa fa-link"></i></a>Requirements</h3><p>The main reference for this tutorial is the repository containing the showcase <a href="https://bitbucket.intesasanpaolo.com/scm/darwin/bear-v1.git" target="_blank" rel="noopener">bear-v1</a> (branch env/svil) that you can download, build and run before starting to follow the step-by-step guide.</p><p>In order to start to develop with BEAR Framework make sure you have the appropriate credentials (<em>username</em> and <em>password</em>) to gain access to the main ISP tools and utilities</p><ol>
<li>
<p>Intesa San Paolo credentials</p>
</li>
<li>
<p>WebVPN access or POUN access</p>
</li>
<li>
<p>Application acronym</p>
</li>
<li>
<p>Github repository in place for your application</p>
</li>
<li>
<p><a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/settings.xml?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">Settings.xml</a>:  There are two locations where a settings.xml file may live:</p>
<ul>
<li>The Maven install: <code>${maven.home}/conf/settings.xml</code></li>
<li>A user’s install: <code>${user.home}/.m2/settings.xml</code></li>
</ul>
</li>
</ol><h3 id="Naming-conventions"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Naming-conventions" title="Naming-conventions"><i class="fa fa-link"></i></a>Naming conventions</h3><p>Below is detailed the naming convention to be used for the project’s pom definition:</p><ul>
<li><strong>GROUP-ID</strong>: com.intesasanpaolo.bear.[ACRONYM].[PROJECT]</li>
<li><strong>BE4FE Artifact-id</strong>: [APPLICATION]-[PROJECT] (e.g. ndce-bonifico)</li>
<li><strong>CORE Artifact-id</strong>: core-[PROJECT] (e.g. core-bonifico)</li>
<li><strong>REPOSITORY-NAME</strong>: [Artifact-id]-v[MAJOR-VERSION] (e.g. core-bonifico-v2)</li>
<li><strong>START-VERSION</strong>: <strong>${version}</strong> <em>Managed by build pipeline</em></li>
</ul><p>For the <code>mq2kafka</code> and <code>kafka2mq</code> projects you must follow the convention:</p><ul>
<li><strong>MQ to KAFKA</strong>: bridge-[ACRONYM]-mq2kafka-[MQ-QUEUE]-[KAFKA-TOPIC]</li>
<li><strong>KAFKA to MQ</strong>: bridge-[ACRONYM]-kafka2mq-[KAFKA-TOPIC]-[MQ-QUEUE]</li>
</ul><p>For Host Bridge projects, you have to adopt this convention:</p><ul>
<li><strong>Artifact-id</strong>: bridge-[APPLICATION]-rest2host (e.g. bridge-ndce-rest2host)</li>
</ul><h2 id="Repository-setup"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Repository-setup" title="Repository-setup"><i class="fa fa-link"></i></a>Repository setup</h2><p>The first to create a new project, you must clone you project repository using the command:</p><pre><code class="sh hljs">git <span class="hljs-built_in">clone</span> &lt;URL&gt;
</code></pre><p>Where the <code>&lt;URL&gt;</code> is your BitBucket Repository address</p><p>Now create the branch <code>env/svil</code> and switch to it with the command:</p><pre><code class="sh hljs"><span class="hljs-attribute">git</span> checkout -b env/svil
</code></pre><h3 id="Start-up-base-structure"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Start-up-base-structure" title="Start-up-base-structure"><i class="fa fa-link"></i></a>Start-up base structure</h3><p>In order to generate the basic structure for the project you can make use of the maven archetype, executing one of the following commands, depending on your application type:</p><ul>
<li>
<p>BE4FE Archetype:</p>
<pre><code class="sh hljs"><span class="hljs-attribute">mvn</span> archetype:generate \
    -DarchetypeGroupId=com.intesasanpaolo.bear.archetype \
    -DarchetypeArtifactId=be4fe-archetype \
    -DarchetypeVersion=RELEASE
</code></pre>
<p>It is the skeleton of a Backend for Frontend application, which as <code>bear-arch-be4fe</code> as parent.</p>
</li>
<li>
<p>CORE Archetype:</p>
<pre><code class="sh hljs"> <span class="hljs-attribute">mvn</span> archetype:generate \
     -DarchetypeGroupId=com.intesasanpaolo.bear.archetype \
     -DarchetypeArtifactId=core-archetype \
     -DarchetypeVersion=RELEASE
</code></pre>
<p>It is the skeleton of a Core application, which as <code>bear-arch-core</code> as parent.</p>
</li>
<li>
<p>SessionManager Archetype:</p>
<pre><code class="sh hljs"><span class="hljs-attribute">mvn</span> archetype:generate \
    -DarchetypeGroupId=com.intesasanpaolo.bear.archetype \
    -DarchetypeArtifactId=session-manager-archetype \
    -DarchetypeVersion=RELEASE
</code></pre>
<p>It is the skeleton of a SessionManager application, which as <code>bear-core</code> as parent and it contains sample Controller, Service and Command classes. You need to implement the Service methods in order to retrieve the correct informations about the Session Context through the specific microservice.</p>
</li>
<li>
<p>ErrorManager Archetype:</p>
<pre><code class="sh hljs"><span class="hljs-attribute">mvn</span> archetype:generate \
    -DarchetypeGroupId=com.intesasanpaolo.bear.archetype \
    -DarchetypeArtifactId=<span class="hljs-literal">error</span>-manager-archetype \
    -DarchetypeVersion=RELEASE
</code></pre>
<p>It is the skeleton of an ErrorManager application, a BE4FE application that contains all the logics to connect to a MongoDB and retrieve error messages related to error keys. You only need to set the url of the channel specific MongoDB, in the <code>application.yml</code> file.</p>
</li>
<li>
<p>mqToKafka Archetype:</p>
<pre><code class="sh hljs"><span class="hljs-attribute">mvn</span> archetype:generate \
    -DarchetypeGroupId=com.intesasanpaolo.bear.archetype \
    -DarchetypeArtifactId=mqToKafka-archetype \
    -DarchetypeVersion=RELEASE
</code></pre>
<p>It is the skeleton of a message forwarder; it contains an MQ Listener with the method  application<code>onReceived</code>, where you can implement your business logic an the push the result on topic on Kafka.</p>
</li>
<li>
<p>kafkaToMq Archetype:</p>
<pre><code class="sh hljs"><span class="hljs-attribute">mvn</span> archetype:generate \
    -DarchetypeGroupId=com.intesasanpaolo.bear.archetype \
    -DarchetypeArtifactId=kafkaToMq-archetype \
    -DarchetypeVersion=RELEASE
</code></pre>
<p>It is the skeleton of a message forwarder; it contains an event Listener with the method  application<code>onReceived</code>, where you can implement your business logic an the push the result on a MQ Queue.</p>
</li>
<li>
<p>Library Archetype:</p>
<pre><code class="sh hljs">  <span class="hljs-attribute">mvn</span> archetype:generate \
 -DarchetypeGroupId=com.intesasanpaolo.bear.archetype \
 -DarchetypeArtifactId=lib-archetype \
 -DarchetypeVersion=RELEASE
</code></pre>
<p>It is the skeleton of a library with all the useful BEAR dependencies that can be used to share common functionalities between different applications.</p>
</li>
<li>
<p>Host Bridge Archetype:</p>
<pre><code class="sh hljs"><span class="hljs-attribute">mvn</span> archetype:generate \
    -DarchetypeGroupId=com.intesasanpaolo.bear.archetype \
    -DarchetypeArtifactId=host-bridge-archetype \
    -DarchetypeVersion=RELEASE
</code></pre>
<p>It is the skeleton of a bridge to invoke Business Services (BS) on Host. This bridge, which is a Jboss application, will expose services to be invoked with simple HTTP Requests.</p>
</li>
</ul><p>and specify the project fields (GroupId, ArtifactId, version,  Package name) according to the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Naming-conventions">naming conventions</a>.</p><div class="alert alert-warning">
<p>During the project definition the maven archetype generator will ask to specify the following parameters:</p>
<ul>
<li>groupId: refer to naming convention</li>
<li>artifactId: refer to naming convention</li>
<li>version: it MUST be set litelrally as  <strong>${version}</strong> placeholder</li>
<li>base package: refer to naming convention</li>
</ul>
</div><p>Alternatively you can add the archetype specs to your favourite IDE (e.g. IntelliJ), and then create your project, taking care of the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Naming-conventions">naming convention</a>.</p><div style="text-align:center"><img src="./BEAR Framework Development Guide_files/JmDP5Hz.png"></div><p>Now you should have the following project structure without the <em>java</em> classes:</p><div style="text-align:center"><img src="./BEAR Framework Development Guide_files/ts8qN2K.png"></div><p>Finally you can push your new project to origin:</p><pre><code class="sh hljs">git <span class="hljs-keyword">add</span> .
git commit -m <span class="hljs-string">"BEAR base structure from archetype"</span>
git push
</code></pre><div class="alert alert-danger">
<p>Remember that since you’ve configured the version inside your project pom as</p>
<ul>
<li>&lt;version&gt;${version}&lt;/version&gt;</li>
</ul>
<p>In order to build locally your project you must specify to maven the version of the project (e.g. <strong>mvn -Dversion=0.1.0-DEV clean install</strong> )</p>
</div><h3 id="Spring-boot-servlet-container"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Spring-boot-servlet-container" title="Spring-boot-servlet-container"><i class="fa fa-link"></i></a>Spring-boot servlet container</h3><p>The Spring Boot starters use Tomcat as an embedded container by default.<br>
The main HTTP port is set to <code>8080</code> in order to be exposed by the openshift POD to the external world, however locally it can be set defining the <code>server.port</code> in <code>application.yml</code> as follows:</p><pre><code class="yaml hljs"><span class="hljs-attribute">server</span>:
  <span class="hljs-attribute">port</span>:<span class="hljs-meta"> [YOUR_CHOOSEN_PORT]</span>
</code></pre><h3 id="PaaS-and-Pom-characteristics"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#PaaS-and-Pom-characteristics" title="PaaS-and-Pom-characteristics"><i class="fa fa-link"></i></a>PaaS and Pom characteristics</h3><p>Let’s have a look inside the <code>pom.xml</code> of the project you downloaded through maven archetype:</p><h4 id="BEAR-Framework-import"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#BEAR-Framework-import" title="BEAR-Framework-import"><i class="fa fa-link"></i></a>BEAR Framework import</h4><p>The framework import is based on the definition of the parent pom of the framework, that could be <code>bear-be4fe</code> or <code>bear-core</code>, depending on whether you are creating a <code>be4fe</code> project or a <code>core</code> one:</p><pre><code class="xml hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span></div><div class="code"><span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.intesasanpaolo.bear.showcase<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>showcase-be4fe-v1<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.intesasanpaolo.bear<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>bear-be4fe-v1<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
</div></div></code></pre><h4 id="JavaDoc-creation"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JavaDoc-creation" title="JavaDoc-creation"><i class="fa fa-link"></i></a>JavaDoc creation</h4><p>Inside the pom there is the plugin for the automatic creation of JavaDoc:</p><pre><code class="xml hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span></div><div class="code"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-javadoc-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${maven-javadoc-plugin.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>install<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>javadoc<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">failOnError</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">failOnError</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
</div></div></code></pre><h4 id="PaaS-settings"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#PaaS-settings" title="PaaS-settings"><i class="fa fa-link"></i></a>PaaS settings</h4><p>Below you can see the pom section related to the PaaS settings:</p><pre><code class="xml hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span>
<span data-linenumber="22"></span>
<span data-linenumber="23"></span>
<span data-linenumber="24"></span></div><div class="code"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-resources-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>copy-resources-diralias<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>validate<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>copy-resources<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">outputDirectory</span>&gt;</span>${basedir}/target/diraliases/OPENSHIFT<span class="hljs-tag">&lt;/<span class="hljs-name">outputDirectory</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
               <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>${basedir}/target/<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                     <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>showcase-be4fe-v1-*.jar<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                  <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
               <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
</div></div></code></pre><p>Line 12 represents the default output directory for copying the artifact in order to create the container on the PaaS.</p><h4 id="Additional-plugins"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Additional-plugins" title="Additional-plugins"><i class="fa fa-link"></i></a>Additional plugins</h4><p>The following definition is included in the pom.xml to allow source scanning and subsequent static analysis. The definition is mandatory for the correct build of the source</p><pre><code class="xml hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span></div><div class="code"><span class="hljs-tag">&lt;<span class="hljs-name">pluginManagement</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.sonarsource.scanner.maven<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>sonar-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${sonar-maven-plugin.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">pluginManagement</span>&gt;</span>
</div></div></code></pre><h3 id="Project-Build"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Project-Build" title="Project-Build"><i class="fa fa-link"></i></a>Project Build</h3><p>Now you are ready to build and execute your showcase project with the following commands:</p><pre><code class="sh hljs"><span class="hljs-attribute">mvn</span> clean install -Dversion=<span class="hljs-number">0</span>.<span class="hljs-number">1</span>.<span class="hljs-number">0</span>-DEV
</code></pre><p>And run the <code>jar</code> file generated in the <code>target</code> sub-directory</p><pre><code class="sh hljs"><span class="hljs-selector-tag">java</span> <span class="hljs-selector-tag">-jar</span> <span class="hljs-selector-attr">[applicazione]</span><span class="hljs-selector-class">.jar</span>
</code></pre><p>Or execute the following command with the <code>spring-boot-maven-plugin</code>:</p><pre><code class="sh hljs"><span class="hljs-selector-tag">mvn</span> <span class="hljs-selector-tag">spring-boot</span><span class="hljs-selector-pseudo">:run</span>
</code></pre><h2 id="Request-Lifecycle"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Lifecycle" title="Request-Lifecycle"><i class="fa fa-link"></i></a>Request Lifecycle</h2><p><img src="./BEAR Framework Development Guide_files/rIxqQ8P.png" alt=""></p><p>The <em>Controller</em> manages data flow and here various operations can be performed , including:</p><ol>
<li>Validation: Input data validation through Spring annotations (<a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/RequestBody.html" target="_blank" rel="noopener"><code>@RequestBody</code></a>, <code>@NotNull</code>, ect.)</li>
<li>Command: invoke the <code>execute()</code> method of the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Command">Command</a></li>
<li>Resource management: Generation of the resource through the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Resource">ResourceAssembler</a></li>
<li>Any other custom additional operation</li>
</ol><p>The command pattern decouples data management, passing from a transport object (DTO) to a domain object (OM). Within the Command you can call one or more Service-type components for the realization of the business logic, in order to make the execution code clearer and more readable.</p><p>The services are used to compose well-defined and reusable logic inside the controllers and allow outwards calls through the connectors, hiding the complexity to the command.</p><p>The table below display, for each type of class, the necessary annotation:</p><table>
<thead>
<tr>
<th>Class</th>
<th>Annotation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Assembler</td>
<td>-</td>
</tr>
<tr>
<td>Cache</td>
<td>@Service</td>
</tr>
<tr>
<td>Command</td>
<td>@Component @Scope(“prototype”)</td>
</tr>
<tr>
<td>Connector</td>
<td>@Service</td>
</tr>
<tr>
<td>Controller</td>
<td>@RestController</td>
</tr>
<tr>
<td>DTO</td>
<td>-</td>
</tr>
<tr>
<td>Exception</td>
<td>-</td>
</tr>
<tr>
<td>Factory</td>
<td>@Component</td>
</tr>
<tr>
<td>Listener</td>
<td>@Component</td>
</tr>
<tr>
<td>Model</td>
<td>-</td>
</tr>
<tr>
<td>Resource</td>
<td>@Relation</td>
</tr>
<tr>
<td>Service</td>
<td>@Service</td>
</tr>
</tbody>
</table><p>Below we will give an example of the development of all the classes necessary for the realization of a basic microservice with the BEAR Framework. We have used a top-down approach, from the Controller to the Connector, but the order of class creation is not relevant.</p><h2 id="Controller"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Controller" title="Controller"><i class="fa fa-link"></i></a>Controller</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].controllers</p>
</div><p>In order to build RESTful web services, HTTP requests have to be handled by a controller. These components are easily identified by the <code>@RestController</code> Spring annotation, and <strong>it is mandatory</strong> that all controllers extend, according to your needs, one of the architectural Controller classes, each of which requires a <em>CLIENT_ID</em> and a <em>JWT_TOKEN</em> in the <em>HTTP-Header</em>. Your controller has to extend one of these classes:</p><ol>
<li>
<p><strong>CoreController</strong> used to build a core microservice application</p>
</li>
<li>
<p><strong>StatelessController</strong> used to build a be4fe microservice application without applicative user session</p>
</li>
<li>
<p><strong>StatefulController</strong> used to build a be4fe microservice application with applicative user session</p>
</li>
</ol><p>The <code>BitCoinController</code>  below handles GET requests for /bitcoinstats by returning a new instance of the applicative <code>Bitcoin</code> resource:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span></div><div class="code"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping</span>(value = <span class="hljs-string">"bitcoinstats"</span>, produces = {MediaType.APPLICATION_JSON_VALUE, <span class="hljs-string">"application/hal+json"</span>})
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BitCoinController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulController</span> </span>{

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> BeanFactory beanFactory;

    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;?&gt; myBearGetRestService(Pageable pageable) <span class="hljs-keyword">throws</span> Exception {

        BitCoinCommand command = beanFactory.getBean(BitCoinCommand.class);

        BitCoin bitCoin = command.execute();

        BitCoinResourceAssembler bitCoinResourceAssembler = <span class="hljs-keyword">new</span> BitCoinResourceAssembler();

        BitcoinResource bitcoinResource = bitCoinResourceAssembler.toResource(bitCoin);

        <span class="hljs-keyword">return</span> ok(bitcoinResource);
    }
}
</div></div></code></pre><ul>
<li>Line 1: Annotate the Controller as a <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/RestController.html" target="_blank" rel="noopener"><code>@RestController</code></a></li>
<li>Line 2: Define the URL base path for the Controller with the <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/RequestMapping.html" target="_blank" rel="noopener"><code>@RequestMapping</code></a> annotation:
<ul>
<li><em>value</em>: The primary mapping expressed by this annotation.</li>
<li><em>params</em>: The parameters of the mapped request, narrowing the primary mapping.</li>
<li><em>name</em>: Assign a name to this mapping.</li>
<li><em>headers</em>: The headers of the mapped request, narrowing the primary mapping.</li>
<li><em>path</em>: The path mapping URIs.</li>
<li><em>consumes</em>: The consumable media types of the mapped request, narrowing the primary mapping.</li>
<li><em>produces</em>: The producible media types of the mapped request, narrowing the primary mapping.</li>
</ul>
</li>
<li>Line 5-6: <code>BeanFactory</code> autowiring for command beans creation.</li>
<li>Line 8: Define the HTTP Method mapping for the requests onto the specific handler method. Accordingly to REST paradigm, it could be one of the following:
<ul>
<li><a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/GetMapping.html" target="_blank" rel="noopener"><code>@GetMapping</code></a> - <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/controller/UserController.java?at=refs%2Fheads%2Fenv%2Fsvil#83-100" target="_blank" rel="noopener">usage example</a></li>
<li><a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/PostMapping.html" target="_blank" rel="noopener"><code>@PostMapping</code></a> - <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/controller/UserController.java?at=refs%2Fheads%2Fenv%2Fsvil#61-75" target="_blank" rel="noopener">usage example</a></li>
<li><a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/PutMapping.html" target="_blank" rel="noopener"><code>@PutMapping</code></a></li>
<li><a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/DeleteMapping.html" target="_blank" rel="noopener"><code>@DeleteMapping</code></a> - <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/controller/UserController.java?at=refs%2Fheads%2Fenv%2Fsvil#154-161" target="_blank" rel="noopener">usage example</a></li>
<li><a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/PatchMapping.html" target="_blank" rel="noopener"><code>@PatchMapping</code></a> - <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/controller/UserController.java?at=refs%2Fheads%2Fenv%2Fsvil#108-127" target="_blank" rel="noopener">usage example</a></li>
</ul>
</li>
<li>Line 11: The creation of your custom command from the Spring context through the <code>BeanFactory.getBean()</code> method. This method takes the following parameters:
<ul>
<li><em>YourCustomCommand.class</em> (mandatory).</li>
<li>Additional optional parameters (e.g. <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/controller/UserController.java?at=refs%2Fheads%2Fenv%2Fsvil#90" target="_blank" rel="noopener">Pageable</a> or <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/controller/UserController.java?at=refs%2Fheads%2Fenv%2Fsvil#64" target="_blank" rel="noopener">DTO</a>).</li>
</ul>
</li>
<li>Line 13: The command execution through the command method <code>execute()</code>.</li>
<li>Line 15-17: Transformation from the <code>execute()</code> Object Model output to the application Resource through the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Resource-Assembler">ResourceAssembler</a>.</li>
<li>Line 19: Return a <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Resource">Resource</a>.</li>
</ul><p>Inside the <em>Controller</em> you have the chance to use a predefined set of objects that allows you to retrieve useful data to build your business logic.</p><p>These objects can be found inside the RequestContextHolder utility class:</p><ol>
<li>HttpRequest(<em>deprecated</em> replaced in next release with specific objects) accessible through:</li>
</ol><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code">RequestContextHolder.getRequest()
</div></div></code></pre><ol start="2">
<li>SessionContext accessible through</li>
</ol><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code">RequestContextHolder.getSessionContext()
</div></div></code></pre><ol start="3">
<li>ApplicationContext accessible throuh</li>
</ol><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code">RequestContextHolder.getApplicationContext()
</div></div></code></pre><h3 id="Http-Request-amp-Response"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Http-Request-amp-Response" title="Http-Request-amp-Response"><i class="fa fa-link"></i></a>Http Request &amp; Response</h3><p>Spring MVC will give you the HttpRequest or the HttpResponse objects if you just add <code>HttpServletRequest</code> or <code>HttpServletResponse</code>  of them to your controller method signature:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span></div><div class="code"><span class="hljs-meta">@GetMapping</span>
    <span class="hljs-keyword">public</span> ResponseEntity&lt;?&gt; getUsers(HttpServletRequest request, HttpServletResponse response) {
        <span class="hljs-comment">/*
         * Controller code
         */</span>

        <span class="hljs-comment">// Here you can use the request and response objects like:</span>
        <span class="hljs-comment">// request.setAttribute(attributeName, object);</span>
        <span class="hljs-comment">// response.setContentType("application/pdf");</span>
        <span class="hljs-comment">// response.getOutputStream().write(...);</span>
        <span class="hljs-comment">// response.setHeader(name, value);</span>
        <span class="hljs-comment">// HTTPCachingUtils.setCacheAndEtag(request, response, 5000);</span>
        <span class="hljs-comment">// ...</span>

        <span class="hljs-comment">/*
         * Controller code
         * return ...;
         */</span>
    }
</div></div></code></pre><p>In order to know other all the supported arguments that Spring MVC is able to automatically inject to your handler methods we strongly recommend you to have a look at the <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-ann-arguments" target="_blank" rel="noopener">Spring Documentation</a>.</p><h3 id="Swagger"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Swagger" title="Swagger"><i class="fa fa-link"></i></a>Swagger</h3><p>You can now access the URL <code>https://&lt;your_host&gt;:&lt;your_port&gt;/swagger-ui.html</code> to watch and test your API. This argument is deeply describe in this <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Application-Documentation-Swagger">section</a>.</p><h3 id="Cross-Origin-Resource-Sharing-CORS"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Cross-Origin-Resource-Sharing-CORS" title="Cross-Origin-Resource-Sharing-CORS"><i class="fa fa-link"></i></a>Cross-Origin Resource Sharing (CORS)</h3><p>CORS is disabled by default; however it can be enabled by adding the following annotation to the controller class:</p><p><code>@CrossOrigin(origins = "*", allowCredentials = "true", allowedHeaders = "*")</code></p><p>An example of CORS enabled token is:</p><pre><code class="java hljs"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@CrossOrigin</span>(origins = <span class="hljs-string">"*"</span>, allowCredentials = <span class="hljs-string">"true"</span>, allowedHeaders = <span class="hljs-string">"*"</span>)
<span class="hljs-meta">@RequestMapping</span>(value = <span class="hljs-string">"cities"</span>, produces = {MediaType.APPLICATION_JSON_VALUE, <span class="hljs-string">"application/hal+json"</span>})
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CityController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulController</span> </span>{

}
</code></pre><div class="alert alert-danger">
<p>Setting the allowed origins as <code>*</code> is heavily discouraged. Consider defining the proper allowed origins, instead.</p>
</div><h2 id="Command"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Command" title="Command"><i class="fa fa-link"></i></a>Command</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].commands</p>
</div><p>You have to implement a Command for each exposed interface, and each Command has to extend the BEAR <code>BaseCommand&lt;RESOURCE&gt;</code>, typed with your custom output object. Each command <strong>must always</strong> be annotated as <code>@Component</code> and <code>@Scope("prototype")</code>. Within this class you have to <code>@Autowired</code> one or more <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Service">Services</a> and execute a linear list of their  methods.</p><p>Command logic can be triggered by invoking their <code>execute()</code> method. This method internally calls <code>doExecute()</code>, which contains the business logic implemented for that specific Command.</p><p>Following an example of a <code>CalculatorAddCommand</code>:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span>
<span data-linenumber="22"></span>
<span data-linenumber="23"></span>
<span data-linenumber="24"></span>
<span data-linenumber="25"></span>
<span data-linenumber="26"></span></div><div class="code"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Scope</span>(<span class="hljs-string">"prototype"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CalculatorAddCommand</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseCommand</span>&lt;<span class="hljs-title">Integer</span>&gt; </span>{

    <span class="hljs-keyword">private</span> Integer a;
    <span class="hljs-keyword">private</span> Integer b;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> CalculatorService calculatorService;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">CalculatorAddCommand</span><span class="hljs-params">(Integer a, Integer b)</span> </span>{
        <span class="hljs-keyword">this</span>.a = a;
        <span class="hljs-keyword">this</span>.b = b;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">canExecute</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> BearForbiddenException </span>{
        <span class="hljs-keyword">return</span> a&gt;=b;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">doExecute</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
        Integer result = calculatorService.add(a, b);
        <span class="hljs-keyword">return</span> result;
    }
}
</div></div></code></pre><ul>
<li>Line 1: Each command must be annotated as <code>@Component</code></li>
<li>Line 2: Each command must be annotate as <code>@Scope("prototype")</code></li>
<li>Line 3: Each command must extend the <code>BaseCommand&lt;RESOURCE&gt;</code> class</li>
<li>Line 5-6: Each command can have some request parameter</li>
<li>Line 8: <code>@Autowired</code> of one or more <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Service">Services</a></li>
<li>Line 11: Each command should have a constructor to initialize the request parameters</li>
<li>Line 16-17: <code>@Override</code> of the <code>BaseCommand.canExecute()</code> method (see <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Visibility-Cone">Visiblity Cone</a> below)</li>
<li>Line 21-22: <code>@Override</code> of the <code>BaseCommand.doExecute()</code> method</li>
<li>Line 23: Invoke a sequence of services methods</li>
<li>Line 24: Return the Resourse output.</li>
</ul><h3 id="Visibility-Cone"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Visibility-Cone" title="Visibility-Cone"><i class="fa fa-link"></i></a>Visibility Cone</h3><p>The visibility cone is used to set some business constraints on Command executions. This is obtained by implementing the <code>canExecute()</code> method with the appropriate checks. BEAR framework ensures that these checks are performed before the actual execution of the Command, i.e. the execution of <code>doEexecute()</code> method implement for that specific Command.</p><p>These checks are evaluated inside <code>BaseCommand.execute()</code>, which is the method to invoke inside a Controller to trigger the Command execution. This method is final, and thus unmodifiable, in order to follow in any case this visibility cone flow:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span></div><div class="code"><span class="hljs-keyword">if</span>(canExecute())
    <span class="hljs-keyword">return</span> doExecute();
<span class="hljs-keyword">else</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BearForbiddenException(<span class="hljs-string">"Cannot execute command"</span>);
</div></div></code></pre><p>The implementation of <code>canExecute()</code> should return <code>true</code> only if the Command logic should be executed. If this method returns <code>false</code>, BEAR will throw a generic <code>BearForbiddenException</code> that will result into a <strong>403 HTTP Status Code response</strong> with the following body:</p><pre><code class="jsonld hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span></div><div class="code">{
    <span class="hljs-attr">"mainError"</span>: {
        <span class="hljs-attr">"message"</span>: <span class="hljs-string">"[BEAR-ARCH] Cannot execute command"</span>,
        <span class="hljs-attr">"code"</span>: <span class="hljs-string">"GENERIC"</span>,
        <span class="hljs-attr">"errorType"</span>: <span class="hljs-string">"BUSINESS"</span>,
        <span class="hljs-attr">"severity"</span>: <span class="hljs-string">"ERROR"</span>,
        <span class="hljs-attr">"technicalInfo"</span>: {
            <span class="hljs-attr">"exception"</span>: <span class="hljs-string">"com.intesasanpaolo.bear.exceptions.BearForbiddenException"</span>,
            <span class="hljs-attr">"path"</span>: <span class="hljs-string">"/sum"</span>,
            <span class="hljs-attr">"error"</span>: <span class="hljs-string">"Forbidden"</span>,
            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"[BEAR-ARCH] Cannot execute command"</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1543924715181</span>,
            <span class="hljs-attr">"status"</span>: <span class="hljs-number">403</span>
        }
    }
}
</div></div></code></pre><p>It is also possible to customize this response with additional and application-specific data by manually throwing a <code>BearForbiddenException</code> with an appropriate message and error code inside <code>canExecute()</code> method. This is an example:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span></div><div class="code"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String LESS_ERROR = <span class="hljs-string">"L429"</span>;

<span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">canExecute</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> BearForbiddenException </span>{
    <span class="hljs-keyword">if</span>(a&lt;b){
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> BearForbiddenException(<span class="hljs-string">"A must be greater than or equal to B"</span>, LESS_ERROR);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
}
</div></div></code></pre><p>and this is the resulting response:</p><pre><code class="jsonld hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span></div><div class="code">{
    <span class="hljs-attr">"mainError"</span>: {
        <span class="hljs-attr">"message"</span>: <span class="hljs-string">"A must be greater than or equal to B"</span>,
        <span class="hljs-attr">"code"</span>: <span class="hljs-string">"L429"</span>,
        <span class="hljs-attr">"errorType"</span>: <span class="hljs-string">"BUSINESS"</span>,
        <span class="hljs-attr">"severity"</span>: <span class="hljs-string">"ERROR"</span>,
        <span class="hljs-attr">"technicalInfo"</span>: {
            <span class="hljs-attr">"exception"</span>: <span class="hljs-string">"com.intesasanpaolo.bear.exceptions.BearForbiddenException"</span>,
            <span class="hljs-attr">"path"</span>: <span class="hljs-string">"/sum"</span>,
            <span class="hljs-attr">"error"</span>: <span class="hljs-string">"Forbidden"</span>,
            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"A must be greater than or equal to B"</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1543924014102</span>,
            <span class="hljs-attr">"status"</span>: <span class="hljs-number">403</span>
        }
    }
}
</div></div></code></pre><h3 id="Call-Async-Service"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Call-Async-Service" title="Call-Async-Service"><i class="fa fa-link"></i></a>Call Async Service</h3><p>In order to obtain a <code>CompletableFuture</code> you can use the <code>callAsyncService(Supplier&lt;F&gt; T)</code> of the <code>BaseCommand</code> as follows:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span></div><div class="code"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Scope</span>(<span class="hljs-string">"prototype"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BitCoinDataPowerCommand</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseCommand</span>&lt;<span class="hljs-title">BitCoin</span>&gt; </span>{

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> BitCoinDataPowerService bitCoinDataPowerService;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> BitCoin <span class="hljs-title">canExecute</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> BearForbiddenException </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> BitCoin <span class="hljs-title">doExecute</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception</span>{
        CompletableFuture&lt;BitCoin&gt; bitCoinCompletableFuture = callAsyncService(bitCoinDataPowerService::getBitCoinStats);
        <span class="hljs-keyword">return</span> bitCoinCompletableFuture.get();
    }
}
</div></div></code></pre><ul>
<li>Line 9: The sample <code>execute()</code> method that returns a BitCoin, with all its stats.</li>
<li>Line 10: Call the <code>callAsyncService</code> method and put as the Service method <code>getBitCoinStats</code> as parameter and it will return a [<code>CompletableFuture</code>].(<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html" target="_blank" rel="noopener">https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html</a>)</li>
<li>Line 11: call the CompletableFuture method <code>get()</code> that waits, if necessary, for the computation to complete, and then retrieves its result.</li>
</ul><p>NOTE:<br>
the notation <code>bitCoinDataPowerService::getBitCoinStats</code> is equivalent to the lamba <code>()-&gt;bitCoinDataPowerService.getBitCoinStats()</code> so to passing method with some parameter should use this notation <code>()-&gt;object.method(param1, param2)</code>, as described in the previous section.</p><h3 id="Call-In-Transaction"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Call-In-Transaction" title="Call-In-Transaction"><i class="fa fa-link"></i></a>Call In Transaction</h3><p><code>BaseCommand</code>, in order to support transactional operation between different  services, provides the method <code>F callInTransaction(Supplier&lt;F&gt; T, Supplier&lt;G&gt; B, String transactionId)</code> with his many variants.</p><p><code>callInTransaction</code> method take in input:</p><ul>
<li>T the service call to perform</li>
<li>B the compesantion action of T in case of rollback</li>
<li>transactionId a user define transaction ID</li>
</ul><p><code>callInTransaction</code> perform T method and put B method in rollback stack with a user defined transaction ID, in case of an exception in a following call at <code>callInTransaction</code> all the steps with the same transaction ID in rollback stack are performed.<br>
In the following example we hava <code>add</code> method that simply add his input value to a total global variable</p><ul>
<li>at line 1 we add 10 to total and compensation method <code>add(-10)</code> is added to a stack associated with transaction ID  “txid1”</li>
<li>at line 3 add 7 and his compesation -7 to the same stack</li>
<li>at line 5 add 31 and the compensation -31 is added to a new stack associated with transaction ID  “txid2”</li>
<li>at line 9 we try to add an Integer to high and ther is an Exception, before exception throwing all the istruction in the rollback stack associated with transaction ID “txid2” are performed, in this moment only the call <code>add(-31)</code> is present; istruction <code>add(-7)</code> and <code>add(-10)</code> relates to txid1 and so are not performed; the total is 17</li>
<li>istruction at line 12 isn’t performed due to the exception raised at line 9</li>
</ul><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span></div><div class="code">    <span class="hljs-keyword">this</span>.callInTransaction(()-&gt;add(<span class="hljs-number">10</span>),()-&gt;add(-<span class="hljs-number">10</span>), <span class="hljs-string">"txid1"</span>);
<span class="hljs-comment">//now total is 10</span>
    <span class="hljs-keyword">this</span>.callInTransaction(()-&gt;add(<span class="hljs-number">7</span>),()-&gt;add(-<span class="hljs-number">7</span>), <span class="hljs-string">"txid1"</span>);
<span class="hljs-comment">//now total is 17</span>
    <span class="hljs-keyword">this</span>.callInTransaction(()-&gt;add(<span class="hljs-number">31</span>),()-&gt;add(-<span class="hljs-number">31</span>), <span class="hljs-string">"txid2"</span>);
<span class="hljs-comment">//now total is 48</span>

<span class="hljs-comment">//next istruction will throw an exception and perform the rollback methods marked with transaction ID txid2 so add(-31)</span>
    <span class="hljs-keyword">this</span>.callInTransaction(()-&gt;add(Integer.MAX_VALUE),()-&gt;add(-Integer.MAX_VALUE), <span class="hljs-string">"txid2"</span>);

<span class="hljs-comment">//next istruction is not performed because of the exception and  the global total is 17</span>
    <span class="hljs-keyword">this</span>.callInTransaction(()-&gt;add(<span class="hljs-number">3</span>),()-&gt;add(-<span class="hljs-number">3</span>), <span class="hljs-string">"txid2"</span>);
</div></div></code></pre><p>There are many variants of <code>callInTransaction</code>, in detail we have the combination of this possibilities:</p><ul>
<li>you may not pass a transactionID, in this case the call is automatically associated to the request header x-transaction-id if present or to a random id local to the command instance</li>
<li>you may have void sevice call or compensation call, in this case you can pass a <code>Consumer</code> instead of <code>Supplier</code></li>
<li>could be some call with no possibilty of compensation, in this case methods with no compensation parameter are provided</li>
</ul><p>In showcase’s class <code>CreateUserTransactionalCommand</code> a live example with variants methods.<br>
In this example transaction ID is automatically binded to x-transaction-id if present, at line 7 and 8 no compensation are provided but we want that in case of exception <code>userService.save(this.user)</code> will rollbacked.</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span></div><div class="code"><span class="hljs-meta">@Override</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">doExecute</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
   <span class="hljs-keyword">if</span> (userService.findById(user.getId()).isPresent()){
         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> UserAlreadyExistsException(<span class="hljs-string">"User already exists"</span>, ErrorCode.USER_ALREADY_EXISTS_CODE, HttpStatus.CONFLICT);
    }
   User user = callInTransaction(()-&gt;userService.save(<span class="hljs-keyword">this</span>.user),(x)-&gt;userService.delete(<span class="hljs-keyword">this</span>.user));
   callInTransaction(()-&gt;externalUserService.createExternalUser(externalUserFactory.createUser(user)));
   callInTransaction((x)-&gt;messageEventService.send(<span class="hljs-string">"New user created: "</span> + user.toString()));

   <span class="hljs-keyword">return</span> user;
}
</div></div></code></pre><p>NOTE:</p><ul>
<li>to pass a Supplier use this lamba contruct ()-&gt;userService.save(this.user)</li>
<li>in case of void call a Consumer is needed, this is the lamba contruct (x)-&gt;userService.delete(this.user)</li>
</ul><h3 id="Copy-Switcher"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Copy-Switcher" title="Copy-Switcher"><i class="fa fa-link"></i></a>Copy Switcher</h3><p>In order to support “Copy Banking”, <code>BaseCommand</code> class provides the method<br>
<code>F switchCall(Supplier&lt;F&gt; copyCall, Supplier&lt;F&gt; coreCall, String semaphoreName, long acceptableThreshold)</code>.<br>
<code>switchCall</code> performs a reading operation on local replicated data (<code>copyCall</code>) or a reading operation on mainframe data (<code>coreCall</code>) according the status of the Semaphore with name <code>semaphoreName</code>. If the latency of data replication is greater than or equal to the <code>acceptableThreshold</code> expressed in ms, <code>coreCall</code> is performed anyway.</p><p>In the following example we define <code>BitCoinSwitchableCommand</code>. At line 6 and 9 we reference the core service and the copy service; at line 14 we invoke <code>switchCall</code> method passing:</p><ul>
<li>The reference to the copy service method invocation (<code>copyBitCoinService::getBitCoinStats</code>);</li>
<li>The reference to core service method invocation (<code>coreBitCoinService::getBitCoinStats</code>);</li>
<li>A string with the Semaphore name we want to check to perform the switch;</li>
<li>The maximum acceptable latency expressed in ms.</li>
</ul><p>Bear Framework will invoke <code>copyBitCoinService::getBitCoinStats</code> only if (AND conditions):</p><ol>
<li>The replication of bitcoin data has an acceptable latency (i.e. it is updated <em>on average</em> after no more than <code>acceptableThreshold</code> milliseconds);</li>
<li>The status of <code>"bitcoin"</code> Semaphore allows reading that replicated data.</li>
</ol><p>The average latency of data replication is automatically  communicated via Kafka events to the microservice by the replication infrastructure. If a specific property is set (see <em><strong>Configuration</strong></em>), it is also possible to enable a refresh task that will be triggered if events have not been sent for a certain amount of time.</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span></div><div class="code"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Scope</span>(<span class="hljs-string">"prototype"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BitCoinSwitchableCommand</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseCommand</span>&lt;<span class="hljs-title">BitCoin</span>&gt; </span>{

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> BitCoinService coreBitCoinService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> BitCoinDataPowerService copyBitCoinService;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> BitCoin <span class="hljs-title">execute</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception</span>{

        BitCoin btc = switchCall(copyBitCoinService::getBitCoinStats,coreBitCoinService::getBitCoinStats,<span class="hljs-string">"bitcoin"</span>,<span class="hljs-number">10000</span>);
        <span class="hljs-keyword">return</span> btc;

    }
}
</div></div></code></pre><div class="alert alert-danger">
<p>NOTE</p>
<ul>
<li><code>switchCall</code> method <strong>must</strong> be used only for read operations.</li>
<li><code>switchCall</code> method <strong>must</strong> be used only in Core Microservices.</li>
</ul>
</div><p><strong>Configuration</strong></p><p>To enable Copy Switcher to switch on replication data, the property file should include a <code>copy-switcher</code> section with:</p><ul>
<li><code>semaphoreListener</code> the configuration of the architectural listener of Kafka events, with a <code>topic</code>, a <code>groupId</code> and bootstrap servers URLs (<code>bootstrapServers</code>);</li>
<li><code>semaphores</code> the list of Semaphores to watch and used by the application;</li>
<li><code>validities</code> for each Semaphore, its maximum validity: if no update event arrives after this time, the Semaphore is considered as expired and the switch goes to Core Banking. If not specified, a default value is used (<code>60</code> seconds);</li>
<li><code>configBaseUrl</code> the base REST URL to retrieve Semaphores status at startup (see <em><strong>Advanced notes</strong></em>).</li>
</ul><p>It is also possible to set other properties to enable optional features:</p><ul>
<li><code>refreshDelaySeconds</code> to enable the refresh task with this time interval (see <em><strong>Advanced notes</strong></em>).</li>
</ul><pre><code class="jsonld hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span></div><div class="code"><span class="hljs-keyword">copy</span>-switcher:
  semaphoreListener:
    topic: DRH_SEMAPHORE
    groupId: message-group-<span class="hljs-keyword">id</span>
    bootstrapServers: <span class="hljs-string">"salcls0686.sede.corp.sanpaoloimi.com:6667,salcls0687.sede.corp.sanpaoloimi.com:6667,salcls0690.sede.corp.sanpaoloimi.com:6667"</span>
  semaphores:
    - DRH_PRMC0_PROFILO-CORE
  validities:
    DRH_PRMC0_PROFILO-CORE: <span class="hljs-number">10000</span>
  configBaseUrl: http:<span class="hljs-comment">//core-governancedrh-v1-drhi0-svil.cloudapps-be-test.intesasanpaolo.com/api/semaphore</span>
  refreshDelaySeconds: <span class="hljs-number">10</span>
</div></div></code></pre><div class="alert alert-danger">
<ul>
<li>To know wich semaphore to use, please refer to Copy Banking referent.</li>
<li>If the mandatory configuration is not present or if it’s not possible to retrieve information using <code>configBaseUrl</code>, Bear Framework <strong>always</strong> switches on core calls.</li>
</ul>
</div><p><em><strong>Advanced Notes</strong></em></p><p>Bear Framework retrieves initial Copy Banking latencies at startup, calling a centralized Semaphores service.<br>
This service accepts a GET call with the name of semaphore required (<code>${copy-switcher.configBaseUrl}/{name}</code>) and gives a response body like the following one:</p><pre><code class="jsonld hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span></div><div class="code">{
    <span class="hljs-attr">"semaphore"</span>: {
        <span class="hljs-attr">"name"</span>: <span class="hljs-string">"DRH_PRMC0_PROFILO-CORE"</span>,
        <span class="hljs-attr">"latency"</span>: <span class="hljs-number">2346</span>,
        <span class="hljs-attr">"enabled"</span>: <span class="hljs-literal">true</span>
    }
}
</div></div></code></pre><p>After first initialization, Bear Framework waits for events on a Kafka topic, configured in <code>semaphoreListener</code>; the paylod is the following one:</p><pre><code class="jsonld hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span></div><div class="code">{
   <span class="hljs-string">"name"</span>:<span class="hljs-string">"[Semaphore name]"</span>, <span class="hljs-comment">#ACRONIMO.etc..</span>
   <span class="hljs-string">"latency"</span>:3000,
   <span class="hljs-string">"enabled"</span>:[<span class="hljs-literal">true</span>/<span class="hljs-literal">false</span>]
}
</div></div></code></pre><p>Bear Framework uses Kafka’s <code>TIMESTAMP</code> header to infer the time of the last Sempahore update.</p><p>If <code>refreshDelaySeconds</code> is set, BEAR framework will also create a scheduled task that will be triggered each <code>refreshDelaySeconds</code> seconds. This task checks Semaphores statuses and if it finds that some Semaphores have not received an update event for more time than their <code>validities</code>, it will call the centralized Semaphore service (using the same <code>configBaseUrl</code>) to retrieve their status. This is useful as a backup system in case of issues on Kafka’s events queue.</p><h2 id="Service"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Service" title="Service"><i class="fa fa-link"></i></a>Service</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].service</p>
</div><p>The service class contains the methods where you can take advantage of all the features of a connector. These methods are the ones that has to be invoked from the command to compose the business logic. This class has to extend the BEAR <code>BaseService</code> and has to implements all the service methods.</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BitCoinService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseService</span></span>{

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> BitCoinRestConnector bitCoinRestConnector;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> BitCoinRestRequestTransformer&lt;Void&gt; bitCoinRestRequestTransformer;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> BitCoinRestResponseTransformer&lt;BitCoin&gt; bitCoinRestResponseTransformer;

    <span class="hljs-function"><span class="hljs-keyword">public</span> BitCoin <span class="hljs-title">getBitCoinStats</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> bitCoinRestConnector.call(<span class="hljs-keyword">null</span> ,bitCoinRestRequestTransformer,bitCoinRestResponseTransformer);
    }
}
</div></div></code></pre><p>In the example above, a <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Rest-Connector">RestConnector</a> is used.</p><ul>
<li>Line 1: Annotate your <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Service">Service</a> class as a <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Service.html" target="_blank" rel="noopener"><code>@Service</code></a></li>
<li>Line 2: Your Service class must extend the <code>BaseService</code></li>
<li>Line 4-11: <code>@Autowired</code> of:
<ul>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Connector">Connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Transformer">Request Transformer</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Response-Transformer">Response Transformer</a></li>
</ul>
</li>
<li>Line 13-15: Implement the Service methods, invoking the <code>call()</code> method of the specified Connector.</li>
</ul><h2 id="Connector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Connector" title="Connector"><i class="fa fa-link"></i></a>Connector</h2><p>Connectors represent the last layer towards the external servers, repositories and other services. Currently the BEAR Framework offers several types of connectors, listed below:</p><ol>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JPA-Connector"><strong>JPA</strong></a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mongo-JPA-Connector"><strong>Mongo JPA</strong></a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JDBC-Connector"><strong>JDBC</strong></a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mongo-Connector"><strong>Mongo non-JPA</strong></a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Event-Connector"><strong>Event</strong></a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Rest-Connector"><strong>REST</strong></a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#BEAR-Internal-Connector"><strong>BEAR Internal</strong></a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#SOAP-Connector"><strong>SOAP</strong></a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#DataPower-SOAP-Connector"><strong>DataPower SOAP</strong></a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#DataPower-REST-Connector"><strong>DataPower REST</strong></a></li>
</ol><p>Each connector must extend the respective architectural component as described in the dedicated sections, depending on its type.<br>
Here is an example of a simple REST Connector:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BitCoinRestConnector</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseRestConnector</span>&lt;<span class="hljs-title">Void</span>, <span class="hljs-title">BitCoin</span>, <span class="hljs-title">Void</span>, <span class="hljs-title">BitCoin</span>&gt; </span>{

}
</div></div></code></pre><h3 id="HTTP-Connection-Pool"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#HTTP-Connection-Pool" title="HTTP-Connection-Pool"><i class="fa fa-link"></i></a>HTTP Connection Pool</h3><p>REST and SOAP connectors also support <strong>HTTP connection pooling</strong>: each connector has its own connection pool, populated on demand up to a specified threshold, so that connection requests can be serviced by already existing connections, thus saving setup time, which may be relatively large for short, encrypted connections.</p><p>The image below shows a comparison between pooled and throwaway connections for roundtrip requests to a test service that waits for a random delay:<br>
<img src="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html" alt="" title="Comparison of pooled and throwaway connections"></p><p>Connection pooling is enabled by default —. In order to customize the configuration, or to disable the pool altogether, please add a <strong>connectionPool</strong> key to the connector’s configuration (or to the default key).</p><p>An example configuration follows (all times are in milliseconds):</p><pre><code class="yaml hljs">connectionPool:
    readTimeout: 5000
    connectTimeout: 5000
    connectRequestTimeout: 5000
    idleTimeout: 60000
    connectionSweeperInterval: 5000
    maxConnections: 20
    enabled: <span class="hljs-literal">true</span>
</code></pre><p>The <strong>idleTimeout</strong> parameter is used by the connection sweeper, a thread that periodically cleans the pool from dead connections.<br>
The connection sweeper thread runs every <strong>connectionSweeperInterval</strong> milliseconds.</p><p>The <code>readTimeout</code> parameter will override the Connector <code>timeout</code>. This is the complete priority order for <code>readTimeout</code> property (the first one will take precedence over the following ones and so on):</p><ol>
<li><code>connectors.ConnectorTypeConfigurations.items.specificConnector.connectionPool.readTimeout</code></li>
<li><code>connectors.ConnectorTypeConfigurations.items.specificConnector.timeout</code></li>
<li><code>connectors.ConnectorsTypeConfigurations.default.timeout</code></li>
<li>Default value (5000)</li>
</ol><h2 id="Transformers"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Transformers" title="Transformers"><i class="fa fa-link"></i></a>Transformers</h2><p>You have to define two different transformers for the management and conversion of both the request and response parameters of the non-JPA Connectors.</p><h3 id="Request-Transformer"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Transformer" title="Request-Transformer"><i class="fa fa-link"></i></a>Request Transformer</h3><p>To create a <em>Request Transformer</em> you have to create a class that implements an Interface, which varies depending on the connector type, and that are described in the specific paragraphs. In general the Request Transformers have as parameters a generic <code>INPUT</code> and a list of <code>Object</code> as arguments. The Request Transformer has a single method <code>transform()</code> to override, and returns a specific Request Object.</p><h3 id="Response-Transformer"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Response-Transformer" title="Response-Transformer"><i class="fa fa-link"></i></a>Response Transformer</h3><p>To create a <em>Response Transformer</em> you have to create a class that implements the an Interface, which varies depending on the connector type, and that are described in the specific paragraphs. In general the Response Transformers have as parameter the relative <code>Request</code> Object and return an instance of <code>OUTPUT</code> (usually an Entity or a List of Entities, according to the Connector type).</p><h2 id="Resource"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Resource" title="Resource"><i class="fa fa-link"></i></a>Resource</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].resources</p>
</div><p>You have to provide the definition of the resource, different from the object or entity model, as follows:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span></div><div class="code"><span class="hljs-meta">@Relation</span>(value = <span class="hljs-string">"bitcoin"</span>, collectionRelation = <span class="hljs-string">"bitcoins"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BitCoinResource</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseResource</span> </span>{

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">float</span> estimated_transaction_volume_usd;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">float</span> <span class="hljs-title">getEstimated_transaction_volume_usd</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> estimated_transaction_volume_usd;}

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setEstimated_transaction_volume_usd</span><span class="hljs-params">(
              <span class="hljs-keyword">float</span> estimated_transaction_volume_usd)</span> </span>{
        <span class="hljs-keyword">this</span>.estimated_transaction_volume_usd = estimated_transaction_volume_usd;
    }
}
</div></div></code></pre><p>with related <em>getter</em> and <em>setter</em> methods.</p><h3 id="Resource-Assembler"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Resource-Assembler" title="Resource-Assembler"><i class="fa fa-link"></i></a>Resource Assembler</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].resources.assemblers</p>
</div><p>A class that extends the <code>BaseResourceAssemblerSupport&lt;Entity,Resource&gt;</code> with methods:</p><ul>
<li>toResource: from Entity to Resource.</li>
<li>toResources: from <code>List&lt;Entity&gt;</code> to <code>List&lt;Resource&gt;</code> (<a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/assembler/CustomerResourceAssembler.java?at=refs%2Fheads%2Fenv%2Fsvil#27-37" target="_blank" rel="noopener">optional</a>)</li>
<li>instantiateResource: from Entity to Resource (protected)</li>
</ul><div class="alert alert-info">
<p>An example of Respource Assembler class can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/assembler/BitCoinResourceAssembler.java?at=env/svil" target="_blank" rel="noopener">BitCoinResourceAssembler</a></p>
</div><h3 id="Resource-Factory"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Resource-Factory" title="Resource-Factory"><i class="fa fa-link"></i></a>Resource Factory</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].factory</p>
</div><p>A class annotated as a <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html" target="_blank" rel="noopener"><code>@Component</code></a> that generate e Resource from an input DTO. Following an example of a <code>User</code> Resource factory:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span></div><div class="code"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserFactory</span> </span>{

    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">createUser</span><span class="hljs-params">(CreateUserDto createUserDto)</span> </span>{

        User user = <span class="hljs-keyword">new</span> User();
        user.setId(createUserDto.getId());
        user.setUsername(createUserDto.getUsername());
        user.setFirstName(createUserDto.getFirstName());
        user.setLastName(createUserDto.getLastName());

        <span class="hljs-keyword">return</span> user;
    }
}
</div></div></code></pre><h2 id="JPA-Connector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JPA-Connector" title="JPA-Connector"><i class="fa fa-link"></i></a>JPA Connector</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.jpa</p>
</div><div class="alert alert-danger">
<p>It is possible to configure <strong>only ONE JPA connection</strong> shared among all the JPA connectors of the microservice</p>
</div><p>JPA connector represents a wrapper for <em>Spring Data JPA</em>, part of the larger Spring Data family, and makes it easy to implement JPA based repositories, providing all its features and queries.</p><h3 id="Create-the-connector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector" title="Create-the-connector"><i class="fa fa-link"></i></a>Create the connector</h3><p>Create an interface in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.jpa</code> package that extends <code>JPAConnector&lt;T, ID extends Serializable&gt;</code>.</p><p>The generic types have the following meaning:</p><ul>
<li><strong>T</strong>:    The Object Model on which the queries will be executed, your application entity.</li>
<li><strong>ID</strong>:   The entity Primary Key type, it could be <code>String</code>, <code>Long</code>, …</li>
</ul><div class="alert alert-info">
<p>An example of JPA Connector can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/jpaOracle/UserRepository.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">JpaConnectorExample</a>.</p>
</div><h3 id="Configure-the-connection"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connection" title="Configure-the-connection"><i class="fa fa-link"></i></a>Configure the connection</h3><p>Since by default you can have only one JPA connection, shared among the connectors, to set the configuration parameters you have to edit the <code>connectors.jpaConfigurations.connection</code> section in the <code>application.yml</code> file inserting the following properties:</p><ul>
<li><strong>url</strong>:                  The DB connection string (e.g. <code>jdbc:oracle:thin:@&lt;ip_address&gt;:&lt;port&gt;/&lt;sid&gt;</code>)</li>
<li><strong>driver-class-name</strong>:    A valid Driver class (e.g. <code>Oracle.jdbc.OracleDriver</code>)</li>
<li><strong>username</strong>:             The username for DB connection</li>
<li><strong>password</strong>:             The password for DB connection</li>
<li><strong>connectionPoolSize</strong>:   The size of the connection pool</li>
<li><strong>timeout</strong>:              The connection timeout</li>
<li><strong>hibernateDialect</strong>:     The dialect specific for the db instance</li>
<li><strong>hbm2ddl</strong>               The hibernate DDL strategy (validate|update|create|create-drop)</li>
<li><strong>mocked</strong>:               If set to <code>false</code> it points to the real DB defined by the previous params. If set to <code>true</code> it pulls up an embedded H2 DB for testing and you have to insert an initial script <code>jpa-h2.sql</code> in path <code>resources/scripts/</code> with the schema definition and the database population.</li>
<li><strong>path</strong>: the path in which look for initialization files, if not absolute path it will search on classpath:mocks. It can also be defined as file:path (e.g. file:src/main/resources/)</li>
<li><strong>files</strong>:  a list of file names.</li>
<li><strong>repositories</strong>: the list of Repositories belonging to the same connection.</li>
</ul><p>Here an example:</p><pre><code class="yaml hljs"><span class="hljs-symbol">jpaConfigurations:</span>
  <span class="hljs-symbol">connection:</span>
    <span class="hljs-symbol">url:</span> <span class="hljs-symbol">jdbc:</span><span class="hljs-symbol">oracle:</span><span class="hljs-symbol">thin:</span>@34.<span class="hljs-number">244.18</span>.<span class="hljs-number">3</span><span class="hljs-symbol">:</span><span class="hljs-number">1521</span>/xe
    driver-<span class="hljs-class"><span class="hljs-keyword">class</span>-<span class="hljs-title">name</span>: <span class="hljs-title">oracle</span>.<span class="hljs-title">jdbc</span>.<span class="hljs-title">OracleDriver</span></span>
    <span class="hljs-symbol">username:</span> system
    <span class="hljs-symbol">password:</span> oracle
    <span class="hljs-symbol">connectionPoolSize:</span> <span class="hljs-number">5</span>
    <span class="hljs-symbol">timeout:</span> <span class="hljs-number">6000</span>
    <span class="hljs-symbol">hibernateDialect:</span> org.hibernate.dialect.Oracle10gDialect
    <span class="hljs-symbol">hbm2ddl:</span> create
    <span class="hljs-symbol">mocked:</span> <span class="hljs-literal">true</span>
    <span class="hljs-symbol">path:</span> users/
    <span class="hljs-symbol">files:</span>
     - jpa-h2.sql
  <span class="hljs-symbol">repositories:</span>
    - UserRepository
    - BitCoinRepository
</code></pre><h4 id="Mock-the-connector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mock-the-connector" title="Mock-the-connector"><i class="fa fa-link"></i></a>Mock the connector</h4><p>Use a <code>jpa-h2.sql</code> file as follows:</p><pre><code class="sql hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span></div><div class="code"><span class="hljs-comment">--jpa-h2.sql</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> <span class="hljs-keyword">USERS</span>
(<span class="hljs-keyword">id</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">25</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
username <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">25</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
firstName <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">25</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
lastName <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">25</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-keyword">id</span>));

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">USERS</span> (<span class="hljs-keyword">id</span>, username, firstName, lastName)
<span class="hljs-keyword">VALUES</span>(<span class="hljs-string">'user1'</span>,<span class="hljs-string">'user1'</span>, <span class="hljs-string">'user1'</span>, <span class="hljs-string">'user1'</span>),
<span class="hljs-keyword">VALUES</span>(<span class="hljs-string">'user2'</span>,<span class="hljs-string">'user2'</span>, <span class="hljs-string">'user2'</span>, <span class="hljs-string">'user2'</span>);
</div></div></code></pre><div class="alert alert-info">
<p>An example of JPA connector configuration can be seen at:<br>
<a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/resources/application.yml?at=refs%2Fheads%2Fenv%2Fsvil#101-117" target="_blank" rel="noopener">JpaConnectorConfiguration</a></p>
</div><h3 id="Use-case-service-example"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example" title="Use-case-service-example"><i class="fa fa-link"></i></a>Use case service example</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].services</p>
</div><p>Let’s create a sample service that will make use of the connector just created.</p><p>Create a class that extends <code>BaseService</code> in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.services</code> package and annotate it with <code>@Service</code>.</p><p>Within this class, create a field for the connector interface created above  and annotate it as <code>@Autowired</code>.</p><p>The service class can implement, for example, the following methods:</p><ul>
<li>public void <strong>deleteById</strong>(ID id)</li>
<li>public void <strong>delete</strong>(T entity)</li>
<li>public boolean <strong>existsById</strong>(ID id)</li>
<li>public Optional <strong>findById</strong>(ID id)</li>
<li>public List <strong>findAll</strong>()</li>
<li>public Page <strong>findAll</strong>(Pageable pageable)</li>
<li>public List <strong>findAll</strong>(Sort sort)</li>
<li>public S <strong>save</strong>(S entity)</li>
<li>public List <strong>saveAll</strong>(Iterable entities)</li>
</ul><div class="alert alert-info">
<p>A complete implementation can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/service/UserService.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">JpaConnectorService</a></p>
</div><h2 id="Mongo-JPA-Connector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mongo-JPA-Connector" title="Mongo-JPA-Connector"><i class="fa fa-link"></i></a>Mongo JPA Connector</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.jpamongo</p>
</div><div class="alert alert-danger">
<p>It is possible to configure <strong>only ONE JPA connection</strong> shared among all the JPA connectors of the microservice</p>
</div><p>Mongo JPA connector represents a wrapper for <em>Spring Data Mongo</em> providing all its features and operations. Below you will find the guidelines to configure and correctly use our Mongo JPA Connector.</p><h3 id="Create-the-connector1"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector1" title="Create-the-connector1"><i class="fa fa-link"></i></a>Create the connector</h3><p>Create an interface in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.jpamongo</code> package that extends <code>MongoJPAConnector&lt;T, ID extends Serializable&gt;</code>.</p><p>The generic types have the following meaning:</p><ul>
<li><strong>T</strong>:    The Object Model on which the queries will be executed, your application entity.</li>
<li><strong>ID</strong>:   The entity Primary Key type, it could be <code>String</code>, <code>Long</code>, …</li>
</ul><div class="alert alert-info">
<p>An example of MongoJPA Connector can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/jpaMongo/PreferenceRepository.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">MongoJpaConnectorExample</a>.</p>
</div><h3 id="Configure-the-connection1"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connection1" title="Configure-the-connection1"><i class="fa fa-link"></i></a>Configure the connection</h3><p>Since by default you can have only one JPA connection, shared among the connectors, to set the configuration parameters you have to edit the <code>connectors.jpaMongoConfigurations.connection</code> section in the <code>application.yml</code> file inserting the following properties:</p><ul>
<li><strong>uri</strong>:      The DB connection string</li>
<li><strong>mocked</strong>:   If <code>true</code> it pulls up an embedded mongodb for testing, if <code>false</code> it points to the real DB defined by the previous params</li>
<li><strong>path</strong>: the path in which look for initialization files, if not absolute path it will search on <code>classpath:mocks</code></li>
<li><strong>files</strong>: a list of file names. The file name <strong>MUST</strong> be the same as the collection to populate!</li>
<li><strong>repositories</strong>: the list of Repositories belonging to the same connection.</li>
</ul><p>Here an example:</p><pre><code class="yaml hljs">jpaMongoConfigurations:
  connection:
    uri: mongodb:<span class="hljs-comment">//34.244.18.3:27017/testdb</span>
    mocked: <span class="hljs-literal">true</span>
    path: mongoMocks/ <span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> not absolute path it will search on classpath:mocks/</span>
    files:
      - preference.json
  repositories:
    - PreferenceRepository
</code></pre><h4 id="Mock-the-connector1"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mock-the-connector1" title="Mock-the-connector1"><i class="fa fa-link"></i></a>Mock the connector</h4><p>If the mocked confiration property is set to <code>true</code>, an in-memory version of the mongodb (a.k.a. fongo) will be set up. To automatically inject some data into the in-memory database, you can provide <code>JSON</code> files containing a list of <code>JSON</code> documents to import. It is <strong>mandatory</strong> that the file name corresponds to the name of the mongo collection in <strong>lower camel case</strong> (e.g. preferenceUser.json) in which the documents have to be imported.</p><p>In the connector configuration you must specify the absolute path of these files; otherwise the framework will expect them to be in the <code>classpath</code> directory.</p><div class="alert alert-info">
<p>An example of JPA connector configuration can be seen at: <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/resources/application.yml?at=refs%2Fheads%2Fenv%2Fsvil#137-145" target="_blank" rel="noopener">MongoJpaConnectorConfiguration</a></p>
</div><h3 id="Use-case-service-example1"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example1" title="Use-case-service-example1"><i class="fa fa-link"></i></a>Use case service example</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].services</p>
</div><p>Let’s create a sample service that will make use of the connector just created.</p><p>Create a class that extends <code>BaseService</code> in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.services</code> package and annotate it with <code>@Service</code>.</p><p>Within this class, create a field for the connector interface created above  and annotate it as <code>@Autowired</code>.</p><p>MongoDB documentts must be identified by a unique ID, that can be a field with the @Id annotation, or simply named id (see <a href="https://docs.spring.io/spring-data/mongodb/docs/1.2.0.RELEASE/reference/html/mapping-chapter.html" target="_blank" rel="noopener">here</a>). So it is reccomended to use the <a href="https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/core/index/Indexed.html" target="_blank" rel="noopener"><code>@Indexed</code></a> or <a href="https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/core/index/CompoundIndex.html" target="_blank" rel="noopener"><code>@CompoundIndex</code></a> annotations and implement the <em>findByAnyField</em> in the interface</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span></div><div class="code"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">PreferenceRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">MongoJPAConnector</span>&lt;<span class="hljs-title">Preference</span>, <span class="hljs-title">String</span>&gt; </span>{
    <span class="hljs-function">Preference <span class="hljs-title">findByPreferenceId</span><span class="hljs-params">(String id)</span></span>;
}
</div></div></code></pre><div class="alert alert-info">
<p>A complete implementation can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/service/PreferenceService.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">MongoJpaConnectorService</a></p>
</div><h2 id="JDBC-Connector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JDBC-Connector" title="JDBC-Connector"><i class="fa fa-link"></i></a>JDBC Connector</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.jdbc</p>
</div><div class="alert alert-danger">
<p>The framework version 0.5.0 has brought considerable changes compared to 0.4.0. In particular the <code>JDBCRequest</code> has now a field <code>Type</code> and the method <code>setType(JDBCQueryType)</code>. More details can be found <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Transformer1">here</a>.</p>
</div><p>The JDBC Connector simplifies the use of JDBC and helps to avoid common errors. It executes core JDBC workflow, leaving application code to provide SQL and extract results. This class executes SQL queries, initiating iteration over ResultSets and catching JDBC exceptions. The RowMapper interface is used to extract values from a ResultSet.</p><p>Here’s a <a href="https://docs.spring.io/spring/docs/4.0.x/spring-framework-reference/html/jdbc.html" target="_blank" rel="noopener">link</a> for the JDBC 4.0.x documentation.</p><h3 id="Create-the-connector2"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector2" title="Create-the-connector2"><i class="fa fa-link"></i></a>Create the connector</h3><p>Create a class in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.jdbc</code> package, that extends <code>JdbcTemplateConnector&lt;INPUT, OUTPUT, DTO, RESOURCE&gt;</code>.</p><p>The generic types have the following meaning:</p><ul>
<li><strong>INPUT</strong>:        The Object Model on which the queries will be executed</li>
<li><strong>OUTPUT</strong>:       The output of the query, defined as a List of the Business Model</li>
<li><strong>DTO</strong>:          The DTO for data transferring</li>
<li><strong>RESOURCE</strong>:     The output Resource you want to receive.</li>
</ul><div class="alert alert-info">
<p>An example of JDBC Connector can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/jdbc/CustomerConnector.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">JdbcConnectorExample</a></p>
</div><h3 id="Configure-the-connector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector" title="Configure-the-connector"><i class="fa fa-link"></i></a>Configure the connector</h3><p>To configure the connection to one or more data sources through the JDBCTemplateConnector, you have to edit the <code>application.yml</code> file inserting a new item in the <code>connectors.jdbcTemplateConfigurations.items</code> section; the name of the item must correspond to the name of the class created during the preious step and it must have the following properties:</p><ul>
<li><strong>uri</strong>:                  The DB connection string (e.g. <code>jdbc:oracle:thin:@&lt;ip_address&gt;:&lt;port&gt;/&lt;sid&gt;</code>)</li>
<li><strong>driver-class-name</strong>:    A valid Driver class (e.g. <code>Oracle.jdbc.OracleDriver</code>)</li>
<li><strong>username</strong>:             The username for DB connection</li>
<li><strong>password</strong>:             The password for DB connection</li>
<li><strong>connectionPoolSize</strong>: The size of the connection pool</li>
<li><strong>timeout</strong>: The connection timeout in ms</li>
<li><strong>mocked</strong>:               If set to <code>false</code> it points to the real DB defined by the previous params. If set to <code>true</code> it pulls up an embedded H2 DB for testing.</li>
<li><strong>path</strong>: the path in which look for initialization files, if not absolute path it will search on classpath:mocks. It can also be defined as file:path (e.g. file:src/main/resources/)</li>
<li><strong>files</strong>: a list of file names.</li>
</ul><div class="alert alert-danger">
<p>Whether a field is in common with multiple connectors, you can put it before the <code>items</code> section, such as to make it valid for all connectors unless it is overwritten in the specific connector section.</p>
</div><p>Here an example:</p><pre><code class="yaml hljs"><span class="hljs-symbol">jdbcConfigurations:</span>
    <span class="hljs-symbol">items:</span>
      <span class="hljs-symbol">CustomerConnector:</span>
        <span class="hljs-symbol">uri:</span> <span class="hljs-symbol">jdbc:</span><span class="hljs-symbol">oracle:</span><span class="hljs-symbol">thin:</span>@localhost<span class="hljs-symbol">:</span><span class="hljs-number">1521</span>/xe
        driver-<span class="hljs-class"><span class="hljs-keyword">class</span>-<span class="hljs-title">name</span>: <span class="hljs-title">oracle</span>.<span class="hljs-title">jdbc</span>.<span class="hljs-title">OracleDriver</span></span>
        <span class="hljs-symbol">username:</span> system
        <span class="hljs-symbol">password:</span> oracle
        <span class="hljs-symbol">connectionPoolSize:</span> <span class="hljs-number">5</span>
        <span class="hljs-symbol">timeout:</span> <span class="hljs-number">6000</span>
        <span class="hljs-symbol">mocked:</span> <span class="hljs-literal">true</span>
        <span class="hljs-symbol">path:</span> customers/
        <span class="hljs-symbol">files:</span>
          - jdbc-h2.sql
</code></pre><h4 id="Mock-the-connector2"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mock-the-connector2" title="Mock-the-connector2"><i class="fa fa-link"></i></a>Mock the connector</h4><p>Use the <code>jdbc-h2.sql</code> file:</p><pre><code class="sql hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span></div><div class="code"><span class="hljs-comment">--jdbc-h2.sql</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> CUSTOMERS (
    <span class="hljs-keyword">id</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">25</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    username <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">25</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    firstName <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">25</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    lastName <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">25</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
    PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-keyword">id</span>)
);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> CUSTOMERS (<span class="hljs-keyword">id</span>, username, firstName, lastName)
    <span class="hljs-keyword">VALUES</span>(<span class="hljs-string">'customer1'</span>,<span class="hljs-string">'customer1'</span>, <span class="hljs-string">'customer1'</span>, <span class="hljs-string">'customer1'</span>),
    <span class="hljs-keyword">VALUES</span>(<span class="hljs-string">'customer2'</span>,<span class="hljs-string">'customer2'</span>, <span class="hljs-string">'customer2'</span>, <span class="hljs-string">'customer2'</span>);
</div></div></code></pre><div class="alert alert-info">
<p>An example of JDBC connector configuration can be seen at:<br>
<a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/resources/application.yml?at=refs%2Fheads%2Fenv%2Fsvil#86-100" target="_blank" rel="noopener">JdbcConnectorConfiguration</a></p>
</div><h3 id="Create-the-Tansformers"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers" title="Create-the-Tansformers"><i class="fa fa-link"></i></a>Create the Tansformers</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.jdbc.transformers</p>
</div><p>You have to define two different transformers for the management and conversion of both the request and response parameters of the <em>JDBC Template Connector</em>.</p><h4 id="Request-Transformer1"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Transformer1" title="Request-Transformer1"><i class="fa fa-link"></i></a>Request Transformer</h4><p>To create a <em>Request Transformer</em> you have to create a class that implements the <code>IJDBCRequestTransformer&lt;INPUT, DTO&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code"><span class="hljs-function">JDBCRequest&lt;DTO&gt; <span class="hljs-title">transform</span><span class="hljs-params">(INPUT input, Object... args)</span>
</span></div></div></code></pre><p>The <code>trasform</code> method taks as parameters:</p><ul>
<li><strong>INPUT input</strong>:      the <code>JSON</code> document for the query</li>
<li><strong>Object… args</strong>    zero or more paramenter for the query document</li>
</ul><p>and returns a <code>JDBCRequest&lt;DTO&gt;</code> instance.</p><p>In the <code>transform</code> method you have to instantiate a <code>JDBCRequest&lt;&gt;</code> object and populate its fields through the respective setter methods:</p><ul>
<li><code>setQuery(query)</code> with the query string.</li>
<li><code>setRowMapper</code>: with the BeanPropertyRowMapper(Employee.class)); You can use this setter as an alternative to setResultSetExtractor()</li>
<li><code>setResultSetExtractor</code>: you can set a resultSetExtractor as an alternative to setRowMapper(). In this case you have to cast the return type of the that<code>call()</code>  method that is an Object.</li>
<li><code>setType</code> through the enum <code>JDBCQueryType</code> (it can be <code>FIND</code> for <em>SELECT</em> queries, <code>UPDATE</code> for <em>INSERT/UPDATE/DELETE</em> ones or <code>EXECUTE</code> to call Stored Procedures)</li>
<li><code>setParams</code>all the query params</li>
<li><code>setCallableStatementCreator</code> for the <code>EXECUTE</code> query type; it is used to set the <code>CallableStatement</code>, with the sql statement String, the <code>registerInParameters</code> and the <code>registerOutParameters</code>.</li>
<li><code>setStoredProcedureParameters</code> for the <code>EXECUTE</code> query type; it is used  to set the <code>StoredProcedureParameters</code> (<code>SqlOutParameter</code> and <code>SqlInParameter</code>)</li>
</ul><p><strong>hint</strong>: you don’t have to define a Class that extends RowMapper, you can just use the BeanPropertyRowMapper(yourEntity.class).</p><div class="alert alert-info">
<p>An example of JDBC Request Transformer can be seen at:<br>
<a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/jdbc/transformers/CustomerJDBCRequestTransformer.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">JdbcRequestTransformer</a></p>
</div><p>An example of JDBC Request Transformer to execute a Stored Procedure:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span>
<span data-linenumber="22"></span>
<span data-linenumber="23"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomerJDBCRequestTransformer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IJDBCRequestTransformer</span>&lt;<span class="hljs-title">String</span>, <span class="hljs-title">Void</span>&gt; </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> JDBCRequest&lt;Void&gt; <span class="hljs-title">transform</span><span class="hljs-params">(String query, Object... args)</span></span>{

        JDBCRequest&lt;Void&gt; jdbcConnectorRequest = <span class="hljs-keyword">new</span> JDBCRequest&lt;&gt;();
        jdbcConnectorRequest.setType((JDBCQueryType) args[<span class="hljs-number">0</span>]);

        List&lt;SqlParameter&gt; parameters = <span class="hljs-keyword">new</span> ArrayList&lt;SqlParameter&gt;();
        parameters.add(<span class="hljs-keyword">new</span> SqlOutParameter(<span class="hljs-string">"rc"</span>, OracleTypes.CURSOR));

        jdbcConnectorRequest.setCallableStatementCreator(con -&gt; {
            List&lt;Customer&gt; res = <span class="hljs-keyword">new</span> ArrayList&lt;Customer&gt;();
            CallableStatement callableStatement = con.prepareCall(<span class="hljs-string">"{call MYPROC(?)}"</span>);
            callableStatement.registerOutParameter(<span class="hljs-number">1</span>, OracleTypes.CURSOR);
            <span class="hljs-keyword">return</span> callableStatement;
        });
        jdbcConnectorRequest.setStoredProcedureParameters(parameters);

        <span class="hljs-keyword">return</span> jdbcConnectorRequest;
    }
}
</div></div></code></pre><h4 id="Response-Transformer1"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Response-Transformer1" title="Response-Transformer1"><i class="fa fa-link"></i></a>Response Transformer</h4><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.jdbc.transformers</p>
</div><p>To create a <em>Response Transformer</em> you have to create a class that implements the <code>IJDBCResponseTransformer&lt;RESOURCE, OUTPUT&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code"><span class="hljs-function">OUTPUT <span class="hljs-title">transform</span><span class="hljs-params">(JDBCResponse&lt;RESOURCE&gt; db2Response)</span>
</span></div></div></code></pre><p>The <code>trasform</code> method taks as parameters:</p><ul>
<li><code>JDBCResponse&lt;RESOURCE&gt;</code> response: the response object</li>
</ul><p>and returns an instance of <code>OUTPUT</code> (usually a List of entities).</p><p>In most of the cases you only have to call the <code>getResult()</code> method of the response object and return its value, as we can see from the following example:</p><div class="alert alert-info">
<p>An example of JDBC Response Transformer can be seen at:<br>
<a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/jdbc/transformers/CustomerJDBCResponseTransformer.java?at=env/svil" target="_blank" rel="noopener">JdbcResponseTransformer</a></p>
</div><p>An example of JDBC Response Transformer to execute a Stored Procedure:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomerJDBCResponseTransformer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IJDBCResponseTransformer</span>&lt;<span class="hljs-title">Customer</span>, <span class="hljs-title">Object</span>&gt; </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">transform</span><span class="hljs-params">(JDBCResponse&lt;Customer&gt; response)</span> </span>{
        <span class="hljs-keyword">return</span> response.getStoredProcedureResult();
    }
}
</div></div></code></pre><h3 id="Use-case-service-example2"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example2" title="Use-case-service-example2"><i class="fa fa-link"></i></a>Use case service example</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].services</p>
</div><p>Let’s create a sample service that will make use of the connector just created.</p><p>Create a class that extends <code>BaseService</code> in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.services</code> package and annotate it with <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Service</code></a>.</p><p>Within this class, create a field for the connector class created above and annotate it as <code>@Autowired</code>; moreover create an <code>@Autowired</code> field for the <code>JdbcRequestTransofrmer</code> and one for the <code>JdbcResponseTransformer</code> from the previous step.</p><div class="alert alert-info">
<p>A complete implementation can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/service/CustomerService.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">JdbcConnectorService</a></p>
</div><h2 id="Mongo-Connector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mongo-Connector" title="Mongo-Connector"><i class="fa fa-link"></i></a>Mongo Connector</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.mongo</p>
</div><p>The <em>Mongo Connector</em> simplifies the use of MongoDB and helps to avoid common errors. It executes core MongoDB workflow, while the application code has to provide the <code>JSON</code> document and extract the results.</p><p>This class executes <em>find</em>, <em>insert</em>, <em>remove</em>, <em>update</em> openations, initiating iteration over Documents and catching exceptions.</p><p>The <code>MongoQueryType</code> enum is used to define which operation must be executed over the provided <code>JSON</code> document.</p><h3 id="Create-the-connector3"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector3" title="Create-the-connector3"><i class="fa fa-link"></i></a>Create the connector</h3><p>Create a class in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.mongo</code> package, that extends the <code>MongoConnector&lt;INPUT, OUTPUT, DTO, RESOURCE&gt;</code>.</p><p>The generic types have the following meaning:</p><ul>
<li><strong>INPUT</strong>:        The Object Model on which the queries will be executed</li>
<li><strong>OUTPUT</strong>:       The output of the query, defined as a List of the Business Model</li>
<li><strong>DTO</strong>:          The DTO for data transferring</li>
<li><strong>RESOURCE</strong>:     The output Resource you want to receive.</li>
</ul><div class="alert alert-info">
<p>An example of Mongo Connector can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/mongo/CityConnector.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">MongoConnectorExample</a></p>
</div><h3 id="Configure-the-connector1"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector1" title="Configure-the-connector1"><i class="fa fa-link"></i></a>Configure the connector</h3><p>To configure the connection to one or more data sources through the Mongo Connector, you have to edit the <code>application.yml</code> file inserting a new item in the <code>connectors.mongoConfigurations.items</code> section; the name of the item must correspond to the name of the class created during the preious step and it must have the following properties:</p><ul>
<li><strong>uri</strong>:          The MongoDB connection string (e.g. <code>mongodb://&lt;mongodb-host&gt;:&lt;mongodb-port&gt;/&lt;mongodb-database&gt;</code>)</li>
<li><strong>collection</strong>:   The collection on which documents are stored</li>
<li><strong>mocked</strong>:       If set to <code>true</code> it pulls up an embedded Fongo for testing. If set to <code>false</code> it points to the real DB defined by the previous params</li>
<li><strong>path</strong>: the path in which look for initialization files, if not absolute path it will search on <code>classpath:mocks</code></li>
<li><strong>files</strong>: a list of file names. The file name <strong>MUST</strong> be the same as the collection to populate!</li>
</ul><div class="alert alert-danger">
<p>Whether a field is in common with multiple connectors, you can put it before the <code>items</code> section, such as to make it valid for all connectors unless it is overwritten in the specific connector section.</p>
</div><p>Here an example:</p><pre><code class="yaml hljs">mongoConfigurations:
  items:
    CityConnector:
      uri: mongodb:<span class="hljs-comment">//&lt;host&gt;:&lt;port&gt;/&lt;db_name&gt;</span>
      collection: city
      mocked: <span class="hljs-literal">true</span>
      path: mongoMocks/ <span class="hljs-meta">#<span class="hljs-meta-keyword">if</span> not absolute path it will search on classpath:mocks/</span>
      files:
        - city.json
</code></pre><h4 id="Mock-the-connector3"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mock-the-connector3" title="Mock-the-connector3"><i class="fa fa-link"></i></a>Mock the connector</h4><p>If the mocked confiration property is set to <code>true</code>, an in-memory version of the mongodb (a.k.a. fongo) will be set up. To automatically inject some data into the in-memory database, you can provide <code>JSON</code> files containing a list of <code>JSON</code> documents to import. It is <strong>mandatory</strong> that the file name correspons to the name of the mongo collection in which the documents have to be imported.</p><p>In the connector configuration you must specify the absolute path of these files; otherwise the framework will expect them to be in the <code>classpath</code> directory.</p><div class="alert alert-info">
<p>An example of Mongo connector configuration can be seen at:<br>
<a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/resources/application.yml?at=refs%2Fheads%2Fenv%2Fsvil#146-156" target="_blank" rel="noopener">MongoConnectorConfiguration</a></p>
</div><h3 id="Create-the-Tansformers1"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers1" title="Create-the-Tansformers1"><i class="fa fa-link"></i></a>Create the Tansformers</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.mongo.transformers</p>
</div><p>You have to define two different transformers for the management and conversion of both the request and response parameters of the <em>Mongo Connector</em>.</p><h4 id="Request-Transformer2"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Transformer2" title="Request-Transformer2"><i class="fa fa-link"></i></a>Request Transformer</h4><p>To create a <em>Request Transformer</em> you have to create a class that implements the <code>IMongoRequestTransformer&lt;INPUT, DTO&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code"><span class="hljs-function">MongoRequest&lt;DTO&gt; <span class="hljs-title">transform</span><span class="hljs-params">(INPUT input, Object... args)</span>
</span></div></div></code></pre><p>The <code>trasform</code> method taks as parameters:</p><ul>
<li>INPUT input:      the <code>JSON</code> document for the query</li>
<li>Object… args    zero or more paramenter for the query document</li>
</ul><p>and returns a <code>MongoRequest&lt;DTO&gt;</code> instance.</p><p>In the <code>transform</code> method you have to instantiate a <code>MongoRequest&lt;&gt;</code> object and populate its fields through the respective setter methods:</p><ul>
<li>setType(MongoQueryType.FIND|INSERT|REMOVE|UPDATE)</li>
<li>setQuery(“String SQL query, with or without parameters”)</li>
<li>setParameters(<strong>sorted</strong> args of the query, as array of Objects)</li>
</ul><div class="alert alert-info">
<p>An example of Mongo Request Transformer can be seen at:<br>
<a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/mongo/transformers/CityRequestTransformer.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">MongoRequestTransformer</a></p>
</div><h4 id="Response-Transformer2"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Response-Transformer2" title="Response-Transformer2"><i class="fa fa-link"></i></a>Response Transformer</h4><p>To create a <em>Response Transformer</em> you have to create a class that implements the <code>IMongoResponseTransformer&lt;RESOURCE, OUTPUT&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code"><span class="hljs-function">OUTPUT <span class="hljs-title">transform</span><span class="hljs-params">(MongoResponse&lt;RESOURCE&gt; mongoResponse)</span>
</span></div></div></code></pre><p>The <code>trasform</code> method taks as parameters:</p><ul>
<li><code>MongoResponse&lt;RESOURCE&gt;</code> response: the response object</li>
</ul><p>and returns an instance of <code>OUTPUT</code> (usually a List of entities).</p><p>In most of the cases you only have to call the <code>getResult()</code> method of the response object and return its value, as we can see from the following example:</p><div class="alert alert-info">
<p>An example of Mongo Response Transformer can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/mongo/transformers/CityResponseTransformer.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">MongoResponseTransformer</a></p>
</div><h3 id="Use-case-service-example3"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example3" title="Use-case-service-example3"><i class="fa fa-link"></i></a>Use case service example</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].services</p>
</div><p>Let’s create a sample service that will make use of the connector just created.</p><p>Create a class that extends <code>BaseService</code> in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.services</code> package and annotate it with <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Service</code></a>.</p><p>Within this class, create a field for the connector class created above and annotate it as <code>@Autowired</code>; moreover create an <code>@Autowired</code> field for the <code>MongoRequestTransofrmer</code> and one for the <code>MongoResponseTransformer</code> from the previous step.</p><div class="alert alert-info">
<p>A complete implementation can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/service/CityService.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">MongoConnectorService</a></p>
</div><h2 id="Mongo-GridFS-Connector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mongo-GridFS-Connector" title="Mongo-GridFS-Connector"><i class="fa fa-link"></i></a>Mongo GridFS Connector</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.gridFSMongo</p>
</div><p>The <em>Mongo GridFS Connector</em> simplifies the use of MongoDB with GridFS support and helps to avoid common errors.</p><p>The <code>GridFSMongoQueryType</code> enum is used to define which operation must be executed:</p><ul>
<li>FIND (Query query) - Return Type <code>GridFSFindIterable</code></li>
<li>FINDONE (Query query) - Return Type <code>GridFSFile</code></li>
<li>STORE (InputStream content, String filename, String contentType, Object metadata) - Return Type <code>ObjectId</code></li>
<li>DELETE (Query query) - Return Type <code>void</code></li>
<li>GETRESOURCE (String location) - Return Type <code>GridFsResource</code></li>
<li>GETRESOURCES (String location) - Return Type <code>GridFsResource[]</code></li>
<li>GETRESOURCEBYID (String id) - Return Type <code>GridFsResource</code></li>
</ul><p>For more details please refer to <a href="https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/gridfs/GridFsTemplate.html" target="_blank" rel="noopener">GridFSTemplate doc</a></p><h3 id="Create-the-connector4"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector4" title="Create-the-connector4"><i class="fa fa-link"></i></a>Create the connector</h3><p>Create a class in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.gridFSMongo</code> package, that extends the <code>GridFSMongoConnector&lt;INPUT, OUTPUT, DTO, RESOURCE&gt;</code>.</p><p>The generic types have the following meaning:</p><ul>
<li><strong>INPUT</strong>:        The Object Model on which the queries will be executed</li>
<li><strong>OUTPUT</strong>:       The output of the query, defined as a List of the Business Model</li>
<li><strong>DTO</strong>:          The DTO for data transferring</li>
<li><strong>RESOURCE</strong>:     The output Resource you want to receive.</li>
</ul><pre><code class="=java hljs"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GridFSConnector</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GridFSMongoConnector</span>&lt;<span class="hljs-title">String</span>, <span class="hljs-title">Object</span>, <span class="hljs-title">Void</span>, <span class="hljs-title">Object</span>&gt; </span>{
}
</code></pre><h3 id="Configure-the-connector2"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector2" title="Configure-the-connector2"><i class="fa fa-link"></i></a>Configure the connector</h3><p>To configure the connection to one or more data sources through the GridFS Mongo Connector, you have to edit the <code>application.yml</code> file inserting a new item in the <code>connectors.gridFSMongoConfigurations.items</code> section; the name of the item must correspond to the name of the class created during the preious step and it must have the following properties:</p><ul>
<li><strong>uri</strong>:          The MongoDB connection string (e.g. <code>mongodb://&lt;mongodb-host&gt;:&lt;mongodb-port&gt;/&lt;mongodb-database&gt;</code>)</li>
<li><strong>bucket</strong>:  The gridfs bucket (default is “fs”, if not defined)</li>
<li><strong>mocked</strong>:       If set to <code>true</code> it pulls up an embedded Fongo for testing. If set to <code>false</code> it points to the real DB defined by the previous params</li>
<li><strong>name</strong>: if mocked, it defines the embedded db name</li>
</ul><div class="alert alert-info">
<p>An example of MongoGridFSConnector Connector can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/gridFs/GridFSConnector.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">MongoGridFSConnectorExample</a></p>
</div><pre><code class="yaml hljs">gridFSMongoConfigurations:
  items:
    GridFSConnector:
      uri: mongodb://localhost:27017/<span class="hljs-built_in">test</span>
      bucket: <span class="hljs-built_in">test</span>
      mocked: <span class="hljs-literal">false</span>
</code></pre><h4 id="Mock-the-connector4"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mock-the-connector4" title="Mock-the-connector4"><i class="fa fa-link"></i></a>Mock the connector</h4><p>If the mocked confiration property is set to <code>true</code>, an in-memory version of the mongodb (a.k.a. fongo) will be set up. To automatically inject some data into the in-memory database.</p><h3 id="Create-the-Tansformers2"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers2" title="Create-the-Tansformers2"><i class="fa fa-link"></i></a>Create the Tansformers</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.gridFSMongo.transformers</p>
</div><p>You have to define two different transformers for the management and conversion of both the request and response parameters of the <em>GridFS Mongo Connector</em>.</p><h4 id="Request-Transformer3"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Transformer3" title="Request-Transformer3"><i class="fa fa-link"></i></a>Request Transformer</h4><p>To create a <em>Request Transformer</em> you have to create a class that implements the <code>IGridFSMongoRequestTransformer&lt;INPUT, DTO&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code"><span class="hljs-function">GridFSMongoRequest&lt;DTO&gt; <span class="hljs-title">transform</span><span class="hljs-params">(INPUT input, Object... args)</span>
</span></div></div></code></pre><p>The <code>trasform</code> method taks as parameters:</p><ul>
<li>INPUT input:      the <code>JSON</code> document for the query</li>
<li>Object… args    zero or more paramenter for the query document</li>
</ul><p>and returns a <code>GridFSMongoRequest&lt;DTO&gt;</code> instance.</p><p>In the <code>transform</code> method you have to instantiate a <code>GridFSMongoRequest&lt;&gt;</code> object and populate its fields through the respective setter methods:</p><ul>
<li>setType(GridFSMongoQueryType.FIND|FINDONE|STORE|DELETE|GETRESOURCE|GETRESOURCES)</li>
<li>setQuery(Query Object)</li>
<li>setParameters(<strong>sorted</strong> args of the query, as array of Objects)</li>
<li>setContent(The InputStream Object for STORE operations)</li>
<li>setFilename(The file name String for STORE operations)</li>
<li>setContentType(The file type for STORE operations)</li>
<li>setMetadata(The file metadata for STORE operations)</li>
<li>setLocation(The location String for queries operations)</li>
<li>setId(The resource Id to find)</li>
</ul><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GridFSRequestTransformer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IGridFSMongoRequestTransformer</span>&lt;<span class="hljs-title">String</span>, <span class="hljs-title">Void</span>&gt; </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> GridFSMongoRequest&lt;Void&gt; <span class="hljs-title">transform</span><span class="hljs-params">(String query, Object... args)</span> </span>{
        <span class="hljs-keyword">if</span> (! (args[<span class="hljs-number">0</span>] <span class="hljs-keyword">instanceof</span> GridFSMongoQueryType))
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> QueryTypeNotFoundException(<span class="hljs-string">"The first parameter must be the query type"</span>, ErrorCode.QUERY_TYPE_NOT_FOUND_CODE, HttpStatus.NOT_FOUND);

        String fileString = <span class="hljs-string">"My Test File String"</span>;
        InputStream inputStream = <span class="hljs-keyword">new</span> ByteArrayInputStream(fileString.getBytes(StandardCharsets.UTF_8));

        GridFSMongoRequest&lt;Void&gt; mongoQueryRequest = <span class="hljs-keyword">new</span> GridFSMongoRequest&lt;&gt;();

        mongoQueryRequest.setType((GridFSMongoQueryType) args[<span class="hljs-number">0</span>]);
        mongoQueryRequest.setContent(inputStream);
        mongoQueryRequest.setFilename(<span class="hljs-string">"test.json"</span>);
        mongoQueryRequest.setMetadata(<span class="hljs-keyword">null</span>);
        <span class="hljs-keyword">return</span> mongoQueryRequest;
    }
}

</div></div></code></pre><h4 id="Response-Transformer3"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Response-Transformer3" title="Response-Transformer3"><i class="fa fa-link"></i></a>Response Transformer</h4><p>To create a <em>Response Transformer</em> you have to create a class that implements the <code>GridFSResponseTransformer&lt;RESOURCE, OUTPUT&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code"><span class="hljs-function">OUTPUT <span class="hljs-title">transform</span><span class="hljs-params">(GridFSMongoResponse&lt;RESOURCE&gt; gridFSMongoResponse)</span>
</span></div></div></code></pre><p>The <code>trasform</code> method taks as parameters:</p><ul>
<li><code>GridFSMongoResponse&lt;RESOURCE&gt;</code> response: the response object</li>
</ul><p>and returns an instance of <code>OUTPUT</code>.</p><p>In most of the cases you only have to call the <code>getResult()</code> method of the response Object and return its value, as we can see from the following example:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GridFSResponseTransformer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IGridFSMongoResponseTransformer</span>&lt;<span class="hljs-title">Object</span>, <span class="hljs-title">Object</span>&gt; </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">transform</span><span class="hljs-params">(GridFSMongoResponse&lt;Object&gt; mongoResponse)</span> </span>{
        <span class="hljs-keyword">return</span> mongoResponse.getResult();
    }
}
</div></div></code></pre><h3 id="Use-case-service-example4"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example4" title="Use-case-service-example4"><i class="fa fa-link"></i></a>Use case service example</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].services</p>
</div><p>Let’s create a sample service that will make use of the connector just created.</p><p>Create a class that extends <code>BaseService</code> in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.services</code> package and annotate it with <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Service</code></a>.</p><p>Within this class, create a field for the connector class created above and annotate it as <code>@Autowired</code>; moreover create an <code>@Autowired</code> field for the <code>IGridFSMongoRequestTransformer</code> and one for the <code>IGridFSMongoResponseTransformer</code> from the previous step.</p><div class="alert alert-info">
<p>An example of MongoGridFSService can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/service/GridFSService.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">MongoGridFSServiceExample</a></p>
</div><h2 id="DB2-Connector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#DB2-Connector" title="DB2-Connector"><i class="fa fa-link"></i></a>DB2 Connector</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.db2</p>
</div><p>The DB2 Connector executes core JDBC workflow, with proper drivers definition, leaving application code to provide SQL and extract results. This class executes SQL queries, initiating iteration over ResultSets and catching JDBC exceptions. The RowMapper or ResultSetExtractor interface is used to extract values from a ResultSet.</p><h3 id="Create-the-connector5"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector5" title="Create-the-connector5"><i class="fa fa-link"></i></a>Create the connector</h3><p>Create a class in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.db2</code> package, that extends <code>DB2Connector&lt;INPUT, OUTPUT, DTO, RESOURCE&gt;</code>.</p><p>The generic types have the following meaning:</p><ul>
<li><strong>INPUT</strong>:        The Object Model on which the queries will be executed</li>
<li><strong>OUTPUT</strong>:       The output of the query, defined as a List of the Business Model</li>
<li><strong>DTO</strong>:          The DTO for data transferring</li>
<li><strong>RESOURCE</strong>:     The output Resource you want to receive.</li>
</ul><div class="alert alert-info">
<p>An example of DB2Connector Connector can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/db2/EmployeeConnector.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">DB2ConnectorExample</a></p>
</div><h3 id="Configure-the-connector3"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector3" title="Configure-the-connector3"><i class="fa fa-link"></i></a>Configure the connector</h3><p>To configure the connection to one or more data sources through the DBC2onnector, you have to edit the <code>application.yml</code> file inserting a new item in the <code>connectors.db2Configurations.items</code> section; the name of the item must correspond to the name of the class created during the preious step and it must have the following properties:</p><ul>
<li><strong>uri</strong>:                  The DB2 connection endpoint</li>
<li><strong>port</strong>:    The DB2 connection port</li>
<li><strong>dbName</strong>: the DB2 database name</li>
<li><strong>username</strong>:             The username for DB connection</li>
<li><strong>password</strong>:             The password for DB connection</li>
<li><strong>connectionPoolSize</strong>: The size of the connection pool</li>
<li><strong>connectionTimeout</strong>: The connection timeout in ms</li>
<li><strong>mocked</strong>:               If set to <code>false</code> it points to the real DB defined by the previous params. If set to <code>true</code> it pulls up an embedded H2 DB for testing.</li>
<li><strong>path</strong>: the path in which look for initialization files, if not absolute path it will search on classpath:mocks. It can also be defined as file:path (e.g. file:src/main/resources/)</li>
<li><strong>files</strong>: a list of file names.</li>
</ul><div class="alert alert-danger">
<p>Whether a field is in common with multiple connectors, you can put it before the <code>items</code> section, such as to make it valid for all connectors unless it is overwritten in the specific connector section.</p>
</div><p>Here an example:</p><pre><code class="yaml hljs">db2Configurations:
  items:
    EmployeeConnector:
      uri: 127.0.0.1
      port: 5250
      dbName: dbname
      username: <span class="hljs-string">""</span>
      password: <span class="hljs-string">""</span>
      connectionTimeout: 10000
      connectionPoolSize: 5
      mocked: <span class="hljs-literal">true</span>
      path: employees/
      files:
        - db2-h2.sql
</code></pre><h4 id="Mock-the-connector5"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mock-the-connector5" title="Mock-the-connector5"><i class="fa fa-link"></i></a>Mock the connector</h4><p>Use the <code>db2-h2.sql</code> file:</p><pre><code class="sql hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span></div><div class="code"><span class="hljs-comment">--db2-h2.sql</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">SCHEMA</span> db2inst1;

<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> db2inst1.employees (<span class="hljs-keyword">id</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-keyword">name</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, <span class="hljs-keyword">role</span> <span class="hljs-built_in">varchar</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>, PRIMARY <span class="hljs-keyword">KEY</span> (<span class="hljs-keyword">id</span>));

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> db2inst1.employees (<span class="hljs-keyword">id</span>, <span class="hljs-keyword">name</span>, <span class="hljs-keyword">role</span>) <span class="hljs-keyword">VALUES</span>(<span class="hljs-string">'employee1'</span>,<span class="hljs-string">'employeeName1'</span>, <span class="hljs-string">'employeeRole1'</span>);
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> db2inst1.employees (<span class="hljs-keyword">id</span>, <span class="hljs-keyword">name</span>, <span class="hljs-keyword">role</span>) <span class="hljs-keyword">VALUES</span>(<span class="hljs-string">'employee2'</span>,<span class="hljs-string">'employeeName2'</span>, <span class="hljs-string">'employeeRole2'</span>);

</div></div></code></pre><h3 id="Create-the-Tansformers3"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers3" title="Create-the-Tansformers3"><i class="fa fa-link"></i></a>Create the Tansformers</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.db2.transformers</p>
</div><p>You have to define two different transformers for the management and conversion of both the request and response parameters of the <em>Employee Connector</em>.</p><h4 id="Request-Transformer4"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Transformer4" title="Request-Transformer4"><i class="fa fa-link"></i></a>Request Transformer</h4><p>To create a <em>Request Transformer</em> you have to create a class that implements the <code>IDB2RequestTransformer&lt;INPUT, DTO&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code"><span class="hljs-function">DB2Request&lt;DTO&gt; <span class="hljs-title">transform</span><span class="hljs-params">(INPUT om, Object... args)</span></span>;
</div></div></code></pre><p>The <code>trasform</code> method taks as parameters:</p><ul>
<li><strong>INPUT input</strong>:      the <code>JSON</code> document for the query</li>
<li><strong>Object… args</strong>    zero or more paramenter for the query document</li>
</ul><p>and returns a <code>DB2Request&lt;DTO&gt;</code> instance.</p><p>In the <code>transform</code> method you have to instantiate a <code>DB2Request&lt;&gt;</code> object and populate its fields through the respective setter methods:</p><ul>
<li><code>setQuery(query)</code> with the query string.</li>
<li><code>setRowMapper</code>: with the BeanPropertyRowMapper(Employee.class)); You can use this setter as an alternative to setResultSetExtractor()</li>
<li><code>setResultSetExtractor</code>: you can set a resultSetExtractor as an alternative to setRowMapper(). In this case you have to cast the return type of the that<code>call()</code>  method that is an Object.</li>
<li><code>setType</code> through the enum <code>DB2QueryType</code> (currently it can only be <code>FIND</code> for <em>SELECT</em> queries)</li>
<li><code>setParams</code>all the query params</li>
</ul><p><strong>hint</strong>: you don’t have to define a Class that extends RowMapper, you can just use the BeanPropertyRowMapper(yourEntity.class).</p><h4 id="Response-Transformer4"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Response-Transformer4" title="Response-Transformer4"><i class="fa fa-link"></i></a>Response Transformer</h4><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.db2.transformers</p>
</div><p>To create a <em>Response Transformer</em> you have to create a class that implements the <code>IDB2ResponseTransformer&lt;RESOURCE, OUTPUT&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code"><span class="hljs-function">OUTPUT <span class="hljs-title">transform</span><span class="hljs-params">(DB2Response&lt;RESOURCE&gt; db2Response)</span>
</span></div></div></code></pre><p>The <code>trasform</code> method taks as parameters:</p><ul>
<li><code>DB2Response&lt;RESOURCE&gt;</code> response: the response object</li>
</ul><p>and returns an instance of <code>OUTPUT</code> (usually a List of entities).</p><p>In most of the cases you only have to call the <code>getResult()</code> method of the response object and return its value, as we can see from the following example:</p><h3 id="Use-case-service-example5"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example5" title="Use-case-service-example5"><i class="fa fa-link"></i></a>Use case service example</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].services</p>
</div><p>Let’s create a sample service that will make use of the connector just created.</p><p>Create a class that extends <code>BaseService</code> in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.services</code> package and annotate it with <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Service</code></a>.</p><p>Within this class, create a field for the connector class created above and annotate it as <code>@Autowired</code>; moreover create an <code>@Autowired</code> field for the <code>EmployeeDB2RequestTransformer</code> and one for the <code>EmployeeDB2ResponseTransformer</code> from the previous step.</p><h2 id="Event-Connector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Event-Connector" title="Event-Connector"><i class="fa fa-link"></i></a>Event Connector</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.event</p>
</div><h3 id="Create-the-connector6"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector6" title="Create-the-connector6"><i class="fa fa-link"></i></a>Create the connector</h3><p>This connector handles the basic interaction connection to the events streaming platforms, it abstracts publish and subscription events to accentrate control, configuration and ensure scalability.</p><p>Create a class in the <code>com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.event</code> package, that extends the <code>BaseEventConnector&lt;INPUT, OUTPUT, DTO, RESOURCE&gt;</code>.</p><p>The generic types have the following meaning:</p><ul>
<li><strong>INPUT</strong>:    The Object Model on which the queries will be executed</li>
<li><strong>OUTPUT</strong>:   The output of the query, defined as a List of the Business Model</li>
<li><strong>DTO</strong>:      The DTO for data transferring</li>
<li><strong>RESOURCE</strong>: The output Resource you want to receive.</li>
</ul><div class="alert alert-info">
<p>An example of Event Connector can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/event/MessageEventConnector.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">EventConnectorExample</a></p>
</div><h3 id="Configure-the-connector4"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector4" title="Configure-the-connector4"><i class="fa fa-link"></i></a>Configure the connector</h3><p>To configure the connection to the event-streaming platform through the Event Connector, you have to edit the <code>application.yml</code> file inserting a new item in the <code>connectors.eventConfigurations</code> section; the name of the item must correspond to the name of the class created during the preious step and it must have the following properties:</p><ul>
<li><strong>bootstrapServers</strong>: The kafka connection string (e.g. <code>&lt;server1&gt;:&lt;port1&gt;,&lt;server2&gt;:&lt;port2&gt;</code>)</li>
<li><strong>topic</strong>:            The topic on which the events will be published. The default value of topic is defined in the application.yml, otherwise it can override in the EventRequest with method setTopic().</li>
</ul><div class="alert alert-danger">
<p>Whether a field is in common with multiple connectors, you can put it before the <code>items</code> section, such as to make it valid for all connectors unless it is overwritten in the specific connector section.</p>
</div><p>Here an example:</p><pre><code class="yaml hljs"><span class="hljs-symbol">eventConfigurations:</span>
  <span class="hljs-symbol">items:</span>
    <span class="hljs-symbol">MessageEventConnector:</span>
      <span class="hljs-symbol">topic:</span> test-topic
      <span class="hljs-symbol">bootstrapServers:</span> &lt;IP&gt;<span class="hljs-symbol">:&lt;PORT&gt;</span>
</code></pre><div class="alert alert-info">
<p>An example of Event Connector configuration can be seen at: <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/resources/application.yaml?at=refs%2Fheads%2Fenv%2Fsvil#81-85" target="_blank" rel="noopener">EventConnectorConfiguration</a></p>
</div><h3 id="Create-the-Tansformers4"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers4" title="Create-the-Tansformers4"><i class="fa fa-link"></i></a>Create the Tansformers</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.event.transformers</p>
</div><p>You have to define two different transformers for the management and conversion of both the request and response parameters of the connector.</p><h4 id="Request-Transformer5"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Transformer5" title="Request-Transformer5"><i class="fa fa-link"></i></a>Request Transformer</h4><p>To create a <em>Request Transformer</em> you have to create a class that implements the <code>IEventRequestTransformer&lt;INPUT,DTO&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code"><span class="hljs-function">EventRequest&lt;DTO&gt; <span class="hljs-title">transform</span><span class="hljs-params">(INPUT input, Object... args)</span>
</span></div></div></code></pre><p>The <code>trasform</code> method taks as parameters:</p><ul>
<li>INPUT input:      the <code>JSON</code> document for the query</li>
<li>Object… args    zero or more paramenter for the query document</li>
</ul><p>and returns a <code>EventRequest&lt;DTO&gt;</code> instance.</p><p>In the <code>transform</code> method you have to instantiate a <code>EventRequest&lt;&gt;</code> object and populate its fields through the respective setter methods:</p><ul>
<li>setKey(key)           The (<em>optional</em>) key for the message</li>
<li>setPayload(payload)   The payload of the message to be sent</li>
<li>setHeaders(headers)   The headers of the message or <code>null</code></li>
<li>setTopic(topicName)   The name of the topic on which the events will be published.</li>
</ul><h4 id="Dynamically-set-topic"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Dynamically-set-topic" title="Dynamically-set-topic"><i class="fa fa-link"></i></a>Dynamically set topic</h4><p>The default value of topic is defined in the application.yml, otherwise it can override in the EventRequest with method setTopic().</p><div class="alert alert-info">
<p>An example of Event Request Transformer can be seen at:<br>
<a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/event/trasformers/MessageEventRequestTransformer.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">EventRequestTransformer</a></p>
</div><h4 id="Response-Transformer5"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Response-Transformer5" title="Response-Transformer5"><i class="fa fa-link"></i></a>Response Transformer</h4><p>To create a <em>Response Transformer</em> you have to create a class that implements the <code>IEventResponseTransformer&lt;RESOURCE, OUTPUT&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code"><span class="hljs-function">OUTPUT <span class="hljs-title">transform</span><span class="hljs-params">(EventResponse&lt;RESOURCE&gt; eventResponse)</span>
</span></div></div></code></pre><p>The <code>trasform</code> method taks as parameters:</p><ul>
<li><code>EventResponse&lt;RESOURCE&gt;</code> response: the response object</li>
</ul><p>and returns an instance of <code>OUTPUT</code> (usually a List of entities).</p><p>In most of the cases you only have to call the <code>getResult()</code> method of the response object and return its value, as we can see from the following example:</p><div class="alert alert-info">
<p>An example of Event Response Transformer can be seen at:<br>
<a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/event/trasformers/DummyEventResponseTransformer.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">EventResponseTransformer</a></p>
</div><h3 id="Use-case-service-example6"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example6" title="Use-case-service-example6"><i class="fa fa-link"></i></a>Use case service example</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].services</p>
</div><p>Let’s create a sample service that will make use of the connector just created.</p><p>Create a class that extends <code>BaseService</code> in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.services</code> package and annotate it with <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Service</code></a>.</p><p>Within this class, create a field for the connector class created above and annotate it as <code>@Autowired</code>; moreover create an <code>@Autowired</code> field for the two <code>EventRequestTransofrmer</code> and one for the <code>EventResponseTransformer</code> from the previous step.</p><div class="alert alert-info">
<p>A complete implementation can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/service/MessageEventService.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">EventConnectorService</a></p>
</div><h3 id="Kafka-Endpoints"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Kafka-Endpoints" title="Kafka-Endpoints"><i class="fa fa-link"></i></a>Kafka Endpoints</h3><h4 id="Svil"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Svil" title="Svil"><i class="fa fa-link"></i></a>Svil</h4><p><a href="http://salcls0759.sede.corp.sanpaoloimi.com:6668/" target="_blank" rel="noopener">salcls0759.sede.corp.sanpaoloimi.com:6668</a><br>
<a href="http://salcls0760.sede.corp.sanpaoloimi.com:6668/" target="_blank" rel="noopener">salcls0760.sede.corp.sanpaoloimi.com:6668</a><br>
<a href="http://salcls0761.sede.corp.sanpaoloimi.com:6668/" target="_blank" rel="noopener">salcls0761.sede.corp.sanpaoloimi.com:6668</a></p><p>In order to configure the connection, the port is <code>6667</code> with <code>PLAINTEXT</code> protocol.</p><h4 id="SystemTest"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#SystemTest" title="SystemTest"><i class="fa fa-link"></i></a>SystemTest</h4><p><a href="http://salclt0819.sede.corp.sanpaoloimi.com:6668/" target="_blank" rel="noopener">salclt0819.sede.corp.sanpaoloimi.com:6668</a><br>
<a href="http://salclt0820.sede.corp.sanpaoloimi.com:6668/" target="_blank" rel="noopener">salclt0820.sede.corp.sanpaoloimi.com:6668</a><br>
<a href="http://salclt0826.sede.corp.sanpaoloimi.com:6668/" target="_blank" rel="noopener">salclt0826.sede.corp.sanpaoloimi.com:6668</a><br>
<a href="http://salclt0827.sede.corp.sanpaoloimi.com:6668/" target="_blank" rel="noopener">salclt0827.sede.corp.sanpaoloimi.com:6668</a></p><h3 id="Authorizations"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Authorizations" title="Authorizations"><i class="fa fa-link"></i></a>Authorizations</h3><p>Access to Kafka is protected by Kerberos, so it is necessary to have the technical user<br>
<code>DRH_\&lt;ACRONIMO&gt;_KERB</code> supplied during the preparation of the environments to the application team.</p><p>Example of Event Connector configuration:</p><pre><code class="json hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span></div><div class="code">eventConfigurations:
  items:
    MessageEventConnector:
      topic: bear-arch
      bootstrapServers: ${KAFKA_BROKERS}
      security:
        protocol: ${KAFKA_SECURITY_PROTOCOL}
      sasl:
        kerberos:
          service:
            name: kafka-drh
        jaas:
          config: "com.sun.security.auth.module.Krb5LoginModule required useKeyTab=true keyTab=\"${KEYTAB_DRH_DRHI0_KERB_FILE_PATH}\" principal=\"${KEYTAB_DRH_DRHI0_KERB_USERNAME}@${KEYTAB_DRH_DRHI0_KERB_REALM_DOMAIN}\";"
</div></div></code></pre><h3 id="Naming-Convention"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Naming-Convention" title="Naming-Convention"><i class="fa fa-link"></i></a>Naming Convention</h3><p>The official naming convention for kafka topic is described at: <a href="https://mydocuments.intesasanpaolo.com/sites/CompetenceCenterSDH/_layouts/15/start.aspx#/SitePages/naming%20convention.aspx" target="_blank" rel="noopener">https://mydocuments.intesasanpaolo.com/sites/CompetenceCenterSDH/_layouts/15/start.aspx#/SitePages/naming convention.aspx</a></p><p>Kafka topic names must be composed of alphanumeric characters and the characters <code>-</code> or<code>\ _</code>.</p><p>Max length is 255 characters and the naming convention is:</p><h4 id="DRH"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#DRH" title="DRH"><i class="fa fa-link"></i></a>DRH</h4><p>Kafka Topic name for:</p><ul>
<li>Change Data Capture destination:<br>
DRH_&lt;COD_AMBIENTE&gt;_&lt;ACRON_SOURCE&gt;_&lt;DBSCHEMA&gt;_&lt;TABLE&gt;_CDC</li>
<li>Applicative source (after the architectural gateway, CDC decoupling):<br>
DRH_&lt;COD_AMBIENTE&gt;_&lt;ACRON_SOURCE&gt;_&lt;DBSCHEMA&gt;_&lt;TABLE&gt;_SOURCE</li>
<li>Final target of the application:<br>
DRH_&lt;COD_AMBIENTE&gt;_&lt;ACRON_TARGET&gt;_&lt;REPLICAID&gt;_TARGET</li>
<li>Publishing to other applications:<br>
DRH_&lt;COD_AMBIENTE&gt;_&lt;ACRON_TARGET&gt;_&lt;REPLICAID&gt;_PUB</li>
<li>Final target of the application:<br>
DRH_&lt;COD_AMBIENTE&gt;_&lt;ACRON_TARGET&gt;_EVENTBUS</li>
<li>Final target of the application:<br>
DRH_&lt;COD_AMBIENTE&gt;_&lt;ACRON_TARGET&gt;_ERRORBUS</li>
<li>The internal applicative processing:<br>
DRH_&lt;COD_AMBIENTE&gt;_&lt;ACRON_TARGET&gt;_&lt;REPLICAID&gt;_&lt;NOME&gt;</li>
</ul><p>Where:<br>
&lt;COD_AMBIENTE&gt; = Topic environment ID (SVIL, TEST, PROD)<br>
&lt;DBSCHEMA&gt; = Source DB Schema<br>
&lt;ACRON_SOURCE&gt; = Source DB owner acronym<br>
&lt;ACRON_TARGET&gt; = Replica process owner acronym<br>
&lt;REPLICAID&gt; = Replica Process ID<br>
&lt;NOME&gt; = Arbitrary name</p><h4 id="SDH"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#SDH" title="SDH"><i class="fa fa-link"></i></a>SDH</h4><p>SDH_&lt;COD_AMBIENTE&gt;_&lt;ACRON&gt;_&lt;APPLICAZIONE&gt;_&lt;NOME&gt;</p><p>Where:<br>
&lt;COD_AMBIENTE&gt; = Topic environment ID (SVIL, TEST, PROD)<br>
&lt;ACRON&gt; = Application owner acronym<br>
&lt;APPLICAZIONE&gt; = Application ID<br>
&lt;NOME&gt; = Arbitrary name</p><h3 id="Topic-Kafka-Creation-Request"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Topic-Kafka-Creation-Request" title="Topic-Kafka-Creation-Request"><i class="fa fa-link"></i></a>Topic Kafka Creation Request</h3><p>The creation of the Kafka topic is subject to a request that must be done by mail to the group <a href="mailto:progettazione.drh@intesasanpaolo.com" target="_blank" rel="noopener">progettazione.drh@intesasanpaolo.com</a></p><p>In the email it is necessary to specify the acronym owner of the topic and the following information for each topic to be defined:</p><ul>
<li>Topic name: see the naming convention</li>
<li>Number of partitions (only for non-DRH use cases)</li>
<li>Retention in hours (max 360) (only for non-DRH use cases)</li>
</ul><h2 id="Rest-Connector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Rest-Connector" title="Rest-Connector"><i class="fa fa-link"></i></a>Rest Connector</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.rest</p>
</div><p>It provides a means to efficiently use the REST services that returns data through the definition of a specific request/response model.</p><h3 id="Create-the-connector7"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector7" title="Create-the-connector7"><i class="fa fa-link"></i></a>Create the connector</h3><p>Create a class in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.rest</code> package, that extends <code>com.intesasanpaolo.bear.connector.rest.connector.BaseRestConnector&lt;INPUT, OUTPUT, DTO, RESOURCE&gt;</code>  and annotated with spring <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Service</code></a> annotation.</p><p>The generic types have the following meaning:</p><ul>
<li><strong>INPUT</strong>:    The input for the request, it will translated in <strong>DTO</strong> by transformers;</li>
<li><strong>OUTPUT</strong>:   The expected object model type</li>
<li><strong>DTO</strong>:      The DTO for data transferring</li>
<li><strong>RESOURCE</strong>: The remote Resource expected in response, this will translated in <strong>OUTPUT</strong> type object by transformer</li>
</ul><p>An example of Rest Connector can be seen in showcase class <code>com.intesasanpaolo.bear.service.connector.rest.ExternalUserRestConnector</code></p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExternalUserRestConnector</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseRestConnector</span>&lt;<span class="hljs-title">Void</span>, <span class="hljs-title">ExternalUser</span>, <span class="hljs-title">Void</span>, <span class="hljs-title">ExternalUser</span>&gt;</span>{ }
</div></div></code></pre><h3 id="Configure-the-connector5"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector5" title="Configure-the-connector5"><i class="fa fa-link"></i></a>Configure the connector</h3><p>To configure the Rest Connector, you have to edit the <code>application.yml</code> file inserting a new item in the <code>connectors.restConfigurations.items</code> section; the name of the item must correspond to the name of the class created during the preious step and it must have the following properties:</p><ul>
<li><strong>url</strong>: The remote rest endpoint url, for example <code>https://petstore.swagger.io/v2/user/{username}</code>. It is very important to specify the complete url of remote endpoint <em><strong>with all the URI parameters</strong></em> (<em><strong>NOT query parameters</strong></em>). In this example we have a single parmeter called <code>{username}</code>   (required)</li>
<li><strong>timeout</strong>: The connection timeout in ms (ConnectTimeout and ReadTimeout)</li>
<li><strong>mocked</strong>: If set to true the connector is mocked and remote server never invoked (<strong>optional, default: false</strong>)</li>
<li><strong>randomMock</strong>: If set to false, the mock will follow wiremock request matching, checking the rules against all files specified in files property (<strong>optional, default: true</strong>)</li>
<li><strong>path</strong>: the path of mock files stub (<strong>optional, default: classpath:mocks/</strong>)</li>
<li><strong>files</strong>: A list of json stub file, this files represents various possible random response (<strong>optional</strong> if no files are specified all files in <code>&lt;path&gt;</code> folder are loaded)</li>
</ul><div class="alert alert-danger">
<p>Whether a field is in common with multiple connectors, you can put it before the <code>items</code> section, such as to make it valid for all connectors unless it is overwritten in the specific connector section.</p>
</div><p>Example of Rest Connector configuration, in this example we configure 2 connectors the first is mocked and the second is real</p><pre><code class="json hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span></div><div class="code">restConfigurations:
  items:
    BitCoinRestConnector:
      url: https://api.blockchain.info/stats
      timeout: 5000
      mocked: true
      randomMock: false
      path: bitCoinMocks/
      files:
        - BitCoinBTC.json
        - BitCoinETH.json
    ExternalUserRestConnector
      url: https://petstore.swagger.io/v2/user/{username}
</div></div></code></pre><h4 id="Mock-the-connector6"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mock-the-connector6" title="Mock-the-connector6"><i class="fa fa-link"></i></a>Mock the connector</h4><p>As seen Rest Connector can be mocked specifing this parameter in <code>application.yml</code>, here in detail the parameter to set to mock the connector</p><ul>
<li>
<p><strong>mocked</strong>: If set to true the connector is mocked and remote server never invoked, if set to false or not specified the following setting are ignored</p>
</li>
<li>
<p><strong>randomMock</strong>: If set to false, instead of one random file, the mock server will load all the specified files</p>
</li>
<li>
<p><strong>path</strong>: the path of mock files stub</p>
<ul>
<li>if path not specified default path is <code>classpath:mocks/</code></li>
<li>if simple path is specified this path is relative to <code>classpath:mocks/</code>, for example path <code>bitCoinMocks/</code> results <code>classpath:mocks/bitCoinMocks/</code></li>
<li>you can also set direcly a full classpath location, ex. <code>classpath:mocks/bitCoinMocks/</code></li>
<li>or set a path relative application jar file, ex. <code>file:bitCoinMocks/</code></li>
<li>or set an absolut path, ex. <code>file:D:\mocks\bitCoinMocks\</code></li>
</ul>
</li>
<li>
<p><strong>files</strong>: A list of json stub file, this files represents various possible random response, if no files are specified all files in <code>&lt;path&gt;</code> folder are loaded, this file must conform to wiremock specification (<a href="http://wiremock.org/docs/stubbing/" target="_blank" rel="noopener">http://wiremock.org/docs/stubbing/</a>)</p>
</li>
</ul><p>Here an example of wiremock stub for a GET call, in this case there is a query param specified in the url field of the request object, this means that this file will be given back only if the url will match.<br>
The base url (not specified in the file) is the one configured in the <strong>url</strong> property.</p><pre><code class="json hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span>
<span data-linenumber="22"></span>
<span data-linenumber="23"></span>
<span data-linenumber="24"></span>
<span data-linenumber="25"></span>
<span data-linenumber="26"></span>
<span data-linenumber="27"></span>
<span data-linenumber="28"></span>
<span data-linenumber="29"></span>
<span data-linenumber="30"></span>
<span data-linenumber="31"></span>
<span data-linenumber="32"></span>
<span data-linenumber="33"></span>
<span data-linenumber="34"></span>
<span data-linenumber="35"></span></div><div class="code">{
  <span class="hljs-attr">"request"</span>: {
    <span class="hljs-attr">"method"</span>: <span class="hljs-string">"GET"</span>,
    <span class="hljs-attr">"url"</span>: <span class="hljs-string">"?currency_id=BTC"</span>
  },
  <span class="hljs-attr">"response"</span>: {
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"200"</span>,
    <span class="hljs-attr">"jsonBody"</span>: {
      <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">2222222</span>,
      <span class="hljs-attr">"market_price_usd"</span>: <span class="hljs-number">8145.46</span>,
      <span class="hljs-attr">"hash_rate"</span>: <span class="hljs-number">3.84472576653462E10</span>,
      <span class="hljs-attr">"total_fees_btc"</span>: <span class="hljs-number">2096240340</span>,
      <span class="hljs-attr">"n_btc_mined"</span>: <span class="hljs-number">162500000000</span>,
      <span class="hljs-attr">"n_tx"</span>: <span class="hljs-number">201655</span>,
      <span class="hljs-attr">"n_blocks_mined"</span>: <span class="hljs-number">130111</span>,
      <span class="hljs-attr">"minutes_between_blocks"</span>: <span class="hljs-number">10.5426</span>,
      <span class="hljs-attr">"totalbc"</span>: <span class="hljs-number">1718012500000000</span>,
      <span class="hljs-attr">"n_blocks_total"</span>: <span class="hljs-number">534410</span>,
      <span class="hljs-attr">"estimated_transaction_volume_usd"</span>: <span class="hljs-number">6.663526202818806E8</span>,
      <span class="hljs-attr">"blocks_size"</span>: <span class="hljs-number">107320114</span>,
      <span class="hljs-attr">"miners_revenue_usd"</span>: <span class="hljs-number">1.3407120918398565E7</span>,
      <span class="hljs-attr">"nextretarget"</span>: <span class="hljs-number">536255</span>,
      <span class="hljs-attr">"difficulty"</span>: <span class="hljs-number">5949437371609</span>,
      <span class="hljs-attr">"estimated_btc_sent"</span>: <span class="hljs-number">8180662851231</span>,
      <span class="hljs-attr">"miners_revenue_btc"</span>: <span class="hljs-number">1645</span>,
      <span class="hljs-attr">"total_btc_sent"</span>: <span class="hljs-number">76955419334229</span>,
      <span class="hljs-attr">"trade_volume_btc"</span>: <span class="hljs-number">39493.93</span>,
      <span class="hljs-attr">"trade_volume_usd"</span>: <span class="hljs-number">3.216962270578E8</span>
    },
    <span class="hljs-attr">"headers"</span>: {
      <span class="hljs-attr">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
      <span class="hljs-attr">"Bear-ID"</span>: <span class="hljs-string">"11111-2222-44444"</span>
    }
  }
}
</div></div></code></pre><p>Here another mock stub example with method POST, no <em>response body</em> and and error response status. Optionally you can check the request body, in the example we check the presence of json attribute <em>id</em> and <em>firstname</em> Depending on you expecation you could have also a POST with a <em>jsonBody</em> or a response with a error <em>status</em> with the <em>jsonBody</em>.</p><pre><code class="json hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span></div><div class="code">{
  <span class="hljs-attr">"request"</span>: {
  <span class="hljs-attr">"method"</span>: <span class="hljs-string">"POST"</span>,
  <span class="hljs-attr">"url"</span>: <span class="hljs-string">""</span>,
  <span class="hljs-attr">"bodyPatterns"</span> : [
      {<span class="hljs-attr">"matchesJsonPath"</span> : <span class="hljs-string">"$.id"</span>},
      {<span class="hljs-attr">"matchesJsonPath"</span> : <span class="hljs-string">"$.firstName"</span>}
    ]
  },
  <span class="hljs-attr">"response"</span>: {
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"409"</span>,
    <span class="hljs-attr">"headers"</span>: {
      <span class="hljs-attr">"Content-Type"</span>: <span class="hljs-string">"application/json"</span>,
      <span class="hljs-attr">"Bear-ID"</span>: <span class="hljs-string">"3333-55555-77777"</span>
    }
  }
}
</div></div></code></pre><p>You can find more resources at this link:</p><ul>
<li><a href="http://wiremock.org/docs/stubbing/" target="_blank" rel="noopener">http://wiremock.org/docs/stubbing/</a></li>
<li><a href="http://wiremock.org/docs/request-matching/" target="_blank" rel="noopener">http://wiremock.org/docs/request-matching/</a></li>
</ul><h3 id="Create-the-Tansformers5"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers5" title="Create-the-Tansformers5"><i class="fa fa-link"></i></a>Create the Tansformers</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.rest.transformers</p>
</div><p>You have to define two different transformers for the management and conversion of both the request and response parameters of the <em>Rest Connector</em>.</p><h4 id="Request-Transformer6"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Transformer6" title="Request-Transformer6"><i class="fa fa-link"></i></a>Request Transformer</h4><p>To create a Request Transformer you have to create in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.rest.transformers</code> package a spring @Service class that implements the <code>IRestRequestTransformer&lt;INPUT, DTO&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code"><span class="hljs-function">RestConnectorRequest&lt;DTO&gt; <span class="hljs-title">transform</span><span class="hljs-params">(INPUT input, Object... args)</span>
</span></div></div></code></pre><p>The trasform method takes as parameters:</p><ul>
<li><strong>INPUT input</strong>: The input for the request, this is the body of rest request. In case of a GET call is not needed and can be set as Void java class</li>
<li><strong>Object… args</strong> zero or more paramenter for the rest url parameter, for example for mapping this url <code>https://petstore.swagger.io/v2/user/{username}</code> we need to pass one args ojbect of type String that rapresent the <code>{username}</code></li>
</ul><p>In the transform method you have to instantiate a RestConnectorRequest&lt;&gt; object and populate its fields through the respective setter methods.<br>
In following example we work on a rest GET request with no payload the <em>INPUT</em> and <em>DTO</em> are <em>Void</em>.</p><p>Then you must define:</p><ul>
<li>the rest connector request as <code>RestConnectorRequest&lt;Void&gt;</code> (line 6)</li>
<li>the http method in this case <code>HttpMethod.GET</code> (line 8),</li>
<li>add some custome http header if needed (line 10)</li>
<li>set to the request body in this example there is no payload so set to null (line 11)</li>
<li>add request url params from args (line 14-16)</li>
</ul><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExtenalUserRestRequestTransformer</span>&lt;<span class="hljs-title">Void</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title">IRestRequestTransformer</span>&lt;<span class="hljs-title">Void</span>,<span class="hljs-title">Void</span>&gt; </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> RestConnectorRequest&lt;Void&gt; <span class="hljs-title">transform</span><span class="hljs-params">(Void voidParam , Object... args)</span></span>{
        RestConnectorRequest&lt;Void&gt; restConnectorRequest = <span class="hljs-keyword">new</span> RestConnectorRequest&lt;&gt;();
        <span class="hljs-comment">//this is the HTTP method of the rest request</span>
        restConnectorRequest.setMethod(HttpMethod.GET);
        <span class="hljs-comment">//eventually you can add some HTTP header</span>
        restConnectorRequest.addHeader(<span class="hljs-string">"Authorization"</span>,<span class="hljs-string">"testAuthorization"</span>);
        <span class="hljs-comment">//in case of GET request body is null otherwise set here INPUT input parameter of this method</span>
        restConnectorRequest.setRequest(<span class="hljs-keyword">null</span>);
        <span class="hljs-comment">//here set url parameters</span>
        <span class="hljs-keyword">if</span>(args!=<span class="hljs-keyword">null</span> &amp;&amp; args.length&gt;<span class="hljs-number">0</span>){
            restConnectorRequest.addParams(<span class="hljs-string">"username"</span>, (String)args[<span class="hljs-number">0</span>]);
        }
        <span class="hljs-keyword">return</span> restConnectorRequest;
    }
}
</div></div></code></pre><p>In following example we work on a POST request with a payload that is an ExternalUser objebt, so in this case the <em>INPUT</em> and <em>DTO</em> are ExternalUser.</p><p>Then you must define:</p><ul>
<li>the rest connecto request as <code>RestConnectorRequest&lt;ExternalUser&gt;</code> (line 6)</li>
<li>the http method in this case <code>HttpMethod.POST</code> (line 7),</li>
<li>add some custom http header if needed (line 8)</li>
<li>set  the request body (line 9)</li>
<li>in this case non url paramente are present</li>
</ul><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CreateExtenalUserRestRequestTransformer</span>&lt;<span class="hljs-title">ExternalUser</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title">IRestRequestTransformer</span>&lt;<span class="hljs-title">ExternalUser</span>,<span class="hljs-title">ExternalUser</span>&gt; </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> RestConnectorRequest&lt;ExternalUser&gt; <span class="hljs-title">transform</span><span class="hljs-params">(ExternalUser extUser , Object... args)</span></span>{
        RestConnectorRequest&lt;ExternalUser&gt; restConnectorRequest = <span class="hljs-keyword">new</span> RestConnectorRequest&lt;&gt;();
        restConnectorRequest.setMethod(HttpMethod.POST);
        restConnectorRequest.addHeader(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"testAuthorization"</span>);
        restConnectorRequest.setRequest(extUser);

        <span class="hljs-keyword">return</span> restConnectorRequest;
    }
</div></div></code></pre><h4 id="Response-Transformer6"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Response-Transformer6" title="Response-Transformer6"><i class="fa fa-link"></i></a>Response Transformer</h4><p>To create a <em>Response Transformer</em> you have to create in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.rest.transformers</code> package a spring @Service class that implements the <code>IRestResponseTransformer&lt;RESOURCE, OUTPUT&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code"><span class="hljs-function">OUTPUT <span class="hljs-title">transform</span><span class="hljs-params">(RestConnectorResponse&lt;RESOURCE&gt; restConnectorResponse)</span></span>;
</div></div></code></pre><p>The <code>trasform</code> method takes as parameters:</p><ul>
<li><code>RestConnectorResponse&lt;RESOURCE&gt;</code> restConnectorResponse: the response object</li>
</ul><p>and returns an instance of <code>OUTPUT</code></p><p>In most of the cases you only have to call the <code>getBody()</code> method of the response object and return its value, as we can see from the following example:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExternalUserRestResponseTransformer</span>&lt;<span class="hljs-title">ExternalUser</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title">IRestResponseTransformer</span>&lt;<span class="hljs-title">ExternalUser</span>,<span class="hljs-title">ExternalUser</span>&gt; </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ExternalUser <span class="hljs-title">transform</span><span class="hljs-params">(RestConnectorResponse&lt;ExternalUser&gt; response)</span></span>{
        <span class="hljs-keyword">return</span> response.getResponse().getBody();
    }

}
</div></div></code></pre><h3 id="Use-case-service-example7"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example7" title="Use-case-service-example7"><i class="fa fa-link"></i></a>Use case service example</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].services</p>
</div><p>Let’s create a sample service that will make use of the connector just created.</p><p>Create a class that extends BaseService in the <code>com.intesasanpaolo.bear.[ACRONYM].[PROJECT].services</code> package and annotate it with <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Service</code></a>.</p><p>Within this class, create a field for the Rest connector class created above and annotate it as <code>@Autowired</code>;<br>
moreover create an <code>@Autowired</code> field for the Rest Request Transofrmer and one for the Rest Response Transformer from the previous step.</p><p>In this service you have to implement your business method (in the following example <code>public ExternalUser getExternalUser(String username)</code>) and inside this method invoke the <strong>call</strong> method of your Rest Connector.</p><p>Call method get in input:</p><ul>
<li><strong>INPUT input</strong>: an input object model that is the body of the rest request,</li>
<li><strong>IRestRequestTransformer&lt;INPUT,DTO&gt; requestTransformer</strong>: the request transformer autowired in the service</li>
<li><strong>IRestResponseTransformer&lt;RESOURCE,OUTPUT&gt; responseTransformer</strong>: the response transformer autowired in the service</li>
<li><strong>Object… args</strong>: zero or more parameter mapped to urls parameter as previously defined in request tranformer</li>
</ul><p>Returns an object instance of <code>OUTPUT</code> tha is the respose of the rest call trasformed as defined in responseTransformer.</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> OUTPUT <span class="hljs-title">call</span><span class="hljs-params">(INPUT input, IRestRequestTransformer&lt;INPUT,DTO&gt; requestTransformer, IRestResponseTransformer&lt;RESOURCE,OUTPUT&gt; responseTransformer, Object... args)</span> </span>{
</div></div></code></pre><p>In our example we call <code>externalUserRestConnector.call</code> passing:</p><ul>
<li><code>INPUT</code> input: null because is a GET call with no payload</li>
<li><code>IRestRequestTransformer&lt;INPUT,DTO&gt;</code> requestTransformer: the trasformer of type <code>ExtenalUserRestRequestTransformer&lt;Void&gt;</code> defined before</li>
<li><code>IRestResponseTransformer&lt;RESOURCE,OUTPUT&gt;</code> responseTransformer: the transformer of type <code>ExternalUserRestResponseTransformer&lt;ExternalUser&gt;</code> defined before</li>
<li><code>Object...</code> args: a single String parameter that in our case will be mapped on the {username} placeholder of  the url as previously defined in transform method of externalUserRestRequestTransformer (<code>https://petstore.swagger.io/v2/user/{username}</code>)</li>
</ul><p>And return an ExternalUser object that in our case is simply the boby of the rest response as translated in transform of externalUserRestResponseTransformer</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code">externalUserRestConnector.call(<span class="hljs-keyword">null</span>, externalUserRestRequestTransformer, externalUserRestResponseTransformer, username);
</div></div></code></pre><div class="alert alert-info">
<p>A complete implementation can be seen in <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/service/ExternalUserService.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">this example</a></p>
</div><h2 id="BEAR-Internal-Connector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#BEAR-Internal-Connector" title="BEAR-Internal-Connector"><i class="fa fa-link"></i></a>BEAR Internal Connector</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.internal</p>
</div><p>It is responsible of communication among Bear services.<br>
It simplifies and encapsulates complexity to manage requests to other Bear Services.</p><p>Using this component few coding is needed, developers only have to:</p><ul>
<li>extends base class BearInternalConnector&lt;INPUT, OUTPUT, DTO, RESOURCE&gt;</li>
<li>configures properly their connectors in application.yml file</li>
<li>provides  transformers object to translate object between different service</li>
</ul><div class="alert alert-info">
<p>NOTE:<br>
in this release BearInternalConnector support rest service connection, further implementation could be possible in future</p>
</div><h3 id="Create-the-connector8"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector8" title="Create-the-connector8"><i class="fa fa-link"></i></a>Create the connector</h3><p>Create a class in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.internal</code> package, that extends <code>com.intesasanpaolo.bear.connector.rest.connector.BearInternalConnector&lt;INPUT, OUTPUT, DTO, RESOURCE&gt;</code> and annotated with spring <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Service</code></a> annotation</p><p>The generic types have the following meaning:</p><ul>
<li><strong>INPUT</strong>:    The input for the request, it will translated in <strong>DTO</strong> by transformers;</li>
<li><strong>OUTPUT</strong>:   The expected object model type</li>
<li><strong>DTO</strong>:      The DTO for data transferring</li>
<li><strong>RESOURCE</strong>: The remote Resource expected in response, this will translated in <strong>OUTPUT</strong> type object by transformer</li>
</ul><p>An example of Rest Connector can be seen in showcase class <code>com.intesasanpaolo.bear.service.connector.internal.InternalBitCoinConnector</code></p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InternalBitCoinConnector</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BearInternalConnector</span>&lt;<span class="hljs-title">Void</span>, <span class="hljs-title">BitCoin</span>, <span class="hljs-title">Void</span>, <span class="hljs-title">BitCoin</span>&gt; </span>{}
</div></div></code></pre><h3 id="Configure-the-connector6"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector6" title="Configure-the-connector6"><i class="fa fa-link"></i></a>Configure the connector</h3><p>To configure the Intrenal Connector, you have to edit the <code>application.yml</code> file inserting a new item in the <code>connectors.bearInternalConfigurations.items</code> section; the name of the item must correspond to the name of the class created during the preious step and it must have the following properties:</p><ul>
<li><strong>url</strong>: The remote rest endpoint url for example <code>https://petstore.swagger.io/v2/user/{username}</code> is very important to specify the complete url of remote endpoint with all the url-parameter, in this example we have one parmeter called {username}   (<strong>required</strong>)</li>
<li><strong>timeout</strong>: The connection timeout in ms (ConnectTimeout and ReadTimeout)</li>
<li><strong>mocked</strong>: If set to true the connector is mocked and remote server never invoked (<strong>optional, default: false</strong>)</li>
<li><strong>path</strong>: the path of mock files stub (<strong>optional, default: classpath:mocks/</strong>)</li>
<li><strong>files</strong>: A list of json stub file, this files represents various possible random response (<strong>optional</strong> if no files are specified all files in <code>&lt;path&gt;</code> folder are loaded)</li>
</ul><div class="alert alert-danger">
<p>Whether a field is in common with multiple connectors, you can put it before the <code>items</code> section, such as to make it valid for all connectors unless it is overwritten in the specific connector section.</p>
</div><p>NOTE: the configuration parameters are equals to rest connector configuration<br>
Here an example of Rest Connector configuration</p><pre><code class="json hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span></div><div class="code">bearInternalConfigurations:
  items:
    InternalBitCoinConnector:
      url: https://api.blockchain.info/stats
      timeout: 5000
      mocked: false
      path: bitCoinMocks/
      files:
        - BitCoinStub.json
        - BitCoinStub1.json
        - BitCoinStubErr.json
</div></div></code></pre><h4 id="Mock-the-connector7"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mock-the-connector7" title="Mock-the-connector7"><i class="fa fa-link"></i></a>Mock the connector</h4><p>As seen Internal Connector can be mocked specifing this parameter in <code>application.yml</code>, note that this parameters have the same meaning and behaviour of Rest Connector mock parameters.</p><p>Here in detail the parameter to set to mock the connector</p><ul>
<li>
<p><strong>mocked</strong>: If set to true the connector is mocked and remote server never invoked, if set to false or not specified the following setting are ignored</p>
</li>
<li>
<p><strong>path</strong>: the path of mock files stub</p>
<ul>
<li>if path not specified default path is <code>classpath:mocks/</code></li>
<li>if simple path is specified this path is relative to <code>classpath:mocks/</code>, for example path <code>bitCoinMocks/</code> results <code>classpath:mocks/bitCoinMocks/</code></li>
<li>you can also set direcly a full classpath location, ex. <code>classpath:mocks/bitCoinMocks/</code></li>
<li>or set a path relative application jar file, ex. <code>file:bitCoinMocks/</code></li>
<li>or set an absolut path, ex. <code>file:D:\dev\workspace\bearreply\bear-arch\nuovaarchitettura-digitale-showcase\bitCoinMocks\</code></li>
</ul>
</li>
<li>
<p><strong>files</strong>: A list of json stub file, this files represents various possible random response, if no files are specified all files in <code>&lt;path&gt;</code> folder are loaded, this file must conform to wiremock specification (<a href="http://wiremock.org/docs/stubbing/" target="_blank" rel="noopener">http://wiremock.org/docs/stubbing/</a>)</p>
</li>
</ul><h3 id="Create-the-Tansformers6"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers6" title="Create-the-Tansformers6"><i class="fa fa-link"></i></a>Create the Tansformers</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.internal.transformers</p>
</div><p>You have to define two different transformers for the management and conversion of both the request and response parameters of the <em>Internal Connector</em>.</p><h4 id="Request-Transformer7"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Transformer7" title="Request-Transformer7"><i class="fa fa-link"></i></a>Request Transformer</h4><p>To create a Request Transformer you have to create in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.internal.transformers</code> package a spring @Service class that implements the <code>IRestRequestTransformer&lt;INPUT, DTO&gt;</code> interface. Hence you must override the transform method:</p><pre><code class="java hljs"><span class="hljs-function">RestConnectorRequest&lt;DTO&gt; <span class="hljs-title">transform</span><span class="hljs-params">(INPUT input, Object... args)</span>
</span></code></pre><p>The trasform method takes as parameters:</p><ul>
<li><strong>INPUT input</strong>: The input for the request, this is the body of rest request. In case of a GET call is not needed and can be set as Void java class</li>
<li><strong>Object… args</strong> zero or more paramenter for the rest url parameter, for example in for a connector mapping this url <code>https://petstore.swagger.io/v2/user/{username}</code> we need to pass one args ojbect of type String that rapresent the <code>{username}</code></li>
</ul><p>In the transform method you have to instantiate a RestConnectorRequest&lt;&gt; object and populate its fields through the respective setter methods.<br>
In detail RestConnectorRequest expose this method to populate the fiel:</p><ul>
<li><code>setMethod(HttpMethod method)</code> to set the http method of the request (ex. GET, POST, PATCH)</li>
<li><code>setRequest(INPUT request)</code> to set the request body object</li>
<li><code>addHeader(String key, String value)</code> to add http header item, you need to add a pair key-value for example <code>restConnectorRequest.addHeader("Authorization","testAuthorization");</code></li>
<li><code>addParams(String key, String value)</code> to add url params, you need to add a pair key-value for example <code>restConnectorRequest.addParams("username", "my.username");</code></li>
</ul><div class="alert alert-info">
<p>An implementation can be seen in <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/internal/transformers/InternalBitCoinRestRequestTransformer.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">this example</a></p>
</div><h4 id="Response-Transformer7"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Response-Transformer7" title="Response-Transformer7"><i class="fa fa-link"></i></a>Response Transformer</h4><p>To create a <em>Response Transformer</em> you have to create in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.internal.transformers</code> package a spring @Service class that implements the <code>IRestResponseTransformer&lt;RESOURCE, OUTPUT&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><span class="hljs-function">OUTPUT <span class="hljs-title">transform</span><span class="hljs-params">(RestConnectorResponse&lt;RESOURCE&gt; restConnectorResponse)</span></span>;
</code></pre><p>The <code>trasform</code> method takes as parameters:</p><ul>
<li><code>RestConnectorResponse&lt;RESOURCE&gt;</code> restConnectorResponse: the response object</li>
</ul><p>and returns an instance of <code>OUTPUT</code></p><p>In most of the cases you only have to call the <code>getBody()</code> method of the response object and return its value, as we can see from the following example:</p><pre><code class="java hljs"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExternalUserRestResponseTransformer</span>&lt;<span class="hljs-title">ExternalUser</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title">IRestResponseTransformer</span>&lt;<span class="hljs-title">ExternalUser</span>,<span class="hljs-title">ExternalUser</span>&gt; </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ExternalUser <span class="hljs-title">transform</span><span class="hljs-params">(RestConnectorResponse&lt;ExternalUser&gt; response)</span></span>{
        <span class="hljs-keyword">return</span> response.getResponse().getBody();
    }

}
</code></pre><h3 id="Use-case-service-example8"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example8" title="Use-case-service-example8"><i class="fa fa-link"></i></a>Use case service example</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].services</p>
</div><p>Let’s create a sample service that will make use of the connector just created.</p><p>Create a class that extends BaseService in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.services</code> package and annotate it as service spring bean adding <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Service</code></a>.</p><p>Within this class, create a field for the Internal Connector class created above and annotate it as <code>@Autowired</code>; moreover create an <code>@Autowired</code> field for the Rest Request Transofrmer and one for the Rest Response Transformer from the previous step.</p><p>In this service you have to implement your business method (in the following example <code>public BitCoin getCoreBitCoinStats()</code>) and inside this method invoke the <strong>call</strong> method of your Internal Connector.</p><p>Call method get in input</p><ul>
<li><strong>INPUT input</strong>: an input object model that is the body of the rest request</li>
<li><strong>IRestRequestTransformer&lt;INPUT,DTO&gt; requestTransformer</strong>: the request transformer autowired in the service</li>
<li><strong>IRestResponseTransformer&lt;RESOURCE,OUTPUT&gt; responseTransformer</strong>: the response transformer autowired in the service</li>
<li><strong>Object… args</strong>: zero or more parameter mapped to urls parameter as previously defined in request tranformer</li>
</ul><p>Returns an object instance of OUTPUT tha is the respose of the rest call trasformed as defined in responseTransformer.</p><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> OUTPUT <span class="hljs-title">call</span><span class="hljs-params">(INPUT input, IRestRequestTransformer&lt;INPUT,DTO&gt; requestTransformer, IRestResponseTransformer&lt;RESOURCE,OUTPUT&gt; responseTransformer, Object... args)</span> </span>{
</code></pre><p>In our example we call <code>internalBitCoinConnector.call</code> passing:</p><ul>
<li><strong>INPUT input</strong>: null because is a GET call</li>
<li><strong><code>IRestRequestTransformer&lt;INPUT,DTO&gt; bitCoinRestRequestTransformer</code></strong>: the trasformer of type <code>InternalBitCoinRestRequestTransformer&lt;Void&gt;</code> defined before</li>
<li><strong><code>IRestResponseTransformer&lt;RESOURCE,OUTPUT&gt; bitCoinRestResponseTransformer</code></strong>: the transformer of type `InternalBitCoinRestResponseTransformer&lt;BitCoin&gt;`` defined before</li>
<li><strong>Object… args</strong>: in this case nothing, the remote  endpoint <a href="https://api.blockchain.info/stats" target="_blank" rel="noopener">https://api.blockchain.info/stats</a> have no params</li>
</ul><p>And return an <code>BitCoin</code> object that in our case is simply the boby of the rest response as translated in transform of bitCoinRestResponseTransformer</p><pre><code class="java hljs">internalBitCoinConnector.call(<span class="hljs-keyword">null</span>, bitCoinRestRequestTransformer, bitCoinRestResponseTransformer);
</code></pre><div class="alert alert-info">
<p>A complete implementation can be seen in <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/service/InternalBitCoinService.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">this example</a></p>
</div><h2 id="BEAR-BearCore-Connector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#BEAR-BearCore-Connector" title="BEAR-BearCore-Connector"><i class="fa fa-link"></i></a>BEAR BearCore Connector</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.bearcore</p>
</div><p>It allows you to call from a non-secured service to a secure service through api-gateway.</p><p>Using this component few coding is needed, developers only have to:</p><ul>
<li>extends base class BearCoreConnector&lt;INPUT, OUTPUT, DTO, RESOURCE&gt;</li>
<li>configures properly their connectors in application.yml file</li>
<li>provides  transformers object to translate object between different service</li>
</ul><div class="alert alert-info">
<p>NOTE:<br>
in this release BearCoreConnector support rest service connection, further implementation could be possible in future</p>
</div><h3 id="Create-the-connector9"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector9" title="Create-the-connector9"><i class="fa fa-link"></i></a>Create the connector</h3><p>Create a class in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.bearcore</code> package, that extends <code>com.intesasanpaolo.bear.connector.bearcore.BearCoreConnector&lt;INPUT, OUTPUT, DTO, RESOURCE&gt;</code> and annotated with spring <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Service</code></a> annotation</p><p>The generic types have the following meaning:</p><ul>
<li><strong>INPUT</strong>:    The input for the request, it will translated in <strong>DTO</strong> by transformers;</li>
<li><strong>OUTPUT</strong>:   The expected object model type</li>
<li><strong>DTO</strong>:      The DTO for data transferring</li>
<li><strong>RESOURCE</strong>: The remote Resource expected in response, this will translated in <strong>OUTPUT</strong> type object by transformer</li>
</ul><p>An example of BearCore Connector can be seen in showcase class <code>com.intesasanpaolo.bear.service.connector.rest.NotificationDashboardConnector</code></p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NotificationDashboardConnector</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BearCoreConnector</span>&lt;<span class="hljs-title">String</span>, <span class="hljs-title">Object</span>, <span class="hljs-title">Void</span>, <span class="hljs-title">Object</span>&gt; </span>{}
</div></div></code></pre><h3 id="Configure-the-connector7"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector7" title="Configure-the-connector7"><i class="fa fa-link"></i></a>Configure the connector</h3><p>To configure the BearCore Connector, you have to edit the <code>application.yml</code> file inserting a new item in the <code>connectors.bearCoreConfigurations.items</code> section; the name of the item must correspond to the name of the class created during the previous step and it must have the following properties:</p><ul>
<li><strong>url</strong>: The remote rest endpoint url for example <code>https://my.service.url/endpoint/{id}</code> is very important to specify the complete url of remote endpoint with all the url-parameter, in this example we have one parmeter called {dashboardId}   (<strong>required</strong>)</li>
<li><strong>oauthUrl</strong>: url api-gateway from which to retrieve the token</li>
<li><strong>clientId</strong>: client-id of api-gateway</li>
<li><strong>clientSecret</strong>: client-secret of api-gateway</li>
<li><strong>scope</strong>: scope of api-gateway</li>
</ul><div class="alert alert-danger">
<p>Whether a field is in common with multiple connectors, you can put it before the <code>items</code> section, such as to make it valid for all connectors unless it is overwritten in the specific connector section.</p>
</div><p>Here an example of BearCore Connector configuration</p><pre><code class="json hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span></div><div class="code">bearCoreConfigurations:
  items:
    NotificationDashboardConnector:
    url: https://my.service.url/endpoint/{id}
    oauthUrl: ${CORE_OAUTH_URL}
    clientId: ${CORE_OAUTH_CLIENT_ID}
    clientSecret: ${CORE_OAUTH_CLIENT_SECRET}
    scope: ${CORE_OAUTH_SCOPE}
</div></div></code></pre><h3 id="Create-the-Tansformers7"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers7" title="Create-the-Tansformers7"><i class="fa fa-link"></i></a>Create the Tansformers</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.rest.transformers</p>
</div><p>You have to define two different transformers for the management and conversion of both the request and response parameters of the <em>Internal Connector</em>.</p><h4 id="Request-Transformer8"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Transformer8" title="Request-Transformer8"><i class="fa fa-link"></i></a>Request Transformer</h4><p>To create a Request Transformer you have to create in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.rest.transformers</code> package a spring @Service class that implements the <code>IRestRequestTransformer&lt;INPUT, DTO&gt;</code> interface. Hence you must override the transform method:</p><pre><code class="java hljs"><span class="hljs-function">RestConnectorRequest&lt;DTO&gt; <span class="hljs-title">transform</span><span class="hljs-params">(INPUT input, Object... args)</span>
</span></code></pre><p>The trasform method takes as parameters:</p><ul>
<li><strong>INPUT input</strong>: The input for the request, this is the body of rest request. In case of a GET call is not needed and can be set as Void java class</li>
<li><strong>Object… args</strong> zero or more paramenter for the rest url parameter, for example in for a connector mapping this url <code>https://my.service.url/endpoint/{id}</code> we need to pass one args ojbect of type String that rapresent the <code>{id}</code></li>
</ul><p>In the transform method you have to instantiate a RestConnectorRequest&lt;&gt; object and populate its fields through the respective setter methods.<br>
In detail RestConnectorRequest expose this method to populate the field:</p><ul>
<li><code>setMethod(HttpMethod method)</code> to set the http method of the request (ex. GET, POST, PATCH)</li>
<li><code>setRequest(INPUT request)</code> to set the request body object</li>
<li><code>addHeader(String key, String value)</code> to add http header item, you need to add a pair key-value for example <code>restConnectorRequest.addHeader("myHeader","myValue");</code></li>
<li><code>addParams(String key, String value)</code> to add url params, you need to add a pair key-value for example <code>restConnectorRequest.addParams("dashboardId", "myDashboardId");</code></li>
</ul><div class="alert alert-info">
<p>An implementation can be seen in <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/rest/transformers/NotificationDashboardRequestTransformer.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">this example</a></p>
</div><h4 id="Response-Transformer8"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Response-Transformer8" title="Response-Transformer8"><i class="fa fa-link"></i></a>Response Transformer</h4><p>To create a <em>Response Transformer</em> you have to create in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.rest.transformers</code> package a spring @Service class that implements the <code>IRestResponseTransformer&lt;RESOURCE, OUTPUT&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><span class="hljs-function">OUTPUT <span class="hljs-title">transform</span><span class="hljs-params">(RestConnectorResponse&lt;RESOURCE&gt; restConnectorResponse)</span></span>;
</code></pre><p>The <code>trasform</code> method takes as parameters:</p><ul>
<li><code>RestConnectorResponse&lt;RESOURCE&gt;</code> restConnectorResponse: the response object</li>
</ul><p>and returns an instance of <code>OUTPUT</code></p><p>In most of the cases you only have to call the <code>getBody()</code> method of the response object and return its value, as we can see from the following example:</p><pre><code class="java hljs"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NotificationDashboardResponseTransformer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IRestResponseTransformer</span>&lt;<span class="hljs-title">Object</span>, <span class="hljs-title">Object</span>&gt; </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">transform</span><span class="hljs-params">(RestConnectorResponse&lt;Object&gt; response)</span> </span>{
        <span class="hljs-keyword">return</span> response.getResponse().getBody();
    }

}
</code></pre><h3 id="Use-case-service-example9"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example9" title="Use-case-service-example9"><i class="fa fa-link"></i></a>Use case service example</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].services</p>
</div><p>Let’s create a sample service that will make use of the connector just created.</p><p>Create a class that extends BaseService in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.services</code> package and annotate it as service spring bean adding <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Service</code></a>.</p><p>Within this class, create a field for the BearCore Connector class created above and annotate it as <code>@Autowired</code>; moreover create an <code>@Autowired</code> field for the Rest Request Transformer and one for the Rest Response Transformer from the previous step.</p><p>In this service you have to implement your business method (in the following example <code>public Object getNotification()</code>) and inside this method invoke the <strong>call</strong> method of your BearCore Connector.</p><p>Call method get in input</p><ul>
<li><strong>INPUT input</strong>: an input object model that is the body of the rest request</li>
<li><strong>IRestRequestTransformer&lt;INPUT,DTO&gt; requestTransformer</strong>: the request transformer autowired in the service</li>
<li><strong>IRestResponseTransformer&lt;RESOURCE,OUTPUT&gt; responseTransformer</strong>: the response transformer autowired in the service</li>
<li><strong>Object… args</strong>: zero or more parameter mapped to urls parameter as previously defined in request tranformer</li>
</ul><p>Returns an object instance of OUTPUT tha is the respose of the rest call trasformed as defined in responseTransformer.</p><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> OUTPUT <span class="hljs-title">call</span><span class="hljs-params">(INPUT input, IRestRequestTransformer&lt;INPUT,DTO&gt; requestTransformer, IRestResponseTransformer&lt;RESOURCE,OUTPUT&gt; responseTransformer, Object... args)</span> </span>{
</code></pre><p>In our example we call <code>notificationDashboardConnector.call</code> passing:</p><ul>
<li><strong>INPUT input</strong>: the query param of the request</li>
<li><strong>IRestRequestTransformer&lt;INPUT,DTO&gt; requestTransformer</strong>: the trasformer of type <code>NotificationDashboardRequestTransformer&lt;Void&gt;</code> defined before</li>
<li><strong>IRestResponseTransformer&lt;RESOURCE,OUTPUT&gt; responseTransformer</strong>: the transformer of type <code>NotificationDashboardResponseTransformer&lt;Object&gt;</code> defined before</li>
<li><strong>Object… args</strong>: in this case nothing</li>
</ul><p>And return an <code>Object</code> object that in our case is simply the body of the rest response as translated in transform of notificationDashboardResponseTransformer</p><pre><code class="java hljs">notificationDashboardConnector.call(param, notificationDashboardRequestTransformer, notificationDashboardResponseTransformer);
</code></pre><div class="alert alert-info">
<p>A complete implementation can be seen in <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/service/NotificationDashboardService.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">this example</a></p>
</div><h2 id="SOAP-Connector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#SOAP-Connector" title="SOAP-Connector"><i class="fa fa-link"></i></a>SOAP Connector</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.ws</p>
</div><p>It provides a means to efficiently use the SOAP services with a dedicated Maven plugin for XML Schema compilation.</p><h3 id="JAXB2-Maven-Plugin"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JAXB2-Maven-Plugin" title="JAXB2-Maven-Plugin"><i class="fa fa-link"></i></a>JAXB2 Maven Plugin</h3><p>This Maven plugin wraps and enhances the JAXB Schema Compiler (XJC) and allows compiling XML Schemas (as well as WSDL, DTDs, RELAX NG) into Java classes in Maven builds.</p><div class="alert alert-warning">
<p>This procedure for generating Java classes from the <code>.wsdl</code> is just a suggestion. You can use your favourite tool to generate classes and then import them into the project.</p>
</div><p>Put your schemas (<em>.wsdl</em>) and bindings (<em>.xsd</em>) into the <code>src/main/resources</code> folder or get it through a defined <em>URL</em>.<br>
Add the plugin to your pom.xml inside <code>&lt;plugins&gt;</code> tag:</p><pre><code class="yaml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.jvnet.jaxb2.maven2<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-jaxb2-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.14.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">removeOldOutput</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">removeOldOutput</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">cleanPackageDirectories</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">cleanPackageDirectories</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>generate<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">generateDirectory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">generateDirectory</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">schemaLanguage</span>&gt;</span>WSDL<span class="hljs-tag">&lt;/<span class="hljs-name">schemaLanguage</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">generatePackage</span>&gt;</span>com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.ws.gen.[WEB-SERVICE]<span class="hljs-tag">&lt;/<span class="hljs-name">generatePackage</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">schemas</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">schema</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>[WSDL-URL]<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span> <span class="hljs-comment">&lt;!-- online wsdl --&gt;</span>
                    <span class="hljs-comment">&lt;!--&lt;fileset&gt;
                            &lt;directory&gt;${basedir}/src/main/resources/gen/[WEB-SERVICE]&lt;/directory&gt;
                            &lt;includes&gt;
                                &lt;include&gt;local.wsdl&lt;/include&gt;
                            &lt;/includes&gt;
                        &lt;/fileset&gt;--&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">schema</span>&gt;</span>

                <span class="hljs-tag">&lt;/<span class="hljs-name">schemas</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
</code></pre><p>If do not want to version the generated classes, you can change the output folder (outside the java package) and set it as <em>generated-sources</em> folder.</p><p>Depending on the service, the generated classes can contain, or not, the <code>@XmlRootElement</code> annotation. In case it is not present, please consult the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#XmlRootElement-annotation">dedicated section</a>.</p><p>Please refer to the <a href="https://github.com/highsource/maven-jaxb2-plugin/wiki" target="_blank" rel="noopener">wiki</a> for the full documentation.</p><h3 id="XmlRootElement-annotation"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#XmlRootElement-annotation" title="XmlRootElement-annotation"><i class="fa fa-link"></i></a>XmlRootElement annotation</h3><p>In some cases the auto-generated classes from the <em>wsdl</em> through the maven plugin may not contain the <code>@XmlRootElement</code> annotation. In these cases you, during the connector utilization, you may run into the following error:</p><pre><code class="txt hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span></div><div class="code"><span class="hljs-selector-attr">[BEAR-CONNECTOR]</span><span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.springframework</span><span class="hljs-selector-class">.oxm</span><span class="hljs-selector-class">.MarshallingFailureException</span>: <span class="hljs-selector-tag">JAXB</span> <span class="hljs-selector-tag">marshalling</span> <span class="hljs-selector-tag">exception</span>; <span class="hljs-selector-tag">nested</span> <span class="hljs-selector-tag">exception</span> <span class="hljs-selector-tag">is</span> <span class="hljs-selector-tag">javax</span><span class="hljs-selector-class">.xml</span><span class="hljs-selector-class">.bind</span><span class="hljs-selector-class">.MarshalException</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">with</span> <span class="hljs-selector-tag">linked</span> <span class="hljs-selector-tag">exception</span>:
<span class="hljs-selector-attr">[com.sun.istack.internal.SAXException2: impossibile eseguire il marshalling del tipo "com.intesasanpaolo.bear.service.connector.ws.gen.***.***" come elemento poiché manca un'annotazione @XmlRootElement]</span>
</div></div></code></pre><p>You can solve this issue in many different ways; we will show you two possible solutions: <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#XJB-binding">XJB binding</a> or <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JAXBElement-resource-wrapping">JAXBElement resource wrapping</a>.</p><h4 id="XJB-binding"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#XJB-binding" title="XJB-binding"><i class="fa fa-link"></i></a>XJB binding</h4><p>With this method you can define a mapping file in order to insert the annotation in the required classes, just adding a xjb binding file and modifing the maven jaxb2 plugin as follows:</p><pre><code class="xml hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span></div><div class="code"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span><span class="hljs-meta">?&gt;</span></span>
<span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>generate<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">generateDirectory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">generateDirectory</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">generatePackage</span>&gt;</span>com.intesasanpaolo.bear.generated_package<span class="hljs-tag">&lt;/<span class="hljs-name">generatePackage</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">strict</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">strict</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">episode</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">episode</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">schemaLanguage</span>&gt;</span>WSDL<span class="hljs-tag">&lt;/<span class="hljs-name">schemaLanguage</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">schemaDirectory</span>&gt;</span>src/main/resources/wsdl<span class="hljs-tag">&lt;/<span class="hljs-name">schemaDirectory</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">schemaIncludes</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>TEST_SCHEMA.wsdl<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">schemaIncludes</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">extension</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">extension</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
</div></div></code></pre><p>And add in the same path of the wsdl file the binding.xjb, that contains:</p><pre><code class="xml hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span></div><div class="code"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span><span class="hljs-meta">?&gt;</span></span>
<span class="hljs-tag">&lt;<span class="hljs-name">jxb:bindings</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.0"</span> <span class="hljs-attr">xmlns:jxb</span>=<span class="hljs-string">"http://java.sun.com/xml/ns/jaxb"</span>
              <span class="hljs-attr">xmlns:xjc</span>= <span class="hljs-string">"http://java.sun.com/xml/ns/jaxb/xjc"</span>
              <span class="hljs-attr">jxb:extensionBindingPrefixes</span>=<span class="hljs-string">"xjc"</span> <span class="hljs-attr">xmlns:xs</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">jxb:bindings</span> <span class="hljs-attr">schemaLocation</span>=<span class="hljs-string">"&lt;URL_TO_XSD_SCHEMA&gt;?xsd=xsdN"</span> <span class="hljs-attr">node</span>=<span class="hljs-string">"/xs:schema"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">jxb:globalBindings</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">xjc:simple</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">jxb:globalBindings</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">jxb:bindings</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">jxb:bindings</span>&gt;</span>
</div></div></code></pre><p>So the plugin automatically add the @XmlRootElement to the right classes.</p><h4 id="JAXBElement-resource-wrapping"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JAXBElement-resource-wrapping" title="JAXBElement-resource-wrapping"><i class="fa fa-link"></i></a>JAXBElement resource wrapping</h4><p>You have to manage the RESOURCE object wrapped in a JAXBElement (e.g. JAXBElement&lt;RESOURCE) as follows:</p><p><strong>Connector</strong>:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestConnector</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseDataPowerSoapConnector</span>&lt;<span class="hljs-title">INPUT</span>,<span class="hljs-title">OUTPUT</span>,<span class="hljs-title">JAXBElement</span>&lt;<span class="hljs-title">INPUT</span>&gt;,<span class="hljs-title">JAXBElement</span>&lt;<span class="hljs-title">OUTPUT</span>&gt;&gt; </span>{
}
</div></div></code></pre><p><strong>Request Transformer</strong>:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestReqTransformer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ISoapRequestTransformer</span>&lt;<span class="hljs-title">INPUT</span>,<span class="hljs-title">JAXBElement</span>&lt;<span class="hljs-title">INPUT</span>&gt;&gt; </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> SoapConnectorRequest&lt;JAXBElement&lt;INPUT&gt;&gt; transform(INPUT input, Object... args) {
        SoapConnectorRequest&lt;JAXBElement&lt;INPUT&gt;&gt; request = <span class="hljs-keyword">new</span> SoapConnectorRequest&lt;&gt;();
        ObjectFactory of = <span class="hljs-keyword">new</span> ObjectFactory();
        request.setPayload(of.createInput(input));
        <span class="hljs-keyword">return</span> request;
    }
}

</div></div></code></pre><p><strong>Response Transformer</strong>:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestRespTransformer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ISoapResponseTransformer</span>&lt;<span class="hljs-title">JAXBElement</span>&lt;<span class="hljs-title">OUTPUT</span>&gt;,<span class="hljs-title">OUTPUT</span>&gt; </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> OUTPUT <span class="hljs-title">transform</span><span class="hljs-params">(SoapConnectorResponse&lt;JAXBElement&lt;OUTPUT&gt;&gt; soapConnectorResponse)</span> </span>{
        <span class="hljs-keyword">return</span> soapConnectorResponse.getResponse().getValue();
    }
}

</div></div></code></pre><h3 id="Create-the-connector10"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector10" title="Create-the-connector10"><i class="fa fa-link"></i></a>Create the connector</h3><p>Create a class in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.ws</code> package, that extends com.intesasanpaolo.bear.connector.rest.connector.BaseSoapConnector&lt;INPUT, OUTPUT, DTO, RESOURCE&gt; and annotated with spring <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Service</code></a> annotation.</p><p>The generic types have the following meaning:</p><ul>
<li><strong>INPUT</strong>:    The input for the request, it will translated in <strong>DTO</strong> by transformers</li>
<li><strong>OUTPUT</strong>:   The expected object model type</li>
<li><strong>DTO</strong>:      The DTO for data transferring</li>
<li><strong>RESOURCE</strong>: The remote Resource expected in response, this will translated in <strong>OUTPUT</strong> type object by transformer</li>
</ul><p>An example of Soap Connector can be seen in showcase class <code>com.intesasanpaolo.bear.service.connector.ws.CalculatorWSConnector</code></p><h4 id="Soap-fault"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Soap-fault" title="Soap-fault"><i class="fa fa-link"></i></a>Soap fault</h4><div class="alert alert-info">
<p>As you can check, there is the possibility to declare a custom fault handler. Follow the implementation comments for suggestion on how to use it.</p>
</div><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span></div><div class="code"> <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handleSoapFault</span><span class="hljs-params">(SoapMessage soapMessage, Unmarshaller unmarshaller)</span> <span class="hljs-keyword">throws</span> RuntimeException </span>{

        <span class="hljs-comment">//Get the detail you need</span>
        Source source = soapMessage.getSoapBody().getFault().getFaultDetail().getDetailEntries().next().getSource();
        JAXBElement jaxbElement;
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">//Unmarshal an jaxbelement</span>
            jaxbElement = (JAXBElement) unmarshaller.unmarshal(source);
        } <span class="hljs-keyword">catch</span> (IOException e) {
            <span class="hljs-comment">//handle error in unmarshalling the error</span>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> CalculatorException(e.getMessage());
        }
        <span class="hljs-comment">//Cast to your own class</span>
        Object error = (Object) jaxbElement.getValue();

        <span class="hljs-comment">//Assign whatever you need from the remote error</span>
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> CalculatorException(error.toString());

    }
</div></div></code></pre><div class="alert alert-info">
<p>A complete implementation can be seen in <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/ws/CalculatorWSConnector.java?at=env/svil" target="_blank" rel="noopener">this example</a></p>
</div><h3 id="Configure-the-connector8"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector8" title="Configure-the-connector8"><i class="fa fa-link"></i></a>Configure the connector</h3><p>To configure the SOAP Connector, you have to edit the <code>application.yml</code> file inserting a new item in the <code>connectors.soapConfiguration.items</code> section; the name of the item must correspond to the name of the class created during the preious step and it must have the following properties:</p><ul>
<li>
<p><strong>endpoint</strong>: The remote WebService endpoint url for example <code>http://www.dneonline.com/calculator.asmx</code></p>
</li>
<li>
<p><strong>timeout</strong>: time in <em>milliseconds</em> for the WebService request timeout.</p>
</li>
<li>
<p><strong>username</strong>: WebService access credentials.</p>
</li>
<li>
<p><strong>password</strong>: WebService access credentials.</p>
</li>
<li>
<p><strong>authenticationType</strong>: none|basic|token|mutual</p>
<ul>
<li><strong>none</strong>: no authentication needed (<strong>default</strong>)</li>
<li><strong>basic</strong>: basic Authentication with base64 econde of <code>username:password</code></li>
<li><strong>token</strong>: supply a Username-Token as a means of identifying the requestor by “username”, and optionally using a password (or shared secret, or password equivalent) to authenticate that identity to the web service producer.</li>
<li><strong>mutual</strong>: supply certificateName and certificatePassword to obtain mutual authentication.<br>
Furthermore supply the env variables
<ul>
<li>trustStore=path/of/trustStore</li>
<li>trustStorePassword=trustStorePWD<br>
And execute the java execution command with the corresponding flags: <code>-DtrustStore={trustStore}</code> &amp; <code>-DtrustStorePassword=trustStorePassword</code>.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>certificateName</strong>: The name of the certificate inside the trustStore.</p>
</li>
<li>
<p><strong>certificatePassword</strong>: The corresponding certificate password.</p>
</li>
<li>
<p><strong>timeToLive</strong>: authentication TTL in <em>ms</em>.</p>
</li>
<li>
<p><strong>contextPath</strong>: package string of the generated classes; e.g. <code>com.intesasanpaolo.bear.service.connector.ws.gen.calculator</code></p>
</li>
<li>
<p><strong>headerContextPath</strong>: [OPTIONAL - see <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#custom-soap-headers">Custom Headers</a>] package string of the generated header classes; e.g. <code>com.intesasanpaolo.bear.service.connector.ws.gen.calculator</code></p>
</li>
<li>
<p><strong>soapVersion</strong>: 1.1|1.2  (<strong>required</strong>). SOAP 1.2 uses “<a href="http://www.w3.org/2003/05/soap-envelope%E2%80%9D" target="_blank" rel="noopener">http://www.w3.org/2003/05/soap-envelope”</a> as the envolope namespace and SOAP 1.1 uses “<a href="http://schemas.xmlsoap.org/soap/envelope/%E2%80%9C" target="_blank" rel="noopener">http://schemas.xmlsoap.org/soap/envelope/“</a>.</p>
</li>
<li>
<p><strong>soapAction</strong>: It is mandatory if you specify soapVerion 1.1, because <em>spring-ws</em> does not automatically fill the <code>SOAPHeader</code> with the related <code>SOAPAction</code>.</p>
</li>
<li>
<p><strong>enableMTOM</strong>: false|true . With <a href="https://www.ibm.com/support/knowledgecenter/en/SSMKHH_10.0.0/com.ibm.etools.mft.doc/ac56620_.htm" target="_blank" rel="noopener">MTOM</a>, the attachment will be transmitted outside the envelope as a MIME - in short, it’s sent according to its original datatype: a jpg, png, or gif. Of course it’s still transmitted as binary data, but this time, there’s no XML-related conversion, avoiding the computational overhead. XOP comes into the picture as it’s the one that gives the location of the externalized image. <strong>Default</strong> is <em>false</em>.</p>
</li>
<li>
<p><strong>mocked</strong>: If set to true the connector is mocked and remote server is never invoked.</p>
</li>
<li>
<p><strong>path</strong>: the path of mock files stub.</p>
</li>
<li>
<p><strong>files</strong>: A list of json stub file, this files represents various possible random response.</p>
</li>
</ul><div class="alert alert-danger">
<p>Whether a field is in common with multiple connectors, you can put it before the <code>items</code> section, such as to make it valid for all connectors unless it is overwritten in the specific connector section.</p>
</div><p>Example of WebService Connector configuration</p><pre><code class="json hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span></div><div class="code">soapConfiguration:
  items:
    CalculatorWSConnector
    endpoint: http://www.dneonline.com/calculator.asmx
    timeout: 5000
    username: username
    password: password
    authenticationType: none
    timeToLive: 7000
    contextPath: com.intesasanpaolo.bear.service.connector.ws.gen.calculator
    soapVersion: 1.2
    soapAction: #for soapVersion 1.1
    enableMTOM: false
    mocked: true
    path: wsMocks
    files:
      - response.xml
</div></div></code></pre><h3 id="Create-the-Transformers"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Transformers" title="Create-the-Transformers"><i class="fa fa-link"></i></a>Create the Transformers</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.ws.transformers</p>
</div><p>You have to define two different transformers for the management and conversion of both the request and response parameters of the <em>WebService Connector</em>.</p><h4 id="Request-Transformer9"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Transformer9" title="Request-Transformer9"><i class="fa fa-link"></i></a>Request Transformer</h4><p>To create a Request Transformer you have to create in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.ws.transformers</code> package a spring @Service class that implements the <code>ISoapRequestTransformer&lt;INPUT, DTO&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code"><span class="hljs-function">SoapConnectorRequest&lt;DTO&gt; <span class="hljs-title">transform</span><span class="hljs-params">(INPUT om, Object... args)</span>
</span></div></div></code></pre><p>The trasform method takes as parameters:</p><ul>
<li><strong>INPUT input</strong>: The input for the request, this is the body of rest request. In case of a GET call is not needed and can be set as Void java class</li>
<li><strong>Object… args</strong> zero or more paramenter for the SOAP url parameter.</li>
</ul><p>In the transform method you have to instantiate a SoapConnectorRequest&lt;&gt; object and populate its fields through the respective setter methods.</p><p>Then you must define:</p><ul>
<li>The WebService connector request as <code>SoapConnectorRequest&lt;Add&gt;</code> (line 4)</li>
<li>Set the payload request` (line 6),</li>
<li>Add some ISP SOAP header if needed (line 7)</li>
</ul><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CalculatorWSRequestTransformer</span>&lt;<span class="hljs-title">Add</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title">ISoapRequestTransformer</span>&lt;<span class="hljs-title">Add</span>, <span class="hljs-title">Add</span>&gt; </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> SoapConnectorRequest&lt;Add&gt; <span class="hljs-title">transform</span><span class="hljs-params">(Add addend, Object... args)</span> </span>{
        SoapConnectorRequest&lt;Add&gt; request = <span class="hljs-keyword">new</span> SoapConnectorRequest&lt;&gt;();
        request.setPayload(addend);
        request.setSoapHeader(<span class="hljs-keyword">null</span>);
        <span class="hljs-keyword">return</span> request;
    }
}
</div></div></code></pre><div class="alert alert-info">
<p>A complete implementation can be seen in <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/ws/transformers/CalculatorWSRequestTransformer.java?at=env/svil" target="_blank" rel="noopener">this example</a></p>
</div><h5 id="Custom-SOAP-Headers"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Custom-SOAP-Headers" title="Custom-SOAP-Headers"><i class="fa fa-link"></i></a>Custom SOAP Headers</h5><p>If you need to add some custom SOAP headers to the request, use <code>SoapConnectorRequestCustomHeaders&lt;INPUT,HEADER&gt;</code> class instead of <code>SoapConnectorRequest&lt;INPUT&gt;</code>. Since it actually extends <code>SoapConnectorRequest&lt;INPUT&gt;</code>, there is no need to change the Transformer signature.</p><p>The generic <code>HEADER</code> parameter must be set to the class of your custom header. In most cases this class will be generated from an appropriate XSD using the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JAXB2-Maven-Plugin">same JAXB plugin</a> used for the body. Add another execution and simply omit the WSDL <code>schemaLanguage</code> element:</p><pre><code class="xml hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span>
<span data-linenumber="22"></span>
<span data-linenumber="23"></span>
<span data-linenumber="24"></span>
<span data-linenumber="25"></span>
<span data-linenumber="26"></span>
<span data-linenumber="27"></span></div><div class="code">...
    <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
        ...
        <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>generate<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">generateDirectory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">generateDirectory</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">episode</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">episode</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">generatePackage</span>&gt;</span>com.intesasanpaolo.bear.your.generated.package.for.header<span class="hljs-tag">&lt;/<span class="hljs-name">generatePackage</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">schemas</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">schema</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">fileset</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>${basedir}/src/main/resources/wsdl<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>header_xsd.xsd<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">fileset</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">schema</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">schemas</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
        ...
    <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
...
</div></div></code></pre><p>It will generate your annotated classes inside the chosen <code>directory</code>; then, you can use the header class as <code>HEADER</code> parameter and set the appropriate values inside the request (<em><strong>please remember the considerations about JAXBElement if needed</strong></em>):</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span>
<span data-linenumber="22"></span>
<span data-linenumber="23"></span>
<span data-linenumber="24"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CalculatorWSRequestTransformer</span>&lt;<span class="hljs-title">Add</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title">ISoapRequestTransformer</span>&lt;<span class="hljs-title">Add</span>, <span class="hljs-title">Add</span>&gt; </span>{

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ObjectFactory objectFactory;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">CalculatorWSRequestTransformer</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">this</span>.objectFactory = <span class="hljs-keyword">new</span> ObjectFactory();
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> SoapConnectorRequest&lt;Add&gt; <span class="hljs-title">transform</span><span class="hljs-params">(Add addend, Object... args)</span> </span>{
        <span class="hljs-comment">//Create the SOAP header</span>
        HeaderClass headerObject = objectFactory.createHeaderClass();
        headerObject.setSomeString(<span class="hljs-string">"someString"</span>);
        JAXBElement&lt;HeaderClass&gt; jaxbHeader = objectFactory.createHeaderClass(headerObject);

        <span class="hljs-comment">//Transform in SOAP request: add a SOAP header</span>
        SoapConnectorRequestCustomHeaders&lt;Add, JAXBElement&lt;HeaderClass&gt;&gt; request = <span class="hljs-keyword">new</span> SoapConnectorRequestCustomHeaders&lt;&gt;();
        request.setPayload(addRequest);
        request.setSoapHeader(<span class="hljs-keyword">null</span>); <span class="hljs-comment">//This is DataPower header</span>
        request.setCustomSoapHeaders(jaxbHeader);
        <span class="hljs-keyword">return</span> request;
    }
}
</div></div></code></pre><p>The header class can belong to a context path (package) different from the context path of the body class, because it could have been generated from a totally different XSD: in that case, <em><strong>put the appropriate context path into</strong></em> <code>headerContextPath</code> <em><strong>property</strong></em>. If this class is instead part of the same WSDL of the body, this property can be omitted since normal <code>contextPath</code> will be used instead as default value.</p><h4 id="Response-Transformer9"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Response-Transformer9" title="Response-Transformer9"><i class="fa fa-link"></i></a>Response Transformer</h4><p>To create a <em>Response Transformer</em> you have to create in the <code>com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.ws.transformers</code> package a spring @Service class that implements the <code>ISoapResponseTransformer&lt;RESOURCE, OUTPUT&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code"><span class="hljs-function">OUTPUT <span class="hljs-title">transform</span><span class="hljs-params">(SoapConnectorResponse&lt;RESOURCE&gt; soapConnectorResponse)</span>
</span></div></div></code></pre><p>The <code>trasform</code> method takes as parameters:</p><ul>
<li><code>SoapConnectorResponse&lt;RESOURCE&gt;</code> soapConnectorResponse: the response object</li>
</ul><p>and returns an instance of <code>OUTPUT</code>.</p><p>In most of the cases you only have to call the <code>getResponse()</code> method to get the response Object (in this case <code>AddResponse</code>) and return its interesting value, as we can see from the following example:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CalculatorWSResponseTransformer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ISoapResponseTransformer</span>&lt;<span class="hljs-title">AddResponse</span>,<span class="hljs-title">Integer</span>&gt; </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">transform</span><span class="hljs-params">(SoapConnectorResponse&lt;AddResponse&gt; soapConnectorResponse)</span> </span>{
         AddResponse res = soapConnectorResponse.getResponse();
         <span class="hljs-keyword">return</span> res.getAddResult();
    }
}
</div></div></code></pre><div class="alert alert-info">
<p>A complete implementation can be seen in <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/ws/transformers/CalculatorWSResponseTransformer.java?at=env/svil" target="_blank" rel="noopener">this example</a></p>
</div><h3 id="Use-case-service-example10"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example10" title="Use-case-service-example10"><i class="fa fa-link"></i></a>Use case service example</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].services</p>
</div><p>Let’s create a sample service that will make use of the connector just created.</p><p>Create a class that extends BaseService in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.services</code> package and annotate it as service spring bean adding <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Service</code></a>.</p><p>Within this class, create a field for the WebService Connector class created above and annotate it as <code>@Autowired</code>; moreover create an <code>@Autowired</code> field for the Soap Request Transofrmer and one for the Soap Response Transformer from the previous step.</p><p>In this service you have to implement your business method (in the following example <code>public Integer add(Integer a, Integer b)</code>) and inside this method invoke the <strong>call</strong> method of your WebService Connector.</p><p>The call() method get in input:</p><ul>
<li><strong>INPUT input</strong>: an input object model that is the body of the request</li>
<li><strong>ISoapRequestTransformer&lt;INPUT,DTO&gt; requestTransformer</strong>: the request transformer autowired in the service</li>
<li><strong>ISoapResponseTransformer&lt;RESOURCE,OUTPUT&gt; responseTransformer</strong>: the response transformer autowired in the service</li>
<li><strong>Object… args</strong>: zero or more parameter as previously defined in request tranformer</li>
</ul><p>Returns an object instance of OUTPUT tha is the respose of the rest call trasformed as defined in responseTransformer.</p><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> OUTPUT <span class="hljs-title">call</span><span class="hljs-params">(INPUT input, ISoapRequestTransformer&lt;INPUT, DTO&gt; requestTransformer, ISoapResponseTransformer&lt;RESOURCE, OUTPUT&gt; responseTransformer, Object... args)</span> </span>{
}
</code></pre><p>In our example we call <code>CalculatorWSConnector.call</code> passing:</p><ul>
<li><strong><code>INPUT</code> input</strong>: an object request of type <code>Add</code></li>
<li><strong><code>ISoapRequestTransformer&lt;INPUT,DTO&gt; calculatorWSRequestTransformer</code></strong>: the trasformer of type <code>CalculatorWSRequestTransformer</code> defined before</li>
<li><strong><code>ISoapResponseTransformer&lt;RESOURCE,OUTPUT&gt; calculatorWSResponseTransformer</code></strong>: the transformer of type <code>CalculatorWSResponseTransformer</code> defined before</li>
<li><strong>Object… args</strong>: empty in our example.</li>
</ul><div class="alert alert-danger">
<p><strong>XmlRootElement</strong>:<br>
Please carefully read to the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#XmlRootElement"><code>@XmlRootElement</code></a> section.</p>
</div><p>And return an <code>Integer</code> object that in our case is simply the value inside the <code>AddResponse</code> response of the web service.</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code">calculatorWSConnector.call(request, calculatorWSRequestTransformer, calculatorWSResponseTransformer, <span class="hljs-keyword">null</span>);
</div></div></code></pre><div class="alert alert-info">
<p>A complete implementation can be seen in <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/service/CalculatorService.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">this example</a></p>
</div><h2 id="DataPower-SOAP-Connector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#DataPower-SOAP-Connector" title="DataPower-SOAP-Connector"><i class="fa fa-link"></i></a>DataPower SOAP Connector</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.ws</p>
</div><p>It provides a means to efficiently use the SOAP services with a dedicated Maven plugin for XML Schema compilation. You have to use this connector in order to make use of DataPower WebServices; it properly adds DataPower Header to all SOAP requests.</p><h3 id="JAXB2-Maven-Plugin1"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JAXB2-Maven-Plugin1" title="JAXB2-Maven-Plugin1"><i class="fa fa-link"></i></a>JAXB2 Maven Plugin</h3><p>Please refer to the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JAXB2-Maven-Plugin">SOAP paragraph</a>.</p><h3 id="XmlRootElement-annotation1"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#XmlRootElement-annotation1" title="XmlRootElement-annotation1"><i class="fa fa-link"></i></a>XmlRootElement annotation</h3><p>Please refer to the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#XmlRootElement-annotation0">SOAP paragraph</a>.</p><h3 id="Create-the-connector11"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector11" title="Create-the-connector11"><i class="fa fa-link"></i></a>Create the connector</h3><p>Create a class in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.ws</code> package, that extends com.intesasanpaolo.bear.connector.rest.connector.BaseDataPowerSoapConnector&lt;INPUT, OUTPUT, DTO, RESOURCE&gt; and annotated with spring <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Service</code></a> annotation.</p><p>The generic types have the following meaning:</p><ul>
<li><strong>INPUT</strong>:    The input for the request, it will translated in <strong>DTO</strong> by transformers</li>
<li><strong>OUTPUT</strong>:   The expected object model type</li>
<li><strong>DTO</strong>:      The DTO for data transferring</li>
<li><strong>RESOURCE</strong>: The remote Resource expected in response, this will translated in <strong>OUTPUT</strong> type object by transformer</li>
</ul><p>An example of DataPower Soap Connector can be seen in showcase class <code>com.intesasanpaolo.bear.service.connector.ws.CalculatorISPWSConnector</code></p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CalculatorISPWSConnector</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseDataPowerSoapConnector</span>&lt;<span class="hljs-title">Add</span>, <span class="hljs-title">Integer</span>, <span class="hljs-title">Add</span>, <span class="hljs-title">AddResponse</span>&gt; </span>{
}
</div></div></code></pre><div class="alert alert-info">
<p>A complete implementation can be seen in <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/ws/CalculatorISPWSConnector.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">this example</a></p>
</div><h4 id="DataPower-version"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#DataPower-version" title="DataPower-version"><i class="fa fa-link"></i></a>DataPower version</h4><p>If you need to use the old version of DataPower (before NBP, New Banking Platform) please override the <code>getDataPowerVersion()</code> method of <code>BaseDataPowerSoapConnector</code> to return <code>DataPowerVersion.NO_NBP</code> (default implementation returns <code>DataPowerVersion.NBP</code>):</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CalculatorISPWSConnector</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseDataPowerSoapConnector</span>&lt;<span class="hljs-title">Add</span>, <span class="hljs-title">Integer</span>, <span class="hljs-title">Add</span>, <span class="hljs-title">AddResponse</span>&gt; </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> DataPowerVersion <span class="hljs-title">getDataPowerVersion</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> DataPowerVersion.NO_NBP;
    }

}
</div></div></code></pre><p>Then, in your Transformer, set your old DataPower header values using <code>setOldDataPowerHeaders</code> method of <code>SoapConnectorRequest</code>:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CalculatorISPWSRequestTransformer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ISoapRequestTransformer</span>&lt;<span class="hljs-title">Add</span>, <span class="hljs-title">Add</span>&gt; </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> SoapConnectorRequest&lt;Add&gt; <span class="hljs-title">transform</span><span class="hljs-params">(Add addend, Object... args)</span> </span>{
        SoapConnectorRequest&lt;Add&gt; request = <span class="hljs-keyword">new</span> SoapConnectorRequest&lt;&gt;();
        request.setPayload(addend);

        NoNBPDataPowerHeaderType dpHeaders = <span class="hljs-keyword">new</span> NoNBPDataPowerHeaderType();
        dpHeaders.setCodABI(<span class="hljs-string">"codABI"</span>);
        <span class="hljs-comment">//... set other fields</span>
        request.setOldDataPowerHeaders(dpHeaders);
        <span class="hljs-keyword">return</span> request;
    }
}
</div></div></code></pre><h3 id="Configure-the-connector9"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector9" title="Configure-the-connector9"><i class="fa fa-link"></i></a>Configure the connector</h3><p>To configure the DataPower Soap Connector, you have to edit the <code>application.yml</code> file inserting a new item in the <code>connectors.dataPowerSoapConfiguration.items</code> section; the name of the item must correspond to the name of the class created during the preious step and it must have the following properties:</p><ul>
<li>
<p><strong>endpoint</strong>: The remote WebService endpoint url for example <code>http://www.dneonline.com/calculator.asmx</code></p>
</li>
<li>
<p><strong>timeout</strong>: time in <em>milliseconds</em> for the WebService request timeout.</p>
</li>
<li>
<p><strong>username</strong>: WebService access credentials.</p>
</li>
<li>
<p><strong>password</strong>: WebService access credentials.</p>
</li>
<li>
<p><strong>authenticationType</strong>: none|basic|token|mutual</p>
<ul>
<li><strong>none</strong>: no authentication needed (<strong>default</strong>)</li>
<li><strong>basic</strong>: basic Authentication with base64 econde of <code>username:password</code></li>
<li><strong>token</strong>: supply a Username-Token as a means of identifying the requestor by “username”, and optionally using a password (or shared secret, or password equivalent) to authenticate that identity to the web service producer.</li>
<li><strong>mutual</strong>: supply certificateName and certificatePassword to obtain mutual authentication.<br>
Furthermore supply the env variables
<ul>
<li>trustStore=path/of/trustStore</li>
<li>trustStorePassword=trustStorePWD<br>
And execute the java execution command with the corresponding flags: <code>-DtrustStore={trustStore}</code> &amp; <code>-DtrustStorePassword=trustStorePassword</code>.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>certificateName</strong>: The name of the certificate inside the trustStore.</p>
</li>
<li>
<p><strong>certificatePassword</strong>: The corresponding certificate password.</p>
</li>
<li>
<p><strong>timeToLive</strong>: authentication TTL in ms.</p>
</li>
<li>
<p><strong>contextPath</strong>: package string of the generated classes; e.g. <code>com.intesasanpaolo.bear.service.connector.ws.gen.calculator</code></p>
</li>
<li>
<p><strong>soapVersion</strong>: 1.1|1.2 (<strong>required</strong>). SOAP 1.2 uses “<a href="http://www.w3.org/2003/05/soap-envelope%E2%80%9D" target="_blank" rel="noopener">http://www.w3.org/2003/05/soap-envelope”</a> as the envolope namespace and SOAP 1.1 uses “<a href="http://schemas.xmlsoap.org/soap/envelope/%E2%80%9C" target="_blank" rel="noopener">http://schemas.xmlsoap.org/soap/envelope/“</a>.</p>
</li>
<li>
<p><strong>soapAction</strong>: It is mandatory if you specify soapVerion 1.1, because <em>spring-ws</em> does not automatically fill the <code>SOAPHeader</code> with the related <code>SOAPAction</code>.</p>
</li>
<li>
<p><strong>enableMTOM</strong>: false|true . With <a href="https://www.ibm.com/support/knowledgecenter/en/SSMKHH_10.0.0/com.ibm.etools.mft.doc/ac56620_.htm" target="_blank" rel="noopener">MTOM</a>, the attachment will be transmitted outside the envelope as a MIME - in short, it’s sent according to its original datatype: a jpg, png, or gif. Of course it’s still transmitted as binary data, but this time, there’s no XML-related conversion, avoiding the computational overhead. XOP comes into the picture as it’s the one that gives the location of the externalized image. <strong>Default</strong> is <em>false</em>.</p>
</li>
<li>
<p><strong>mocked</strong>: If set to true the connector is mocked and remote server never invoked. <strong>Default</strong> is <em>false</em>.</p>
</li>
<li>
<p><strong>path</strong>: the path of mock files stub.</p>
</li>
<li>
<p><strong>files</strong>: A list of json stub file, this files represents various possible random response.</p>
</li>
<li>
<p><strong>header</strong>: A set of the DataPower Header field described in the following <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html" target="_blank" rel="noopener">table</a>, <em>prefixInter</em>, <em>channelCode</em>, <em>acronym</em>, <em>callerProgramName</em>, <em>serviceId</em>, <em>serviceVersion</em>, <em>customerId</em>, <em>operatingUnitCode</em>.</p>
</li>
</ul><table>
<thead>
<tr>
<th>Header ISP - NBP</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>prefixInter</td>
<td>String</td>
<td>It is used for the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Transaction-Id">transactionId</a> generation</td>
</tr>
<tr>
<td>serviceID</td>
<td>String</td>
<td>The name of the service called up. It is provided by the referent of the service. It is published in the services repository.</td>
</tr>
<tr>
<td>serviceVersion</td>
<td>String</td>
<td>The version of the called service</td>
</tr>
<tr>
<td>userID</td>
<td>String</td>
<td>It is the real user ID (serial number), if the business operation is requested by a bank operator. Otherwise, in the case of a virtual operator (Internet Banking) the technical serial number must be specified</td>
</tr>
<tr>
<td>isVirtualUser</td>
<td>String</td>
<td>It indicates whether the specified serial number is real or technical</td>
</tr>
<tr>
<td>ispServiceCompanyIDCode</td>
<td>String</td>
<td>It identifies the receiver company of the internal ISP request as encoded in the <em>V_ANA_CENTRO_TARGE</em> standard table. In the event that the same company sends the same code</td>
</tr>
<tr>
<td>ispCallerCompanyIDCode</td>
<td>String</td>
<td>It identifies the sender company of the internal ISP request as encoded in the <em>V_ANA_CENTRO_TARGE</em> standard table.</td>
</tr>
<tr>
<td>customerID</td>
<td>String</td>
<td>The unique code that identifies the customer for whom the operation is being performed. Examples: tax code, NSG, BT, card number</td>
</tr>
<tr>
<td>channelIDCode</td>
<td>String</td>
<td>It identifies the type of sender channel. (check the coding)</td>
</tr>
<tr>
<td>applicationID</td>
<td>String</td>
<td>The name of the calling application (Acronym)</td>
</tr>
<tr>
<td>callerProgramName</td>
<td>String</td>
<td>The name of the program that calls the service</td>
</tr>
<tr>
<td>callerServerName</td>
<td>String</td>
<td>Host name or IP address of the server from which the request is sent</td>
</tr>
<tr>
<td>codABI</td>
<td>String</td>
<td>ABI code of the bank that requested the service</td>
</tr>
<tr>
<td>codUnitaOperativa</td>
<td>String</td>
<td>If the business operation is requested by a bank operator, the calling application must indicate the real user id (serial number). In the case of a virtual operator (Internet Banking) the technical matriculation must be specified</td>
</tr>
<tr>
<td>language</td>
<td>String</td>
<td>Service language called up (E for English, I for Italian)</td>
</tr>
</tbody>
</table><p>These fileds mapping are showed in the following table:</p><table>
<thead>
<tr>
<th>BEAR field</th>
<th>Header ISP REST field</th>
</tr>
</thead>
<tbody>
<tr>
<td>none (it autofilled)</td>
<td>ISPWebservicesHeader.RequestInfo.Timestamp</td>
</tr>
<tr>
<td>generateInterkey(prefixInter)</td>
<td>ISPWebservicesHeader.RequestInfo.TransactionId</td>
</tr>
<tr>
<td>serviceID</td>
<td>ISPWebservicesHeader.RequestInfo.ServiceID</td>
</tr>
<tr>
<td>serviceVersion</td>
<td>ISPWebservicesHeader.RequestInfo.ServiceVersion</td>
</tr>
<tr>
<td>language</td>
<td>ISPWebservicesHeader.RequestInfo.Language</td>
</tr>
<tr>
<td>userID</td>
<td>ISPWebservicesHeader.OperatorInfo.UserID</td>
</tr>
<tr>
<td>isVirtualUser</td>
<td>ISPWebservicesHeader.OperatorInfo.IsVirtualUser</td>
</tr>
<tr>
<td>customerID</td>
<td>ISPWebservicesHeader.BusinessInfo.CustomerID</td>
</tr>
<tr>
<td>businessFileID</td>
<td>ISPWebservicesHeader.BusinessInfo.BusinessFileID</td>
</tr>
<tr>
<td>businessOperation</td>
<td>ISPWebservicesHeader.BusinessInfo.BusinessOperation</td>
</tr>
<tr>
<td>businessProcessID</td>
<td>ISPWebservicesHeader.BusinessInfo.BusinessProcessID</td>
</tr>
<tr>
<td>businessProcessName</td>
<td>ISPWebservicesHeader.BusinessInfo.BusinessProcessName</td>
</tr>
<tr>
<td>ispCallerCompanyIDCode</td>
<td>ISPWebservicesHeader.CompanyInfo.ISPCallerCompanyIDCode</td>
</tr>
<tr>
<td>ispServiceCompanyIDCode</td>
<td>ISPWebservicesHeader.CompanyInfo.ISPServiceCompanyIDCode</td>
</tr>
<tr>
<td>notISPCompanyIDCode</td>
<td>ISPWebservicesHeader.CompanyInfo.NotISPCompanyIDCode</td>
</tr>
<tr>
<td>ispCallerCompanyIDCode</td>
<td>ISPWebservicesHeader.CompanyInfo.ISPBranchCode</td>
</tr>
<tr>
<td>channelIDCode</td>
<td>ISPWebservicesHeader.TechnicalInfo.ChannelIDCode</td>
</tr>
<tr>
<td>applicationID</td>
<td>ISPWebservicesHeader.TechnicalInfo.ApplicationID</td>
</tr>
<tr>
<td>callerServerName</td>
<td>ISPWebservicesHeader.TechnicalInfo.CallerProgramName</td>
</tr>
<tr>
<td>callerServerName</td>
<td>ISPWebservicesHeader.TechnicalInfo.CallerServerName</td>
</tr>
<tr>
<td>codABI</td>
<td>ISPWebservicesHeader.AdditionalBusinessInfo.codABI</td>
</tr>
<tr>
<td>codUnitaOperativa</td>
<td>ISPWebservicesHeader.AdditionalBusinessInfo.codUnitaOperativa</td>
</tr>
</tbody>
</table><div class="alert alert-danger">
<p>Whether a field is in common with multiple connectors, you can put it before the <code>items</code> section, such as to make it valid for all connectors unless it is overwritten in the specific connector section.</p>
</div><p>Example of WebService Connector configuration</p><pre><code class="json hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span>
<span data-linenumber="22"></span>
<span data-linenumber="23"></span>
<span data-linenumber="24"></span>
<span data-linenumber="25"></span>
<span data-linenumber="26"></span>
<span data-linenumber="27"></span>
<span data-linenumber="28"></span>
<span data-linenumber="29"></span>
<span data-linenumber="30"></span>
<span data-linenumber="31"></span>
<span data-linenumber="32"></span>
<span data-linenumber="33"></span>
<span data-linenumber="34"></span>
<span data-linenumber="35"></span></div><div class="code">dataPowerSoapConfiguration:
  enableMTOM: false
  soapVersion: 1.2
  mocked: true
  items:
    CalculatorISPWSConnector:
      endpoint: http://www.dneonline.com/calculator.asmx
      timeout: 5000
      username: username
      password: password
      authenticationType: none
      timeToLive: 7000
      contextPath: com.intesasanpaolo.bear.service.connector.ws.gen.calculator
      #soapAction: http://tempuri.org/Add #for soapVersion 1.1
      path: wsMocks/
      files:
        - responseDataPower.xml
      header:
        prefixInter: "prefix"
        serviceVersion: "1.0"
        serviceID: "SERVICE_ID"
        userID: "USER_ID"
        isVirtualUser: "false"
        ispServiceCompanyIDCode: "01"
        ispCallerCompanyIDCode: "01"
        customerID: "01"
        channelIDCode: "02"
        applicationID: ${project.acronym}
        callerProgramName: "programName"
        callerServerName: "myIP"
        codABI: "00000"
        codUnitaOperativa: "11111"
        language: I
    #AnotherWSConnector:
      #...
</div></div></code></pre><div class="alert alert-danger">
<p>It is recommended to use quoted values for particular fields (e.g. “01”).</p>
</div><h3 id="Transaction-Id"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Transaction-Id" title="Transaction-Id"><i class="fa fa-link"></i></a>Transaction Id</h3><p>It is generated by default throught an architecturale method that can be Overrided as follows in the Connector declaration.</p><p>This is the dafault algorithm:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span>
<span data-linenumber="22"></span></div><div class="code">    <span class="hljs-function"><span class="hljs-keyword">protected</span> String <span class="hljs-title">generateInterkey</span><span class="hljs-params">(Date date, String serviceIdShort)</span> </span>{
        StringBuilder sb = <span class="hljs-keyword">new</span> StringBuilder();
        sb.append(prefixInter);

        String d = DateFormatUtils.format(date, <span class="hljs-string">"yyyyMMdd"</span>);
        sb.append(d);

        <span class="hljs-keyword">if</span> (StringUtils.isEmpty(serviceIdShort)) serviceIdShort = <span class="hljs-string">"ISPSV"</span>;
        <span class="hljs-keyword">if</span> (serviceIdShort.length() &gt; <span class="hljs-number">5</span>) serviceIdShort = serviceIdShort.substring(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>);
        <span class="hljs-keyword">if</span> (serviceIdShort.length() &lt; <span class="hljs-number">5</span>) serviceIdShort = StringUtils.rightPad(serviceIdShort, <span class="hljs-number">5</span>, <span class="hljs-string">"X"</span>);
        sb.append(serviceIdShort);
        bearLogger().info(<span class="hljs-string">"******************* "</span>+serviceIdShort+<span class="hljs-string">" **********"</span>);

        String time = DateFormatUtils.format(date, <span class="hljs-string">"HHmmss"</span>);
        sb.append(time);
        <span class="hljs-comment">//Put a casual number between 0-1000 instead of milliseconds, in order to manage uniqueness of INTER key for concurrent calls</span>
        Random randomGenerator = <span class="hljs-keyword">new</span> Random();
        <span class="hljs-keyword">int</span> randomInt = randomGenerator.nextInt(<span class="hljs-number">1000</span>);
        sb.append(StringUtils.leftPad(Integer.toString(randomInt), <span class="hljs-number">3</span>, <span class="hljs-string">'0'</span>));

        <span class="hljs-keyword">return</span> sb.toString();
    }
</div></div></code></pre><p>This method returns a string built as a concatenation of:</p><ul>
<li><em>serviceIdShort</em>: first 5 letters of the serviceId (possibly padded with <em>X</em>).</li>
<li>The current date.</li>
<li>The current time.</li>
<li>A casual number beetwin 0-999, in order to manage concurrent calls.</li>
</ul><p>In order to override the default method, you should do it in the DataPower connector declaration, as follows:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CalculatorISPWSConnector</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseDataPowerSoapConnector</span>&lt;<span class="hljs-title">Add</span>, <span class="hljs-title">Integer</span>, <span class="hljs-title">Add</span>, <span class="hljs-title">AddResponse</span>&gt; </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">generateInterkey</span><span class="hljs-params">(Date date, String serviceIdShort)</span> </span>{
        String transactionId = <span class="hljs-string">"OverridedTransactionID"</span>;<span class="hljs-comment">//your custom logic for transactionId generation</span>
        <span class="hljs-keyword">return</span> transactionId;
    }
}

</div></div></code></pre><h3 id="Create-the-Transformers1"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Transformers1" title="Create-the-Transformers1"><i class="fa fa-link"></i></a>Create the Transformers</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.ws.transformers</p>
</div><p>You have to define two different transformers for the management and conversion of both the request and response parameters of the <em>WebService Connector</em>.</p><h4 id="Request-Transformer10"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Transformer10" title="Request-Transformer10"><i class="fa fa-link"></i></a>Request Transformer</h4><p>To create a Request Transformer you have to create in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.ws.transformers</code> package a spring @Service class that implements the <code>ISoapRequestTransformer&lt;INPUT, DTO&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code"><span class="hljs-function">SoapConnectorRequest&lt;DTO&gt; <span class="hljs-title">transform</span><span class="hljs-params">(INPUT om, Object... args)</span>
</span></div></div></code></pre><p>The trasform method takes as parameters:</p><ul>
<li><strong>INPUT input</strong>: The input for the request, this is the body of rest request. In case of a GET call is not needed and can be set as Void java class</li>
<li><strong>Object… args</strong> zero or more paramenter for the SOAP url parameter.</li>
</ul><p>In the transform method you have to instantiate a SoapConnectorRequest&lt;&gt; object and populate its fields through the respective setter methods.</p><p>Then you must:</p><ul>
<li>(line 4) Define the WebService connector request as <code>SoapConnectorRequest&lt;Add&gt;</code></li>
<li>(line 6) Set the payload request ,</li>
<li>(lines 8-14) Add some custom dynamic SOAP header if needed
<ul>
<li>(line 8) Define and initialize an <code>ISPWebservicesHeaderType</code> Object</li>
<li>(line 10) Define and initialize the desired subclass chosen from:
<ul>
<li><code>RequestInfo</code></li>
<li><code>OperatorInfo</code></li>
<li><code>BusinessInfo</code></li>
<li><code>CompanyInfo</code></li>
<li><code>TechnicalInfo</code></li>
<li><code>AdditionalBusinessInfo</code></li>
</ul>
</li>
<li>(line 11) Set your custom field (static or defined through a method).</li>
<li>(line 13) Add your custom sublass to the header</li>
<li>(line 14) Add your header to the request</li>
</ul>
</li>
</ul><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CalculatorISPWSRequestTransformer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ISoapRequestTransformer</span>&lt;<span class="hljs-title">Add</span>, <span class="hljs-title">Add</span>&gt; </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> SoapConnectorRequest&lt;Add&gt; <span class="hljs-title">transform</span><span class="hljs-params">(Add addend, Object... args)</span> </span>{
        SoapConnectorRequest&lt;Add&gt; request = <span class="hljs-keyword">new</span> SoapConnectorRequest&lt;&gt;();
        request.setPayload(addend);

        ISPWebservicesHeaderType myHeaderFields = <span class="hljs-keyword">new</span> ISPWebservicesHeaderType();
        <span class="hljs-comment">//Add custom dynamic language param</span>
        ISPWebservicesHeaderType.RequestInfo myRequestInfo = <span class="hljs-keyword">new</span> ISPWebservicesHeaderType.RequestInfo();
        myRequestInfo.setLanguage(getLanguageMethod());

        myHeaderFields.setRequestInfo(myRequestInfo);
        request.setSoapHeader(myHeaderFields);

        <span class="hljs-keyword">return</span> request;
    }
}
</div></div></code></pre><div class="alert alert-info">
<p>A complete implementation can be seen in <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/ws/transformers/CalculatorISPWSRequestTransformer.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">this example</a></p>
</div><h4 id="Response-Transformer10"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Response-Transformer10" title="Response-Transformer10"><i class="fa fa-link"></i></a>Response Transformer</h4><p>To create a <em>Response Transformer</em> you have to create in the <code>com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.ws.transformers</code> package a spring @Service class that implements the <code>ISoapResponseTransformer&lt;RESOURCE, OUTPUT&gt;</code> interface. Hence you must override the following method:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span></div><div class="code"><span class="hljs-function">OUTPUT <span class="hljs-title">transform</span><span class="hljs-params">(SoapConnectorResponse&lt;RESOURCE&gt; soapConnectorResponse)</span>
</span></div></div></code></pre><p>The <code>trasform</code> method takes as parameters:</p><ul>
<li><code>SoapConnectorResponse&lt;RESOURCE&gt;</code> soapConnectorResponse: the response object</li>
</ul><p>and returns an instance of <code>OUTPUT</code>.</p><p>In most of the cases you only have to call the <code>getResponse()</code> method to get the response Object (in this case <code>AddResponse</code>) and return its interesting value, as we can see from the following example:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CalculatorISPWSResponseTransformer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">ISoapResponseTransformer</span>&lt;<span class="hljs-title">AddResponse</span>,<span class="hljs-title">Integer</span>&gt; </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Integer <span class="hljs-title">transform</span><span class="hljs-params">(SoapConnectorResponse&lt;AddResponse&gt; soapConnectorResponse)</span> </span>{
        AddResponse res = soapConnectorResponse.getResponse();
        <span class="hljs-keyword">return</span> res.getAddResult();
    }
}
</div></div></code></pre><div class="alert alert-info">
<p>A complete implementation can be seen in <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/connector/ws/transformers/CalculatorISPWSResponseTransformer.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">this example</a></p>
</div><h3 id="Use-case-service-example11"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example11" title="Use-case-service-example11"><i class="fa fa-link"></i></a>Use case service example</h3><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].services</p>
</div><p>Let’s create a sample service that will make use of the connector just created.</p><p>Create a class that extends BaseService in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.services</code> package and annotate it as service spring bean adding <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Service</code></a>.</p><p>Within this class, create a field for the WebService Connector class created above and annotate it as <code>@Autowired</code>; moreover create an <code>@Autowired</code> field for the Soap Request Transofrmer and one for the Soap Response Transformer from the previous step.</p><p>In this service you have to implement your business method (in the following example <code>public Integer add(Integer a, Integer b)</code>) and inside this method invoke the <strong>call</strong> method of your DataPower SOAP Connector.</p><p>The call() method get in input:</p><ul>
<li><strong>INPUT input</strong>: an input object model that is the body of the request</li>
<li><strong>ISoapRequestTransformer&lt;INPUT,DTO&gt; requestTransformer</strong>: the request transformer autowired in the service</li>
<li><strong>ISoapResponseTransformer&lt;RESOURCE,OUTPUT&gt; responseTransformer</strong>: the response transformer autowired in the service</li>
<li><strong>Object… args</strong>: zero or more parameter as previously defined in request tranformer</li>
</ul><p>Returns an object instance of OUTPUT tha is the respose of the rest call trasformed as defined in responseTransformer.</p><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> OUTPUT <span class="hljs-title">call</span><span class="hljs-params">(INPUT input, ISoapRequestTransformer&lt;INPUT, DTO&gt; requestTransformer, ISoapResponseTransformer&lt;RESOURCE, OUTPUT&gt; responseTransformer, Object... args)</span> </span>{
}
</code></pre><p>In our example we call <code>CalculatorISPWSConnector.call</code> passing:</p><ul>
<li><strong><code>INPUT</code> input</strong>: an object request of type <code>Add</code></li>
<li><strong><code>ISoapRequestTransformer&lt;INPUT,DTO&gt; calculatorWSRequestTransformer</code></strong>: the trasformer of type <code>CalculatorWSRequestTransformer</code> defined before</li>
<li><strong><code>ISoapResponseTransformer&lt;RESOURCE,OUTPUT&gt; calculatorWSResponseTransformer</code></strong>: the transformer of type <code>CalculatorWSResponseTransformer</code> defined before</li>
<li><strong>Object… args</strong>: empty in our example.</li>
</ul><p>And return an <code>Integer</code> object that in our case is simply the value inside the <code>AddResponse</code> response of the web service.</p><pre><code class="java hljs">calculatorISPWSConnector.call(request, calculatorWSRequestTransformer, calculatorWSResponseTransformer, <span class="hljs-keyword">null</span>);
</code></pre><div class="alert alert-info">
<p>A complete implementation can be seen in <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/service/CalculatorService.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">this example</a></p>
</div><h3 id="Populate-DataPower-header"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Populate-DataPower-header" title="Populate-DataPower-header"><i class="fa fa-link"></i></a>Populate DataPower header</h3><p>There are 3 ways to fill in the DataPower header fields, in order of priority:</p><ol>
<li>
<p><strong>Dynamic configuration</strong>: with the highest priority level, as shown in the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Transformer7">RequestTransformer example</a>.</p>
</li>
<li>
<p><strong>ISPContext</strong>: If the application receives an http request with DataPower header, its fields are used to populate the subsequent SOAP or REST request header, except fields related to the caller, which must be defined by one of the other two methods. These fields are:</p>
<ul>
<li>ServiceID</li>
<li>ServiceVersion</li>
<li>ApplicationID</li>
<li>CallerServerName</li>
<li>CallerProgramName</li>
</ul>
</li>
<li>
<p><strong>Static configuration</strong>: the user defined fields in the <code>application.yml</code>.</p>
</li>
</ol><h2 id="DataPower-REST-Connector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#DataPower-REST-Connector" title="DataPower-REST-Connector"><i class="fa fa-link"></i></a>DataPower REST Connector</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].connector.rest</p>
</div><p>It provides a means to efficiently use the DataPower REST services that returns data through the definition of a specific request/response model, and it properly adds DataPower Header to all requests.</p><h3 id="Create-the-connector12"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector12" title="Create-the-connector12"><i class="fa fa-link"></i></a>Create the connector</h3><p>Create a class in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.connector.rest</code> package, that extends <code>com.intesasanpaolo.bear.connector.rest.connector.BaseDataPowerRestConnector&lt;INPUT, OUTPUT, DTO, RESOURCE&gt;</code>  and annotated with spring <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Service</code></a> annotation.</p><p>The generic types have the following meaning:</p><ul>
<li><strong>INPUT</strong>:    The input for the request, it will translated in <strong>DTO</strong> by transformers;</li>
<li><strong>OUTPUT</strong>:   The expected object model type</li>
<li><strong>DTO</strong>:      The DTO for data transferring</li>
<li><strong>RESOURCE</strong>: The remote Resource expected in response, this will translated in <strong>OUTPUT</strong> type object by transformer</li>
</ul><p>An example of DataPower Rest Connector can be seen in showcase class <code>com.intesasanpaolo.bear.service.connector.rest.BitCoinDataPowerRestConnector</code></p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BitCoinDataPowerRestConnector</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseDataPowerRestConnector</span>&lt;<span class="hljs-title">Void</span>, <span class="hljs-title">BitCoin</span>, <span class="hljs-title">Void</span>, <span class="hljs-title">BitCoin</span>&gt; </span>{
}
</div></div></code></pre><h4 id="DataPower-version1"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#DataPower-version1" title="DataPower-version1"><i class="fa fa-link"></i></a>DataPower version</h4><p>If you need to use the old version of DataPower (before NBP, New Banking Platform) please override the <code>getDataPowerVersion()</code> method of <code>BaseDataPowerRestConnector</code> to return <code>DataPowerVersion.NO_NBP</code> (default implementation returns <code>DataPowerVersion.NBP</code>):</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SomethingISPConnector</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseDataPowerRestConnector</span>&lt;<span class="hljs-title">Add</span>, <span class="hljs-title">Integer</span>, <span class="hljs-title">Sum</span>, <span class="hljs-title">AddResponse</span>&gt; </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> DataPowerVersion <span class="hljs-title">getDataPowerVersion</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> DataPowerVersion.NO_NBP;
    }

}
</div></div></code></pre><p>Then, in your Transformer, set your old DataPower header values using the HTTP Headers as you would do for other headers.</p><h3 id="Configure-the-connector10"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector10" title="Configure-the-connector10"><i class="fa fa-link"></i></a>Configure the connector</h3><p>To configure the DataPower Rest Connector, you have to edit the <code>application.yml</code> file inserting a new item in the <code>connectors.restDataPowerConfigurations.items</code> section; the name of the item must correspond to the name of the class created during the preious step and it must have the following properties:</p><ul>
<li><strong>url</strong>: The remote rest endpoint url for example <code>https://petstore.swagger.io/v2/user/{username}</code> is very important to specify the complete url of remote endpoint with all the url-parameter, in this example we have one parmeter called ``{username}`   (required)</li>
<li><strong>mocked</strong>: If set to true the connector is mocked and remote server never invoked (<strong>optional, default: false</strong>)</li>
<li><strong>path</strong>: the path of mock files stub (<strong>optional, default: classpath:mocks/</strong>)</li>
<li><strong>files</strong>: A list of json stub file, this files represents various possible random response (<strong>optional</strong> if no files are specified all files in <code>&lt;path&gt;</code> folder are loaded)</li>
<li><strong>header</strong>: A set of the DataPower Header field described in the following <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html" target="_blank" rel="noopener">table</a>:</li>
</ul><table>
<thead>
<tr>
<th>Header ISP - NBP</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>prefixInter</td>
<td>String</td>
<td>It is used for the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Transaction-Id">transactionId</a> generation</td>
</tr>
<tr>
<td>serviceID</td>
<td>String</td>
<td>The name of the service called up. It is provided by the referent of the service. It is published in the services repository.</td>
</tr>
<tr>
<td>serviceVersion</td>
<td>String</td>
<td>The version of the called service</td>
</tr>
<tr>
<td>userID</td>
<td>String</td>
<td>It is the real user ID (serial number), if the business operation is requested by a bank operator. Otherwise, in the case of a virtual operator (Internet Banking) the technical serial number must be specified</td>
</tr>
<tr>
<td>iSVirtualUser</td>
<td>String</td>
<td>It indicates whether the specified serial number is real or technical</td>
</tr>
<tr>
<td>ispServiceCompanyIDCode</td>
<td>String</td>
<td>It identifies the receiver company of the internal ISP request as encoded in the <em>V_ANA_CENTRO_TARGE</em> standard table. In the event that the same company sends the same code</td>
</tr>
<tr>
<td>ispCallerCompanyIDCode</td>
<td>String</td>
<td>It identifies the sender company of the internal ISP request as encoded in the <em>V_ANA_CENTRO_TARGE</em> standard table.</td>
</tr>
<tr>
<td>notISPCompanyIDCode</td>
<td>String</td>
<td>It identifies the sender company of the request external to the ISP group (to be evaluated if there is an encoding table)</td>
</tr>
<tr>
<td>ispBranchCode</td>
<td>String</td>
<td>Organizational Unit Code / FRONT OFFICE that makes the request</td>
</tr>
<tr>
<td>customerID</td>
<td>String</td>
<td>The unique code that identifies the customer for whom the operation is being performed. Examples: tax code, NSG, BT, card number</td>
</tr>
<tr>
<td>businessProcessName</td>
<td>String</td>
<td>Long lasting process name. In the case that the request takes place within a process (e.g. estimates of loan disbursements, credit lines, …) Specify the name of the process in progress.</td>
</tr>
<tr>
<td>businessProcessID</td>
<td>String</td>
<td>If the process described in the BusinessProcessName head has a specific instance identifier, report it in this field.</td>
</tr>
<tr>
<td>businessOperation</td>
<td>String</td>
<td>It indicates the function the user is currently running. In the case of a long-term process, it identifies the current task</td>
</tr>
<tr>
<td>businessFileID</td>
<td>String</td>
<td>Number of Practice in process, Quotation No. in process, Product code, etc.</td>
</tr>
<tr>
<td>channelIDCode</td>
<td>String</td>
<td>It identifies the type of sender channel. (check the coding)</td>
</tr>
<tr>
<td>applicationID</td>
<td>String</td>
<td>The name of the calling application (Acronym)</td>
</tr>
<tr>
<td>callerProgramName</td>
<td>String</td>
<td>The name of the program that calls the service</td>
</tr>
<tr>
<td>callerServerName</td>
<td>String</td>
<td>Host name or IP address of the server from which the request is sent</td>
</tr>
<tr>
<td>codABI</td>
<td>String</td>
<td>ABI code of the bank that requested the service</td>
</tr>
<tr>
<td>codUnitaOperativa</td>
<td>String</td>
<td>If the business operation is requested by a bank operator, the calling application must indicate the real user id (serial number). In the case of a virtual operator (Internet Banking) the technical matriculation must be specified</td>
</tr>
<tr>
<td>language</td>
<td>String</td>
<td>Service language called up (E for English, I for Italian)</td>
</tr>
</tbody>
</table><div class="alert alert-danger">
<p>Whether a field is in common with multiple connectors, you can put it before the <code>items</code> section, such as to make it valid for all connectors unless it is overwritten in the specific connector section. <strong>The usage of this section is recommended only in DEV environment</strong>.</p>
</div><p>Example of DataPower Rest Connector configuration:</p><pre><code class="json hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span>
<span data-linenumber="22"></span>
<span data-linenumber="23"></span>
<span data-linenumber="24"></span>
<span data-linenumber="25"></span>
<span data-linenumber="26"></span>
<span data-linenumber="27"></span>
<span data-linenumber="28"></span>
<span data-linenumber="29"></span>
<span data-linenumber="30"></span>
<span data-linenumber="31"></span>
<span data-linenumber="32"></span>
<span data-linenumber="33"></span>
<span data-linenumber="34"></span>
<span data-linenumber="35"></span></div><div class="code">  restDataPowerConfigurations:
      default:
        timeout: 5000
        mocked: true
      items:
        BitCoinDataPowerRestConnector:
          url: https://api.blockchain.info/stats
          #mocked: false
          path: bitCoinMocks/
          files:
            - BitCoinStub.json
            - BitCoinStub1.json
            - BitCoinStubErr.json
          header:
            prefixInter: TEST
            serviceVersion: 1.0
            serviceID: SID_TEST
            userID: TEST_UID
            isVirtualUser: false
            isPServiceCompanyIDCode: TEST_01
            isPCallerCompanyIDCode: TEST_03
            notISPCompanyIDCode: false
            isPBranchCode: TEST_02841
            customerID: TEST_CID
            businessProcessName: TEST_PROCESS
            businessProcessID: TEST_BID
            businessOperation: TEST_OP
            businessFileID: TEST_FID
            channelIDCode: TEST_01
            applicationID: TEST_G2G20
            callerProgramName: CALLER_TEST
            callerServerName: CALLER_TEST
            codABI: ABI_TEST
            codUnitaOperativa: COD_TEST
            language: I
</div></div></code></pre><h3 id="Transaction-Id1"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Transaction-Id1" title="Transaction-Id1"><i class="fa fa-link"></i></a>Transaction Id</h3><p>It is generated by default throught an architecturale method that can be Overrided as follows in the Connector declaration.</p><p>This is the dafault algorithm:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span>
<span data-linenumber="22"></span></div><div class="code">    <span class="hljs-function"><span class="hljs-keyword">protected</span> String <span class="hljs-title">generateInterkey</span><span class="hljs-params">(Date date, String serviceIdShort)</span> </span>{
        StringBuilder sb = <span class="hljs-keyword">new</span> StringBuilder();
        sb.append(prefixInter);

        String d = DateFormatUtils.format(date, <span class="hljs-string">"yyyyMMdd"</span>);
        sb.append(d);

        <span class="hljs-keyword">if</span> (StringUtils.isEmpty(serviceIdShort)) serviceIdShort = <span class="hljs-string">"ISPSV"</span>;
        <span class="hljs-keyword">if</span> (serviceIdShort.length() &gt; <span class="hljs-number">5</span>) serviceIdShort = serviceIdShort.substring(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>);
        <span class="hljs-keyword">if</span> (serviceIdShort.length() &lt; <span class="hljs-number">5</span>) serviceIdShort = StringUtils.rightPad(serviceIdShort, <span class="hljs-number">5</span>, <span class="hljs-string">"X"</span>);
        sb.append(serviceIdShort);
        bearLogger().info(<span class="hljs-string">"******************* "</span>+serviceIdShort+<span class="hljs-string">" **********"</span>);

        String time = DateFormatUtils.format(date, <span class="hljs-string">"HHmmss"</span>);
        sb.append(time);
        <span class="hljs-comment">//Put a casual number between 0-1000 instead of milliseconds, in order to manage uniqueness of INTER key for concurrent calls</span>
        Random randomGenerator = <span class="hljs-keyword">new</span> Random();
        <span class="hljs-keyword">int</span> randomInt = randomGenerator.nextInt(<span class="hljs-number">1000</span>);
        sb.append(StringUtils.leftPad(Integer.toString(randomInt), <span class="hljs-number">3</span>, <span class="hljs-string">'0'</span>));

        <span class="hljs-keyword">return</span> sb.toString();
    }
</div></div></code></pre><p>This method returns a string built as a concatenation of:</p><ul>
<li><em>serviceIdShort</em>: first 5 letters of the serviceId (possibly padded with <em>X</em>).</li>
<li>The current date.</li>
<li>The current time.</li>
<li>A casual number beetwin 0-999, in order to manage concurrent calls.</li>
</ul><p>In order to override the default method, you should do it in the DataPower REST connector declaration, as follows:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span></div><div class="code"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BitCoinDataPowerRestConnector</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseDataPowerRestConnector</span>&lt;<span class="hljs-title">Void</span>, <span class="hljs-title">BitCoin</span>, <span class="hljs-title">Void</span>, <span class="hljs-title">BitCoin</span>&gt; </span>{
   <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">generateInterkey</span><span class="hljs-params">(Date date, String serviceIdShort)</span> </span>{
        String transactionId = <span class="hljs-string">"OverridedTransactionID"</span>;<span class="hljs-comment">//your custom logic for transactionId generation</span>
        <span class="hljs-keyword">return</span> transactionId;
    }
}
</div></div></code></pre><div class="alert alert-info">
<p>For the DataPower REST Request/Response Transformers and Servcice realization you can follow the simple <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Rest-Connector">REST Connector documentation</a></p>
</div><h2 id="Event-Listener"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Event-Listener" title="Event-Listener"><i class="fa fa-link"></i></a>Event Listener</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].listener</p>
</div><p>An evnet listener allow to receive the kafka event and react to them by performing some custom application logic.</p><h3 id="Create-the-listener"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-listener" title="Create-the-listener"><i class="fa fa-link"></i></a>Create the listener</h3><p>Create a class in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.listener</code> package, that extends <code>com.intesasanpaolo.bear.eventlistener.BaseEventListener</code> and annotated with spring <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Component</code></a> annotation.</p><p>You are required to implement the <code>onReceived(byte[] payload, Headers headers)</code> method; this is the method that will be called at the receiving of each event and that will contains the business logic to react according to the event. Moreover, along with the payload, you can retrieve the headers of the message.</p><div class="alert alert-info">
<p>A complete implementation can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/listener/MessageEventListener.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">EventListener</a></p>
</div><h3 id="Configure-the-listener"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-listener" title="Configure-the-listener"><i class="fa fa-link"></i></a>Configure the listener</h3><p>To configure the listener to the event-streaming platform through the Event Connector, you have to edit the <code>application.yml</code> file inserting a new item under the <code>listeners.eventConfigurations.items</code> section; the name of the item must correspond to the name of the class created during the preious step and it must have the following properties:</p><ul>
<li><strong>bootstrapServers</strong>: The kafka connection string (e.g. <code>&lt;server1&gt;:&lt;port1&gt;,&lt;server2&gt;:&lt;port2&gt;</code>)</li>
<li><strong>topic</strong>:            The topic on which the events will be published</li>
<li><strong>groupId</strong>           The group-id the listener will belong to</li>
</ul><div class="alert alert-info">
<p>An example of Event Listener configuration can be seen at: <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/resources/application.yml?at=refs%2Fheads%2Fenv%2Fsvil#210-216" target="_blank" rel="noopener">EventListenerConfiguration</a></p>
</div><h3 id="Event-Context"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Event-Context" title="Event-Context"><i class="fa fa-link"></i></a>Event Context</h3><p>While handling the receival of an event, you can retrieve the contect infromation through the <code>EventContextHolder</code> class.</p><p>The class has the following methods:</p><ul>
<li><code>static ConsumerRecord getRecord()</code>: retrieve the event record</li>
<li><code>static ApplicationContext getApplicationContext()</code>: retrieve the application context infromation</li>
<li><code>static SessionContext getSessionContext()</code>: retrieve the session infromation along with the authenticated user. Read the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Session-Manager">Session Manager</a> section for additional info.</li>
</ul><h2 id="MQ-Listener"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#MQ-Listener" title="MQ-Listener"><i class="fa fa-link"></i></a>MQ Listener</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].listener</p>
</div><p>An MQ listener allow to receive a message form an IBM MQ Broker and react to them by performing some custom application logic.</p><h3 id="Create-the-listener1"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-listener1" title="Create-the-listener1"><i class="fa fa-link"></i></a>Create the listener</h3><p>Create a class in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.listener</code> package, that extends <code>com.intesasanpaolo.bear.mqlistener.BaseMQListener</code> and annotated with spring <a href="https://docs.spring.io/spring/docs/4.3.12.RELEASE/spring-framework-reference/htmlsingle/#beans-stereotype-annotations" target="_blank" rel="noopener"><code>@Component</code></a> annotation.</p><p>You are required to implement the <code>onReceived(Message message)</code> method; this is the method that will be called at the receiving of each message and that will contains the business logic to react according to the event.</p><h3 id="Configure-the-listener1"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-listener1" title="Configure-the-listener1"><i class="fa fa-link"></i></a>Configure the listener</h3><p>To configure the listener you have to edit the <code>application.yml</code> file inserting a new item under the <code>listeners.mqConfigurations.items</code> section; the name of the item must correspond to the name of the class created during the preious step and it must have the following properties:</p><ul>
<li><strong>queueManager</strong>: The MQ Queue Manager</li>
<li><strong>channel</strong>: The MQ Channel</li>
<li><strong>queue</strong>: The MQ Queue Name</li>
<li><strong>hostName</strong>: The address of the MQ Broker</li>
<li><strong>port</strong>: The port of the MQ Broker</li>
<li><strong>user</strong>: Credential for the connection (if necessary)</li>
<li><strong>password</strong>: Credential for the connection (if necessary)</li>
<li><strong>nonJMSClient</strong>: “1”|“0” You can set this flag to “1” in order to have a pure MQ (non-JMS) communication. This flag activates the mapping for the JMS headers into MQ ones, as described in this <a href="https://www.ibm.com/support/knowledgecenter/SSFKSJ_7.5.0/com.ibm.mq.dev.doc/q032020_.htm" target="_blank" rel="noopener">link</a>, and the MQRFH2 is completely dropped. It is an optional flag, the default value is “0”)</li>
</ul><pre><code class="yml hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span></div><div class="code">mqConfigurations:
    items:
      MQMessageListener:
        queueManager: <span class="hljs-string">"my_queue_manager"</span>
        channel: <span class="hljs-string">"my_channel"</span>
        queue: <span class="hljs-string">"my_queue"</span>
        hostName: <span class="hljs-string">"my_endpoint"</span>
        port: my_point
        user: <span class="hljs-string">"my_user"</span> (it can be <span class="hljs-keyword">empty</span>)
        password: <span class="hljs-string">"my_password"</span> (it can be <span class="hljs-keyword">empty</span>)
        nonJMSClient: <span class="hljs-string">"1"</span> (optional)
</div></div></code></pre><h3 id="MQlt-gtKafka-Archetypes"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#MQlt-gtKafka-Archetypes" title="MQlt-gtKafka-Archetypes"><i class="fa fa-link"></i></a>MQ&lt;-&gt;Kafka Archetypes</h3><p>You can start your project from an archetype, as described at the  <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Start-up-base-structure">beginning</a></p><ul>
<li><strong>mqToKafka</strong>: In the first you can find an MQ Listener with the overrided method <code>onReceived(Message message)</code>; Here you can put some business logic before forwarding the message to a Kafka Topic, through a <code>messageEventConnector</code>, with the parameter defined in the <code>application.yml</code></li>
</ul><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span>
<span data-linenumber="22"></span>
<span data-linenumber="23"></span>
<span data-linenumber="24"></span></div><div class="code"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MQMessageListener</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseMQListener</span> </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onReceived</span><span class="hljs-params">(Message message)</span> </span>{
        TextMessage msg = (TextMessage) message;
        <span class="hljs-keyword">try</span> {
            logger.info(<span class="hljs-string">"MQ MSG RECEIVED : "</span>+msg.getText());
            <span class="hljs-comment">//ADD MY CUSTOM LOGIC HERE</span>
            <span class="hljs-comment">//PUSH TO KAFKA TOPIC</span>
            messageEventConnector.call(msg.getText(), messageEventRequestTransformer, messageEventResponseTransformer);
        } <span class="hljs-keyword">catch</span> (JMSException ex) {
            logger.error(ex.getMessage());
        }
    }

    <span class="hljs-meta">@Autowired</span>
    MessageEventConnector messageEventConnector;
    <span class="hljs-meta">@Autowired</span>
    MessageEventResponseTransformer messageEventResponseTransformer;
    <span class="hljs-meta">@Autowired</span>
    MessageEventRequestTransformer messageEventRequestTransformer;

}
</div></div></code></pre><pre><code class="yml hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span></div><div class="code"><span class="hljs-section">connectors:</span>
  eventConfigurations:
    items:
      MessageEventConnector:
        bootstrapServers: <span class="hljs-string">"my_servers"</span>
        topic: <span class="hljs-string">"my_topic"</span>

<span class="hljs-section">listeners:</span>
  mqConfigurations:
    items:
      MQMessageListener:
        queueManager: <span class="hljs-string">"my_queue_manager"</span>
        channel: <span class="hljs-string">"my_channel"</span>
        queue: <span class="hljs-string">"my_queue"</span>
        hostName: <span class="hljs-string">"my_endpoint"</span>
        port: my_port
        user: <span class="hljs-string">"my_user"</span>
        password: <span class="hljs-string">"my_password"</span>
</div></div></code></pre><ul>
<li><strong>kafkaToMq</strong>: In the same way, for the kafka-to-mq you can find an event Listener with the overrided method <code>onReceived(byte[] payload, Headers headers)</code>; Here you can put some business logic before forwarding the message to a mq queue, through a <code>mqConnector</code>, with the parameter defined in the <code>application.yml</code></li>
</ul><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span></div><div class="code"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessageEventListener</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseEventListener</span> </span>{

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Logger logger = LoggerUtils.getLogger(MessageEventListener.class);

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onReceived</span><span class="hljs-params">(<span class="hljs-keyword">byte</span>[] payload, Headers headers)</span> </span>{
        logger.info(<span class="hljs-string">"onReceived message: {} headers: {}"</span>, <span class="hljs-keyword">new</span> String(payload), headers.toArray());
        <span class="hljs-comment">//ADD MY CUSTOM LOGIC HERE</span>
        <span class="hljs-comment">//PUSH TO MQ QUEUE</span>
        mqConnector.call(<span class="hljs-keyword">new</span> String(payload), mqSenderRequestTransformer, mqSenderResponseTransformer);
    }

    <span class="hljs-meta">@Autowired</span>
    MQConnector mqConnector;
    <span class="hljs-meta">@Autowired</span>
    MQSenderRequestTransformer mqSenderRequestTransformer;
    <span class="hljs-meta">@Autowired</span>
    MQSenderResponseTransformer mqSenderResponseTransformer;

}
</div></div></code></pre><pre><code class="yaml hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span>
<span data-linenumber="19"></span>
<span data-linenumber="20"></span>
<span data-linenumber="21"></span>
<span data-linenumber="22"></span></div><div class="code">connectors:
  mqConfiguration:
    <span class="hljs-keyword">default</span>:
      mocked: <span class="hljs-literal">false</span>
    items:
      MQConnector:
        queueManager: <span class="hljs-string">"my_queue_manager"</span>
        channel: <span class="hljs-string">"my_channel"</span>
        queue: <span class="hljs-string">"my_queue"</span>
        hostName: <span class="hljs-string">"my_endpoint"</span>
        port: my_port
        user: <span class="hljs-string">"my_user"</span>
        password: <span class="hljs-string">"my_password"</span>
        timeout: n

listeners:
  eventConfigurations:
    items:
      MessageEventListener:
        topic: <span class="hljs-string">"DRH_CONNECTOR_MQ_KAFKA_BEAR0"</span>
        groupId: message-<span class="hljs-keyword">group</span>-id
        bootstrapServers: <span class="hljs-string">'&lt;SERVER1_IP&gt;:&lt;PORT1&gt;,&lt;SERVER2_IP&gt;:&lt;PORT2&gt;,&lt;SERVER3_IP&gt;:&lt;PORT3&gt;'</span>
</div></div></code></pre><h2 id="Shared-Library"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Shared-Library" title="Shared-Library"><i class="fa fa-link"></i></a>Shared Library</h2><p>In order to share common functionalities between different applications, developers can create a library. This library will be published as an artifact, following the usual pipeline, so that other projects can declare it as a dependency in their POM.</p><p>To create a library, you can start with the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#start-up-base-structure">appropriate archetype</a>. The resulting library will have all the useful BEAR dependencies, so that you can also share, for example, some Services.</p><p>Once released the library, it is possible to reference its classes inside other projects if the corresponding dependency is added to the project POM:</p><pre><code class="xml hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span></div><div class="code"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.intesasanpaolo.bear.youracronym<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>yourname-lib<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</div></div></code></pre><p>It is also possible to test the library locally inside a project that uses it, to avoid useless/harmful releases: just build your library with a version (e.g. 1.0.0-ISPDEV) and <em><strong>locally</strong></em> change the referenced version above with that specific version (instead of RELEASE). In this way, the project that uses the library will actually use its local changes: you can test them and, once you are ready, release them.</p><h2 id="Session-Manager"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Session-Manager" title="Session-Manager"><i class="fa fa-link"></i></a>Session Manager</h2><p>Session Manager is an architectural component that allow developers access <em>current user session information</em> (a.k.a. <strong>SessionContext</strong>). As micro services are tipically <em>stateless</em> this feature is only available for <strong>BE4FE</strong>. Rest services that need to access session information can use utility method in Rest Controller.</p><pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulController</span> </span>{

    <span class="hljs-meta">@GetMapping</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> MyResource <span class="hljs-title">getResource</span><span class="hljs-params">(String id)</span> </span>{
        SessionContext sessionContext = getSessionContext();
        <span class="hljs-comment">//... return</span>
    }
}
</code></pre><p>In the above example the classes <em>StatefulController</em> and <em>SessionContext</em> are provided by jar dependencies that comes with parent POM. For compatibility reason class name and package are the same as the one previously contained in bear-arch-core.<br>
You can retrieve the session infomation in two ways:</p><ol>
<li>Add request <code>X-BEAR-SESSION-TOKEN</code> header set to <code>SessionID</code></li>
<li>Add <code>cdil0-session</code> cookie set to <code>SessionID</code></li>
</ol><p>In order to configure the SessionManager correctly, simply set the following parameters in the application.yml:</p><pre><code class="yaml hljs">session-manager:
  mocked: <span class="hljs-literal">true</span>|<span class="hljs-literal">false</span>
  allow-guest-session: fatrue|<span class="hljs-literal">false</span>
  allow-empty-session-<span class="hljs-keyword">id</span>: <span class="hljs-literal">true</span>|<span class="hljs-literal">false</span>
  endpoint: ${ENDPOINT_&lt;APP&gt;_SESSIONMANAGER:http:<span class="hljs-comment">//showcase-sessionmanager-v1-bear0-svil.cloudapps-be-test.intesasanpaolo.com/api/internalsession}</span>
</code></pre><ul>
<li><strong>mocked</strong>: If true, the session manager is mocked and remote endpoint is not interrogated and the method <code>getSessionContext()</code> returns a mocked context.</li>
<li><strong>allow-guest-session</strong>: if set to true, Session Token in Http Request can be empty, and it will be automatically filled with a random value.</li>
<li><strong>allow-empty-session-id</strong>: in order to test the sessionmanager it allows to upload a session even if the user is not logged.</li>
<li><strong>endpoint</strong>: URL of the Session Manager Service.</li>
</ul><h2 id="Transaction-Manager"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Transaction-Manager" title="Transaction-Manager"><i class="fa fa-link"></i></a>Transaction Manager</h2><p>Transaction Manager is an architectural component that allows developers to store and retrieve transaction information.<br>
It is used in 2-steps dispositive operations (a.k.a. simulation and execution).<br>
In the simulation step, the transaction info will be stored; in the execution step, it will be retrieved and deleted.</p><pre><code class="java hljs"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulController</span> </span>{

    <span class="hljs-meta">@Autowired</span>
    TransactionManagerService transactionManagerService;

    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ResponseEntity&lt;MySimResource&gt; <span class="hljs-title">simulation</span><span class="hljs-params">(@RequestBody MyDto myDto)</span> <span class="hljs-keyword">throws</span> Exception </span>{
        SimulationCommand command = beanFactory.getBean(SimulationCommand.class);

        MyTransactionInfo trInfo = command.execute();

        String idOp = transactionManagerService.putTransactionInfo(trInfo);

        <span class="hljs-comment">//... return resource containing idOp</span>
    }    

    <span class="hljs-meta">@PatchMapping</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ResponseEntity&lt;MyExecResource&gt; <span class="hljs-title">execution</span><span class="hljs-params">(@RequestBody MyIdOpDto myIdOpDto)</span> <span class="hljs-keyword">throws</span> Exception </span>{
        MyTransactionInfo trInfo = transactionManagerService.getTransactionInfo(myIdOpDto.getIdOp());

        ExecutionCommand command = beanFactory.getBean(ExecutionCommand.class, trInfo);

        command.execute();

        transactionManagerService.deleteTransactionInfo(myIdOpDto.getIdOp());

        <span class="hljs-comment">//... return resource</span>
    }
}
</code></pre><p>In the above example the class <em>TransactionManagerService</em> is implemented by the developers simply extending <code>BaseTransactionManagerService</code> with the transaction information class definition.<br>
If a service needs to store different transaction information object types, the developers will have to define more TransactionManagerServices (one for each object type).</p><pre><code class="java hljs"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TransactionManagerService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseTransactionManagerService</span>&lt;<span class="hljs-title">MyTransactionInfo</span>&gt; </span>{

}
</code></pre><p>In order to configure the TransactionManager correctly, set the following parameters in the application.yml:</p><pre><code class="yaml hljs">transaction-manager:
  enabled: <span class="hljs-literal">true</span>|<span class="hljs-literal">false</span>
  url: <span class="hljs-variable">${ENDPOINT_TRANSACTION_REGISTRY_SERVICE}</span>
  mocked: <span class="hljs-literal">true</span>|<span class="hljs-literal">false</span>
</code></pre><ul>
<li><strong>enabled</strong>: If true, the beans used by the TransactionManager are instantiated.</li>
<li><strong>url</strong>: URL of the Transaction Registry Service.</li>
<li><strong>mocked</strong>: If true, the transaction manager don’t call the Transaction Registry Service, but it uses an internal cache.</li>
</ul><h3 id="2-Steps-Operation-Design"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#2-Steps-Operation-Design" title="2-Steps-Operation-Design"><i class="fa fa-link"></i></a>2-Steps Operation Design</h3><p>If a functionality is developed full stack (with both <em>BE4FE</em> and <em>core</em> components), the correct design recommends that the logic of saving and retrieving the transaction information is implemented in the core component.</p><h2 id="Host-Bridge"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Host-Bridge" title="Host-Bridge"><i class="fa fa-link"></i></a>Host Bridge</h2><p>In order to invoke Business Services (BS), developers can create a bridge application starting from the appropriate Maven archetype. This bridge, that runs on JBoss, uses the so-called <em>Connector Library</em>, developed to interact with Host through message queues. Since each BS has its own input and output data formats, the Connector Library needs a <em>JDO</em>, which is a jar containing plain java classes that map input and output fields of the specific BS.</p><p>The Host Bridge is a temporary substitute of <em>ZConnect</em>, the new layer that will be available to interact to Host through HTTP Requests. As such, the Host Bridge provides the same feature.</p><p>Since it runs on JBoss, it is not a standalone JAR. It is instead an EAR, containing both a WAR with the appropriate Rest Controllers and the EJB of the Connector Library. <em><strong>All these details are managed by the files generated by the archetype, so that developers just have to configure the queues and provide the JDOs. A BEAR plugin will generate the required java classes.</strong></em></p><div class="alert alert-danger">
<p>Since JDOs are generated automatically, they should have a standard naming convention/structure used by the plugin to generate the java classes. It can happen that the JDOs are not correctly built: in that case, the following ERROR message will be shown during build phase (when the plugin is triggered) for each non-standard JDO:</p>
<p>“[PROJECT WILL NOT BUILD] - Misconfigured DTO classes for com.intesasanpaolo.bear.acro0.proj:AFDY:jar:04:system, expected 6 in (case insensitive): [INHEADER, INPBST, OUTHEADER, OUTBST, OUTESI, OUTSEG], but just these were found: [OUTBST, OUTSEG]. Analize the JDO to find the right names of the classes, exclude the JDO from plugin configuration and modify the generated classes.”</p>
<p>Build phase will fail, showing you the naming issues and where to resolve them.</p>
</div><div class="alert alert-danger">
<p>To avoid losing files and other data, <em><strong>the plugin will never clean the generated files</strong></em>. If you change the plugin configuration or JDO dependencies, please <em><strong>manually delete the generated classes</strong></em> of the WAR module before pushing or building again. <em><strong>Do the same for the connector/queue configuration files.</strong></em></p>
</div><h3 id="Exposed-services"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Exposed-services" title="Exposed-services"><i class="fa fa-link"></i></a>Exposed services</h3><p>The resulting application will expose the BSs as <code>HTTP POST</code> services on <code>/bridge/&lt;nameOfJdo&gt;</code>. The <code>&lt;nameOfJdo&gt;</code> is either configured in the BEAR plugin configuration (see <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#WAR-module">below</a>) or, if not set, it is the name of the main class in the JDO JAR. Please refer to the generated swagger for further details.</p><div class="alert alert-danger">
<p><em><strong>IMPORTANT</strong></em>: the <code>COD_RICH_CANALE</code> must be equal to the code of your middleware channel (e.g. 04).</p>
</div><p>These are an example request and an example response, that simply remap the JDO fields as header and body:</p><h4 id="Request"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request" title="Request"><i class="fa fa-link"></i></a>Request</h4><pre><code class="json hljs">{
  <span class="hljs-attr">"header"</span>: {
    <span class="hljs-attr">"CODICESTATO"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"CODICE_SOCIETA"</span>: <span class="hljs-string">"01"</span>,
    <span class="hljs-attr">"CODICE_SPORTELLO"</span>: <span class="hljs-string">"02841"</span>,
    <span class="hljs-attr">"CODICE_TIPO_CANALE"</span>: <span class="hljs-string">"04"</span>,
    <span class="hljs-attr">"CODICE_UO_RICH"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"CODICE_USERID"</span>: <span class="hljs-string">"U023931"</span>,
    <span class="hljs-attr">"COD_ABI"</span>: <span class="hljs-string">"01025"</span>,
    <span class="hljs-attr">"COD_AZIENDA_DEST"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"COD_BSM"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"COD_CLI_RICH"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"COD_OPERATIVITA"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"COD_RICH_CANALE"</span>: <span class="hljs-string">"04"</span>,
    <span class="hljs-attr">"COD_RIC_TRAC"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"COD_RIS_RICH"</span>: <span class="hljs-string">"10.31.207.63"</span>,
    <span class="hljs-attr">"COD_SSA_SERVIZIO"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"COD_TERM_CICS"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"COD_TIPO_LINGUA"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"COD_VERSIONE_BS"</span>: <span class="hljs-string">"04"</span>,
    <span class="hljs-attr">"COD_VERS_SIC"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"DATA_CONT"</span>: <span class="hljs-string">"07022019"</span>,
    <span class="hljs-attr">"FLAG_PAPERLESS"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"FLAG_RACF"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"ID_SERVIZIO"</span>: <span class="hljs-string">"AFDYANDG"</span>,
    <span class="hljs-attr">"IND_COMPRESS_INP"</span>: <span class="hljs-string">"N"</span>,
    <span class="hljs-attr">"IND_COMPRESS_OUT"</span>: <span class="hljs-string">"N"</span>,
    <span class="hljs-attr">"IND_INOLTRO_REPLY"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"IND_MQ_SINCRONO"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"IND_ROUTING_MSG"</span>: <span class="hljs-string">"N"</span>,
    <span class="hljs-attr">"LUNGHEZZA_MSG"</span>: <span class="hljs-number">70</span>,
    <span class="hljs-attr">"MQM_NAME_DEST"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"RETCODE"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">"SIC_KEY"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SIC_MAC"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SIC_TIMESTAMP"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"TIPO_SIC_APPL_INP"</span>: <span class="hljs-string">"00"</span>,
    <span class="hljs-attr">"TIPO_SIC_APPL_OUT"</span>: <span class="hljs-string">"00"</span>
  }, <span class="hljs-attr">"body"</span>: {
    <span class="hljs-attr">"CODICE_CR"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"CODICE_FISCALE"</span>: <span class="hljs-string">"BRTDNL63S45C665S"</span>,
    <span class="hljs-attr">"COD_OPERAT_EST"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"DATA_RIFERIMENTO"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"NDG"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"NUMERO_CCIIAA"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"NUM_CONTO"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"PROV_CCIIAA"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SPORTELLO"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SW_AFAAACA"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SW_AFAAACR"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SW_AFAAADE"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SW_AFAAADG"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SW_AFAAADO"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SW_AFAAAPF"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SW_AFAAAPG"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SW_AFAAAPY"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SW_AFAAARE"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SW_AFAAART"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SW_AFAAATE"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SW_AFAAAUD"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SW_ALTRI"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SW_GESTORE"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"SW_IND_RAP"</span>: <span class="hljs-string">""</span>,
    <span class="hljs-attr">"TIPO_RAP"</span>: <span class="hljs-string">""</span>
  }
}
</code></pre><h4 id="Response"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Response" title="Response"><i class="fa fa-link"></i></a>Response</h4><pre><code class="json hljs">{
    <span class="hljs-attr">"header"</span>: {
        <span class="hljs-attr">"RETCODE"</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">"CODICESTATO"</span>: <span class="hljs-string">"0010"</span>,
        <span class="hljs-attr">"ID_SERVIZIO"</span>: <span class="hljs-string">"AFDYANDG  "</span>,
        <span class="hljs-attr">"CODICE_TIPO_CANALE"</span>: <span class="hljs-string">"04"</span>,
        <span class="hljs-attr">"CODICE_SOCIETA"</span>: <span class="hljs-string">"01"</span>,
        <span class="hljs-attr">"CODICE_SPORTELLO"</span>: <span class="hljs-string">"02841"</span>,
        <span class="hljs-attr">"CODICE_UO_RICH"</span>: <span class="hljs-string">"     "</span>,
        <span class="hljs-attr">"CODICE_USERID"</span>: <span class="hljs-string">"U023931 "</span>,
        <span class="hljs-attr">"MQM_NAME_DEST"</span>: <span class="hljs-string">"                                                "</span>,
        <span class="hljs-attr">"COD_RIS_RICH"</span>: <span class="hljs-string">"10.31.207.63            "</span>,
        <span class="hljs-attr">"COD_RICH_CANALE"</span>: <span class="hljs-string">"04                                              "</span>,
        <span class="hljs-attr">"DATA_CONT"</span>: <span class="hljs-string">"07022019"</span>,
        <span class="hljs-attr">"LUNGHEZZA_MSG"</span>: <span class="hljs-number">162</span>,
        <span class="hljs-attr">"IND_MQ_SINCRONO"</span>: <span class="hljs-string">" "</span>,
        <span class="hljs-attr">"COD_TIPO_LINGUA"</span>: <span class="hljs-string">"I"</span>,
        <span class="hljs-attr">"TIPO_SIC_APPL_INP"</span>: <span class="hljs-string">"00"</span>,
        <span class="hljs-attr">"TIPO_SIC_APPL_OUT"</span>: <span class="hljs-string">"00"</span>,
        <span class="hljs-attr">"IND_COMPRESS_INP"</span>: <span class="hljs-string">"N"</span>,
        <span class="hljs-attr">"IND_COMPRESS_OUT"</span>: <span class="hljs-string">"N"</span>,
        <span class="hljs-attr">"IND_ROUTING_MSG"</span>: <span class="hljs-string">"N"</span>,
        <span class="hljs-attr">"COD_SSA_SERVIZIO"</span>: <span class="hljs-string">"H  "</span>,
        <span class="hljs-attr">"IND_INOLTRO_REPLY"</span>: <span class="hljs-string">"W"</span>,
        <span class="hljs-attr">"COD_ABI"</span>: <span class="hljs-string">"01025"</span>,
        <span class="hljs-attr">"COD_AZIENDA_DEST"</span>: <span class="hljs-string">"  "</span>,
        <span class="hljs-attr">"COD_OPERATIVITA"</span>: <span class="hljs-string">" "</span>,
        <span class="hljs-attr">"FLAG_PAPERLESS"</span>: <span class="hljs-string">" "</span>,
        <span class="hljs-attr">"FLAG_RACF"</span>: <span class="hljs-string">"K"</span>,
        <span class="hljs-attr">"COD_RIC_TRAC"</span>: <span class="hljs-string">"00001"</span>,
        <span class="hljs-attr">"COD_BSM"</span>: <span class="hljs-string">"4034022019-02-1311.07.56040007225SA0MSA0H       "</span>,
        <span class="hljs-attr">"SIC_TIMESTAMP"</span>: <span class="hljs-string">"U               "</span>,
        <span class="hljs-attr">"SIC_KEY"</span>: <span class="hljs-string">"R               "</span>,
        <span class="hljs-attr">"SIC_MAC"</span>: <span class="hljs-string">"T               "</span>,
        <span class="hljs-attr">"COD_VERS_SIC"</span>: <span class="hljs-string">"M   "</span>,
        <span class="hljs-attr">"COD_CLI_RICH"</span>: <span class="hljs-string">"D                "</span>,
        <span class="hljs-attr">"COD_TERM_CICS"</span>: <span class="hljs-string">"L   "</span>,
        <span class="hljs-attr">"COD_VERSIONE_BS"</span>: <span class="hljs-string">"04"</span>
    },
    <span class="hljs-attr">"body"</span>: {
        <span class="hljs-attr">"NDG"</span>: <span class="hljs-string">"0003070844083000"</span>,
        <span class="hljs-attr">"CODICE_FISCALE"</span>: <span class="hljs-string">"BRTDNL63S45C665S"</span>,
        <span class="hljs-attr">"STATO_NDG"</span>: <span class="hljs-string">"1"</span>,
        <span class="hljs-attr">"COMPLETEZZA_DATI"</span>: <span class="hljs-string">"2"</span>
    },
    <span class="hljs-attr">"outcome"</span>: {
        <span class="hljs-attr">"ESITO"</span>: <span class="hljs-string">"Y1000 RICHIESTA ESEGUITA      "</span>
    },
    <span class="hljs-attr">"report"</span>: {}
}
</code></pre><h3 id="Environment-setup"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Environment-setup" title="Environment-setup"><i class="fa fa-link"></i></a>Environment setup</h3><p>Since the Connector Library was thougth to be used on JBoss, there are some differences in repository and environment setup for a Host Bridge with respect to normal BEAR microservices. You can setup everything with these steps:</p><ol>
<li>Ask <em>“Coordinamento Progetti”</em> to create a microservice with type <strong>JBoss</strong> and name following the <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Naming-conventions">repository name conventions</a>. Also, ask to configure the following variables:
<ul>
<li><code>connector.server.type=ejb-local</code></li>
<li><code>connector.server.name=ConnectorService</code></li>
<li><code>configfile.path=/home/jboss/app-config/CONFIGURATION-FILES/&lt;env&gt;/</code>
<ul>
<li>Note: for example, if you have three envs, the final part should be <code>/svil/</code>, <code>/test/</code> or <code>/prod/</code> for SVIL, TEST and PROD envs respectively.</li>
</ul>
</li>
</ul>
</li>
<li>Ask also <em>“Coordinamento Progetti”</em> to configure the queue managers and the channels (middleware channel and client channel) for your acronym.</li>
<li>Once you have the queue managers and the channels, ask to configure a local queue on all the queue managers with name <code>QLOCAL.DATAGRAM.WUO.BSOUTPUT.&lt;NO_NUMBER_ACRONYM&gt;</code> (e.g. <code>QLOCAL.DATAGRAM.WUO.BSOUTPUT.CELL</code> if your acronym is <code>CELL0</code>) and alias <code>DATAGRAM.WUO.BSOUTPUT.&lt;NO_NUMBER_ACRONYM&gt;</code>. You can ask through Ticket for the queue managers of development environment and through UDC for the other ones.</li>
<li>Also, you have to retrieve the aliases of the Host queues where to write your messages for all the Business Services you have to invoke.</li>
</ol><h3 id="Configuring-the-Host-Bridge"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configuring-the-Host-Bridge" title="Configuring-the-Host-Bridge"><i class="fa fa-link"></i></a>Configuring the Host Bridge</h3><p>Once you have created your project from the archetype, you just need to configure some files to get ready. At build time, the BEAR <code>host-bridge-plugin</code> will create the appropriate classes and files to handle incoming requests and invoke the BSs corresponding to the configured JDOs.</p><p>The generated project will have the following structure, with three internal modules that will be referenced below in the guide:</p><ul>
<li>Main module/project: <code>${artifactId}</code>
<ul>
<li>EAR module: <code>${artifactId}-ear</code></li>
<li>JDOs module: <code>${artifactId}-jdos</code></li>
<li>WAR module: <code>${artifactId}-war</code></li>
</ul>
</li>
</ul><p>This is all the information you need to have:</p><ul>
<li>For the queue configuration:
<ul>
<li>Queue managers hostname and port</li>
<li>Client channel name</li>
<li>Alises of the queues of the BSs (not useful for the plugin, but necessary to configure the extra file <code>services.properties</code> - more information below)</li>
</ul>
</li>
<li>For the JDOs configuration, for each JDO:
<ul>
<li><code>groupId</code>, <code>artifactId</code>, <code>version</code>. If the JDO is not on artifactory, and so you have directly its JAR, use the project <code>groupId</code> as <code>groupId</code> and use the first four characters of the JAR name as <code>artifactId</code>, e.g. <code>IK70</code> for <code>IK70-00.00002.jar</code>. You can use an arbitrary <code>version</code>, e.g. the remaining numbers after the dash (<code>-</code>) in the name of the JAR.</li>
</ul>
</li>
</ul><p>Once this information is inserted following the instructions below, you can deploy your Host Bridge, since the maven build will generate the needed files and classes.</p><h4 id="Queue-configurations"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Queue-configurations" title="Queue-configurations"><i class="fa fa-link"></i></a>Queue configurations</h4><p>The Connector Library reads some files to know the queue configurations. You can manually configure those files (discouraged, unless you have custom/specific properties to change) or let the appropriate plugin do it for you.</p><div class="alert alert-danger">
<p>Note: one of these files, <code>services.properties</code>, with the aliases of the queues to write to, is handled by the IT team directly and so it is not generated by the plugin. <em><strong>Without this file, the Host Bridge will not work.</strong></em> You should know how to populate this file with the alises of the queues of the BSs, with a line for each JDO having this string: <code>&lt;JDO-main-class-name-with-package&gt;.qoutRoot=&lt;bs-queue-alias&gt;</code>, where <code>&lt;bs-queue-alias&gt;</code> is normally <code>DATAGRAM.&lt;SISTEMA&gt;&lt;SOTTOSISTEMA&gt;.&lt;BS-ID&gt;</code>.</p>
<p>An example:  <code>com.dsi.business.SSA_AF.integration.jdo.P_AFDYS04.C_AFDYS04.qoutRoot=DATAGRAM.FAF.AFDYANDG</code></p>
<p><em><strong>Please remember that there should be a <code>services.properties</code> file in each subfolder of the <code>CONFIGURATION-FILES</code> directory.</strong></em></p>
</div><p>Add all your required envs and queue configurations in the main POM of the project. You have to add the <code>channel</code>, which is the middleware channel, the <code>bsOutput</code>, which is the alias of the local queue where to expect the BSs output, and the <code>notifyChannel</code> and <code>traceChannel</code> which are normally similar to the <code>channel</code> but end with <code>.NFY</code> and <code>.TRC</code> respectively instead of <code>.CONN</code>. Check with IT team to ensure the naming conventions. Also, configure each env with the queue managers details. <em><strong>These tags must have the same name as the <code>&lt;env&gt;</code> in the <code>configfile.path</code> system properties you have defined</strong></em>. So, for example:</p><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.intesasanpaolo.bear.plugin<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>host-bridge-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.11.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">inherited</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">inherited</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>generate-connector-configuration<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>generate-resources<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>configure-connector<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">outputDirectory</span>&gt;</span>CONFIGURATION-FILES<span class="hljs-tag">&lt;/<span class="hljs-name">outputDirectory</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">jbossDirectory</span>&gt;</span>/home/jboss/app-config/CONFIGURATION-FILES<span class="hljs-tag">&lt;/<span class="hljs-name">jbossDirectory</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">queueConfig</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">channel</span>&gt;</span>CH.FFOL.CONN<span class="hljs-tag">&lt;/<span class="hljs-name">channel</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">bsOutput</span>&gt;</span>DATAGRAM.WUO.BSOUTPUT.FFOL<span class="hljs-tag">&lt;/<span class="hljs-name">bsOutput</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">notifyChannel</span>&gt;</span>CH.FFOL.NFY<span class="hljs-tag">&lt;/<span class="hljs-name">notifyChannel</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">traceChannel</span>&gt;</span>CH.FFOL.TRC<span class="hljs-tag">&lt;/<span class="hljs-name">traceChannel</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">queueConfig</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">environments</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">svil</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">queueManagers</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">queueManager</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">hostname</span>&gt;</span>sql00018.sede.corp.sanpaoloimi.com<span class="hljs-tag">&lt;/<span class="hljs-name">hostname</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span>1414<span class="hljs-tag">&lt;/<span class="hljs-name">port</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>SQL00018<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">queueManager</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">queueManager</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">hostname</span>&gt;</span>sql00019.sede.corp.sanpaoloimi.com<span class="hljs-tag">&lt;/<span class="hljs-name">hostname</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span>1414<span class="hljs-tag">&lt;/<span class="hljs-name">port</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>SQL00018<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">queueManager</span>&gt;</span>
                                <span class="hljs-tag">&lt;/<span class="hljs-name">queueManagers</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">svil</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">test</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">queueManagers</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">queueManager</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">hostname</span>&gt;</span>tql00018.sede.corp.sanpaoloimi.com<span class="hljs-tag">&lt;/<span class="hljs-name">hostname</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">port</span>&gt;</span>1414<span class="hljs-tag">&lt;/<span class="hljs-name">port</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>TQL00018<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">queueManager</span>&gt;</span>
                                <span class="hljs-tag">&lt;/<span class="hljs-name">queueManagers</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">test</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">prod</span>&gt;</span>
                            ...
                            <span class="hljs-tag">&lt;/<span class="hljs-name">prod</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre><h4 id="JDO-configurations"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JDO-configurations" title="JDO-configurations"><i class="fa fa-link"></i></a>JDO configurations</h4><p><em><strong>All the three internal modules have to be configured</strong></em> with JDO-related data. Also, if the JDOs are not on artifactory, you have to retrieve the JARs from WSRR. In that case, put all your JDO JARs inside the <code>lib</code> folder of the <code>-jdos</code> module.</p><h5 id="JDOS-module"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JDOS-module" title="JDOS-module"><i class="fa fa-link"></i></a>JDOS module</h5><p>Add all your JDOs dependencies in the POM of the <code>-jdos</code> module. If the JDOs are not on artifactory but on the <code>lib</code> folder, set the <code>&lt;scope&gt;</code> to <code>system</code> and the <code>&lt;systemPath&gt;</code> to <code>${basedir}/lib/&lt;name-of-the-jdo&gt;.jar</code>. So, for example:</p><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.intesasanpaolo.bear.bear0.proj<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>AFDY<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>04<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>system<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span> <span class="hljs-comment">&lt;!-- If NOT on artifactory --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">systemPath</span>&gt;</span>${basedir}/lib/AFDY-04.00001.jar<span class="hljs-tag">&lt;/<span class="hljs-name">systemPath</span>&gt;</span> <span class="hljs-comment">&lt;!-- If NOT on artifactory --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre><h5 id="WAR-module"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#WAR-module" title="WAR-module"><i class="fa fa-link"></i></a>WAR module</h5><p>To generate the necessary classes, configure the <code>host-bridge-plugin</code> on the POM of <code>-war</code> module. You should add a <code>&lt;jdo&gt;</code> element with the JDO’s <code>&lt;artifactId&gt;</code> for each JDO you need.</p><p>Optionally, you can set also the <code>&lt;name&gt;</code>, so that generated classes will have this prefix (e.g. <code>&lt;name&gt;Controller</code>, <code>&lt;name&gt;Service</code>) and the generated service will have <code>/bridge/&lt;name&gt;</code> as URI. If it is not set, the name of the main class in the JDO will be used instead.</p><p>An example:</p><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    ...
    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
        ...
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.intesasanpaolo.bear.plugin<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>host-bridge-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.10.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                ...
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>generate-from-jdo<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>generate-sources<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>convert-jdo<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">jdos</span>&gt;</span>
                            ...
                            <span class="hljs-tag">&lt;<span class="hljs-name">jdo</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>AFDY<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>CensimentoAnag<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">jdo</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">jdo</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>AFFJ<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">jdo</span>&gt;</span>
                            ...
                        <span class="hljs-tag">&lt;/<span class="hljs-name">jdos</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
                ...
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        ...
    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
</code></pre><h5 id="EAR-module"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#EAR-module" title="EAR-module"><i class="fa fa-link"></i></a>EAR module</h5><p>Because of the structure of the Connector Library, JDOs must be put into the EAR before the deployment. To do this, simply put a <code>&lt;jarModule&gt;</code> element inside the <code>maven-ear-plugin</code> configuration in the POM of the <code>-ear</code> module. So, for example:</p><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    ...
    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
        ...
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-ear-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.10<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">defaultLibBundleDir</span>&gt;</span>APP-INF/lib<span class="hljs-tag">&lt;/<span class="hljs-name">defaultLibBundleDir</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">webModule</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.intesasanpaolo.bear.bear0.hostbridge<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>showcase-jboss-war<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">contextRoot</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">contextRoot</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">webModule</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">ejbModule</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.intesasanpaolo.cojb0.ConnettoreJBoss<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>ConnectorServerJBoss<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">ejbModule</span>&gt;</span>
                        <span class="hljs-comment">&lt;!-- List of JDOs, required by the connector --&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">jarModule</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.intesasanpaolo.bear.acro0.proj<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>AFDY<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">jarModule</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">jarModule</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.intesasanpaolo.bear.acro0.proj<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>AFRY<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">jarModule</span>&gt;</span>
                        ...
                    <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">skinnyWars</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">skinnyWars</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        ...
    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
</code></pre><h3 id="Generated-files"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Generated-files" title="Generated-files"><i class="fa fa-link"></i></a>Generated files</h3><p>This section shows the structure of files generated by the BEAR plugin, useful to customize them or if your JDOs are not standard.</p><p>If you need to modify the queue configuration files, remove the <code>configure-connector</code> <code>&lt;execution&gt;</code> from the <code>host-bridge-plugin</code>; if you need to modify the controllers/java files, remove the corresponding <code>&lt;jdo&gt;</code> section in the <code>create-jdo</code> <code>&lt;execution&gt;</code> (or directly the <code>create-jdo</code> <code>&lt;execution&gt;</code> itself if you need to modify all controllers/java files). In this way, the plugin will not overwrite the corresponding files and you can version them with your changes. <em><strong>Remember to manually delete the useless generated classes, since the plugin will never delete them for safety reasons.</strong></em></p><h4 id="Queue-files"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Queue-files" title="Queue-files"><i class="fa fa-link"></i></a>Queue files</h4><p>The queue files are generated inside the CONFIGURATION-FILES folder, which is taken by Jenkins and put onto the PaaS.</p><p>Here you can find a <code>ConnectorConfig</code> file for each env, pointed by the <code>configfile.path</code> system property, which tells the Connector Library where to pick some other files (to separate the envs, they are in the same folder anyway) and tells also to pick a specific configuration section from those files (to know the environment).</p><p><code>HeaderFields</code> file is constant, to know how to write the BS header onto the queues.</p><p><code>projectaliases</code> file has a section for each env, to know the channels and the alias of the BS output queue; also, the it specifies the right section to pick from <code>transports</code> file.</p><p><code>transports</code> file has the hostname and ports of the various queue managers, for each group in each env.</p><p>You can reference the Connector Library documentation for further details.</p><h4 id="Classes"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Classes" title="Classes"><i class="fa fa-link"></i></a>Classes</h4><p>The plugin will generate a Controller, a Service and a pair or Request and Response objects used both by the Controllers and by the Service. There are no Transformers or Commands, since it is a quick implementation with no transformations: it’s just a bridge.</p><p>There is a Controller for each JDO, since in this way you can remove a JDO from the plugin configuration and still generate the other files, without the risk to have your changes overwritten - there is complete separation of the JDO-related classes. If you still need a single Controller, you can add a tag <code>&lt;singleController&gt;true&lt;/singleController&gt;</code> in the <code>&lt;configuration&gt;</code> section of the plugin in the <code>-war</code> module (discouraged).</p><h2 id="Application-Customization"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Application-Customization" title="Application-Customization"><i class="fa fa-link"></i></a>Application Customization</h2><div class="alert alert-danger">
<p>The information in this paragraph is targeted to application architects that need to provide shared functionalities among their services.</p>
</div><p>In order to provide common functionalities to all services developed under the same umbrella project (e.g. ABC, XDCE, MyKey, etc…), architects have the possibility to provide an intermediate architectural layer, which contains all code that must be shared among the underline applications.<br>
All applications must update their POM specifying a project-specific parent POM which will automatically bring all custom dependencies that contain ad-hoc code with utilities, object models, etc… .</p><p>An example of this behaviour is already in place with a base extra-layer developed by Bear team, which act as default for new applications.</p><p>BE4FE services, infact, now point to <strong>simple-app-be4fe-v1</strong> as parent POM. This POM contains a dependency to <strong>simple-app-bear-arch</strong> jar, which in turn contains some code shared by service. In particular it contains:</p><ul>
<li><strong>SessionContext</strong>: a class that identify logged user data, stored as session data when user logs in.</li>
<li><strong>StatefulController</strong>: an extension of <strong>BaseStatefulController</strong> which declares <strong>SessionContext</strong> as generic type, so that is known at compile time. Useful for IDE code completion hint and type checks.</li>
<li><strong>SessionContextTypeProvider</strong>: an utility class that <strong>must</strong> be present in the <strong>ApplicationContext</strong> when application load. Used by the framework at runtime to know what is the actual type of <strong>SessionContext</strong> in order to correctly unmarshall it with Jackson.</li>
</ul><h3 id="Anathomy-of-SimpleApp"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Anathomy-of-SimpleApp" title="Anathomy-of-SimpleApp"><i class="fa fa-link"></i></a>Anathomy of SimpleApp</h3><p>As stated, SimpleApp is a basic intermediate layer which act as default for application that does not need further customization.<br>
More information <a href="https://bitbucket.intesasanpaolo.com/projects/BEAR0/repos/simpleapp-bear-arch/browse?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">here</a>.<br>
It consits of a container project (<em>simple-app-bear-arch</em>) with two submodules:</p><ul>
<li><strong>simple-arch</strong> a jar with all code that must be shared</li>
<li><strong>simple-bear-be4fe-v1</strong> a POM project that declare <em>simple-arch</em> as dependency.</li>
</ul><p>Therefore, in order to package a custom layer for their applications architects have to.</p><ol>
<li>Create a new container project.</li>
<li>Create a new JAR project that contains, at the very least, custom implementation for the classes listed above.</li>
<li>Define a new POM that has <strong>bear-be4fe-v1</strong> as parent and includes the JAR above as dependency.</li>
<li>Make their applications declare this new POM as parent, instead of <strong>simpleapp-bear-be4fe-v1</strong>.</li>
</ol><p>At this point all code contained in the jar is automatically shared among all BE4FE services.</p><div class="alert alert-info">
<p>As a convention all customized classes included in the jar that should be prefixed with application acronym.<br>
e.g. <strong>XDCESessionContext</strong>, <strong>ABCStatefulController</strong>, etc…</p>
</div><p>The session manager service, which is itself a BE4FE microservice, inherit from this POM, so it shares the same domain classes, used to define Session Context information.</p><h2 id="Error-Handler"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Error-Handler" title="Error-Handler"><i class="fa fa-link"></i></a>Error Handler</h2><p>Bear framework handle exception raised by domain microservices,<br>
define base exception to extends for implementing specific domain exception, and define a standardized REST error response with a convenient HTTP status related to the specific exception.</p><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].exception</p>
</div><h3 id="Exception-Handling"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Exception-Handling" title="Exception-Handling"><i class="fa fa-link"></i></a>Exception Handling</h3><p>The main class is:</p><pre><code>com.intesasanpaolo.bear.exceptions.manager.BearExceptionManager
</code></pre><p>This class is a <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html" target="_blank" rel="noopener">Spring @ControllerAdvice</a> and intercept any Exception raised from underlines Application Controllers.</p><p><code>BearExceptionManager</code> extends <code>ResponseEntityExceptionHandler</code> that<br>
provides convenient methods for handling internal Spring MVC exceptions.</p><p><code>BearExceptionManager</code> implements also <code>@ExceptionHandler</code> methods for generic java Exception and for any domain exception defined by developers<br>
BearExceptionManager provides for:</p><ul>
<li>conversion from exception to Rest response with specific HTTP status</li>
<li>enrichment, the Rest response contains developer defined info and technical info defined by architecture</li>
<li>decoding, error messages are decoded on error code</li>
<li>logging</li>
</ul><h3 id="Configuration"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configuration" title="Configuration"><i class="fa fa-link"></i></a>Configuration</h3><p>For exception handling configuration refer to <strong>error-handling</strong> in application yaml file. Configuration properties are:</p><ul>
<li>enableExceptionLogging: enable exception logging</li>
<li>enableStacktraceLogging: if error logging enabled this enable stacktrace logging</li>
<li>enableExceptionEvent: enable event raising on exception</li>
<li>enableExceptionDecoding: enable exception message decoding</li>
<li>enableUnknowExceptionMapping:if exception decoding is enabled this enable the tracking of unknown error message</li>
<li>unknowExceptionTag: this in a tag for unknown error message log</li>
</ul><pre><code class="yaml hljs">error-handling:
  enableExceptionLogging: <span class="hljs-literal">true</span>
  enableStacktraceLogging: <span class="hljs-literal">true</span>
  enableExceptionEvent: <span class="hljs-literal">false</span>
  enableExceptionDecoding: <span class="hljs-literal">true</span>
  enableUnknowExceptionMapping: <span class="hljs-literal">true</span>
  unknowExceptionTag: UNKNOWN_ERROR_CODE
</code></pre><p>For error handling another configuration file is<br>
<strong>error-mapping.properties</strong>, this file is located outside the application jar in order to configure them at deploy time.<br>
This file contains error message mapping based on error code.<br>
the properties format must be like this example</p><pre><code>error-mapping.errors[ERRCODEXX]= convenient message 1
error-mapping.errors[ERRCODEYY]= another message
</code></pre><p><strong>default location of properties files is config folder at the level of jar file</strong></p><pre><code class="yaml hljs">+<span class="hljs-selector-tag">myAppFolder</span>
    <span class="hljs-selector-tag">-mySpringBootApp</span><span class="hljs-selector-class">.jar</span>
    +<span class="hljs-selector-tag">config</span>
       <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">error-mapping</span><span class="hljs-selector-class">.properties</span>
</code></pre><p>with this folder structure no additional params are needed for start the application</p><p>otherwise to refer properties file in an other location you need to provide path to this configuration files setting a JVM variable <code>-Dapplication.config.path</code></p><pre><code class="sh hljs">java -jar -Dapplication.config.path=file:.<span class="hljs-regexp">/configxxx/</span>  bear-v1<span class="hljs-number">-0.1</span><span class="hljs-number">.0</span>-SNAPSHOT.jar
</code></pre><p>NOTE if started inside IntelliJ or other IDE provide absolute path, for example:</p><pre><code class="sh hljs"><span class="hljs-deletion">-Dapplication.config.path=file:D:\dev\workspace\bear_reply\bear-arch\nuovaarchitettura-digitale-showcase\target\config\</span>
</code></pre><h3 id="Bear-Domain-Exception"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Bear-Domain-Exception" title="Bear-Domain-Exception"><i class="fa fa-link"></i></a>Bear Domain Exception</h3><p>This framework provide this built-in exceptions:</p><ul>
<li><code>com.intesasanpaolo.bear.exceptions.BearDomainException</code></li>
<li><code>com.intesasanpaolo.bear.exceptions.BearDomainRuntimeException</code></li>
</ul><p>developers must extends this exceptions to create other domain specific custom exception in package <code>com.intesasanpaolo.bear.[ACRONYM].[PROJECT].exception</code>.<br>
When developer throws a custom exception can provide following parameters:</p><ul>
<li><strong>String message</strong>: the errore message</li>
<li><strong>String code</strong>: the errore code</li>
<li><strong>HttpStatus responseStatus</strong>: the status of the http response (default 500)</li>
<li><strong>BearErrorTypeEnum errorType</strong>: the  error type (default TECHNICAL)</li>
<li><strong>BearSeverityEnum severity</strong>: error severity (default ERROR)</li>
<li><strong>Map&lt;String,Object&gt; additionalInfo</strong>: map of custom domain information</li>
<li><strong>String rawRemoteError</strong>: description of remote error in case of the exception wraps an external exception</li>
<li><strong>String remoteSource</strong>:source of remote error in case of the exception wraps an external exception</li>
</ul><p>Different constructor are provided by framework BearDomainException and BearDomainRuntimeException to set this parameters</p><div class="alert alert-info">
<p>For example you can define your own exception <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/exception/PermissionDeniedException.java?at=refs%2Fheads%2Fenv%2Fsvil#210-216" target="_blank" rel="noopener">PermissionDeniedException</a></p>
</div><p>And here a possible trowing of a <code>PermissionDeniedException</code> with the specification of additionalInfo <code>Map</code> in witch put custom info</p><pre><code class="java hljs">Map&lt;String, Object&gt; info = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
info.put(<span class="hljs-string">"detailedChannelMessage"</span>,<span class="hljs-string">"bla bla bla test exception with user id 8"</span>);
info.put(<span class="hljs-string">"customerPreference"</span>,<span class="hljs-string">"show.detail"</span>);
info.put(<span class="hljs-string">"additionalService"</span>,<span class="hljs-string">"activate.helpDesk.chatbot"</span>);

<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> PermissionDeniedException(<span class="hljs-string">"permission denied"</span>, ErrorCode.PERMISSION_DENIED_CODE,HttpStatus.FORBIDDEN, BearErrorTypeEnum.BUSINESS, BearSeverityEnum.INFO, info );
</code></pre><h3 id="Error-Response"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Error-Response" title="Error-Response"><i class="fa fa-link"></i></a>Error Response</h3><p>The standard error response of the framework is</p><pre><code>com.intesasanpaolo.bear.exceptions.response.MicroServiceExceptionResponse
</code></pre><p>this class provide a mainError always present and an optional list of errors populated in case of aggregation of multiple exception in BearExceptionManager</p><pre><code class="java hljs"> <span class="hljs-comment">/**
  * bear error entity,
  * this in always present in thi response,
  * in case of multiple exception aggregation this is the main exception
  */</span>
 <span class="hljs-keyword">private</span> BearError mainError;

 <span class="hljs-comment">/**
  * present only in case of multiple exception aggregation this contains all the exception aggregate to the main
  */</span>
 <span class="hljs-keyword">private</span> List&lt;BearError&gt; errors;
</code></pre><h4 id="BearError-Detail"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#BearError-Detail" title="BearError-Detail"><i class="fa fa-link"></i></a>BearError Detail</h4><p>When an exception is raised by applicatin controller a this is handled by BearExceptionManager and generate a rest response and contains all information presents in the handled exception plus any enrichment regarding decoding of error messages and fixed default technical info.</p><p>In detail we have this structure:</p><ul>
<li><strong>message</strong>: the errore message</li>
<li><strong>code</strong>: the errore code</li>
<li><strong>errorType</strong>: the error type (default TECHNICAL)</li>
<li><strong>severity</strong>: error severity (default ERROR)</li>
<li><strong>extendedMessage</strong>: this is the errore message decoded by <em>code</em> on error-mapping.properties file</li>
<li><strong>additionalInfo</strong>: map of custom domain information</li>
<li><strong>rawRemoteError</strong>: description of remote error in case of the exception wraps an external exception</li>
<li><strong>remoteSource</strong>:source of remote error in case of the exception wraps an external exception</li>
<li><strong>technicalInfo</strong>: map of default info added by framework</li>
</ul><p>the map technicalInfo contains this default fields:</p><ul>
<li>exception: the java exception</li>
<li>path: the request path</li>
<li>X-Request-ID: request id from request header</li>
<li>error: http error response</li>
<li>message: the java exception message</li>
<li>timestamp: the timestamp</li>
<li>status: http status response</li>
</ul><p>Here an example of rest error response:</p><pre><code class="json hljs">{
    <span class="hljs-attr">"mainError"</span>: {
        <span class="hljs-attr">"message"</span>: <span class="hljs-string">"permission denied"</span>,
        <span class="hljs-attr">"code"</span>: <span class="hljs-string">"ERRPERM001"</span>,
        <span class="hljs-attr">"errorType"</span>: <span class="hljs-string">"BUSINESS"</span>,
        <span class="hljs-attr">"severity"</span>: <span class="hljs-string">"INFO"</span>,
        <span class="hljs-attr">"extendedMessage"</span>: <span class="hljs-string">"profilo utente non trovato effettuare una nuova ricerca"</span>,
        <span class="hljs-attr">"additionalInfo"</span>: {
            <span class="hljs-attr">"detailedChannelMessage"</span>: <span class="hljs-string">"bla bla bla test exception with user id 8"</span>,
            <span class="hljs-attr">"customerPreference"</span>: <span class="hljs-string">"show.detail"</span>,
            <span class="hljs-attr">"additionalService"</span>: <span class="hljs-string">"activate.helpDesk.chatbot"</span>
        },
        <span class="hljs-attr">"technicalInfo"</span>: {
            <span class="hljs-attr">"exception"</span>: <span class="hljs-string">"com.intesasanpaolo.bear.service.user.exception.PermissionDeniedException"</span>,
            <span class="hljs-attr">"path"</span>: <span class="hljs-string">"/errordemo/8"</span>,
            <span class="hljs-attr">"X-Request-ID"</span>: <span class="hljs-string">"f058ebd6-02f7-4d3f-942e-904344e8cde5"</span>,
            <span class="hljs-attr">"error"</span>: <span class="hljs-string">"Forbidden"</span>,
            <span class="hljs-attr">"message"</span>: <span class="hljs-string">"permission denied"</span>,
            <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1533826576792</span>,
            <span class="hljs-attr">"status"</span>: <span class="hljs-number">403</span>
        }
    }
}
</code></pre><h3 id="Example"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Example" title="Example"><i class="fa fa-link"></i></a>Example</h3><p>Run project Showcase and invoke <code>/errordemo/{id}</code> endpoint whit various <code>{id}</code> from 1 to 10 to see various example of exception usage</p><h2 id="New-Exception-Handler-and-Error-Messages"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#New-Exception-Handler-and-Error-Messages" title="New-Exception-Handler-and-Error-Messages"><i class="fa fa-link"></i></a>New Exception Handler and Error Messages</h2><p>A new standard for error handling and  error messages has been defined.<br>
By default the microservices use the old one.<br>
In order to enable the new one, the developer must set to <code>true</code> the property <code>error-manager.enabled</code> in the <code>application.yml</code> file.</p><pre><code class="yml hljs">error-manager:
  enabled: <span class="hljs-literal">true</span>
</code></pre><div class="alert alert-danger">
<p>From <strong>15/05/2019</strong> this approach will be the default.<br>
If the owners of a microservice want to keep the old error handling, they will have to set explicitly the <code>error-manager.enabled</code> property to <code>false</code>.</p>
</div><h3 id="ErrorResource"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#ErrorResource" title="ErrorResource"><i class="fa fa-link"></i></a>ErrorResource</h3><p>The <code>BaseResource</code> extends a new <code>ErrorResource</code> that contains the field <code>returnMessages</code>.<br>
This is a <code>Map&lt;String, ErrorMessageResource&gt;</code>.<br>
The key is the error severity, the value contains:</p><ul>
<li><strong>messageKey</strong>: id of the error message</li>
<li><strong>messageTitle</strong>: title of the message</li>
<li><strong>message</strong>: body of the message</li>
<li><strong>retry</strong>: error that involves a retry</li>
<li><strong>errorCode</strong>: code of the error</li>
<li><strong>messageForm</strong>:
<ul>
<li><strong>formName</strong>: name of the form containing the error</li>
<li><strong>fieldName</strong>: name of the field containing the error</li>
</ul>
</li>
</ul><pre><code class="json hljs">{
  <span class="hljs-attr">"returnMessages"</span>: {
    <span class="hljs-attr">"WARNING"</span>: [
      {
        <span class="hljs-attr">"messageKey"</span>: <span class="hljs-string">"error.key.warning"</span>,
        <span class="hljs-attr">"messageTitle"</span>: <span class="hljs-string">"Warning title"</span>,
        <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Warning message"</span>,
        <span class="hljs-attr">"retry"</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">"errorCode"</span>: <span class="hljs-string">"WARNING CODE"</span>
      }
    ],
    <span class="hljs-attr">"ERROR"</span>: [
      {
        <span class="hljs-attr">"messageKey"</span>: <span class="hljs-string">"error.key.error"</span>,
        <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Error message"</span>,
        <span class="hljs-attr">"messageTitle"</span>: <span class="hljs-string">"Error Title"</span>,
        <span class="hljs-attr">"retry"</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">"errorCode"</span>: <span class="hljs-string">"ERROR_CODE"</span>,
        <span class="hljs-attr">"messageForm"</span>: {
          <span class="hljs-attr">"formName"</span>: <span class="hljs-string">"formName"</span>,
          <span class="hljs-attr">"fieldName"</span>: <span class="hljs-string">"fieldName"</span>
        }
      }
    ]
  }
}
</code></pre><h3 id="Populate-Return-Messages"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Populate-Return-Messages" title="Populate-Return-Messages"><i class="fa fa-link"></i></a>Populate Return Messages</h3><p>The return messages of the response are automatically populated by the architecture, retrieving the error keys from the <code>ErrorContext</code>.</p><p>Developers can manually add error keys of non-blocking errors to the <code>ErrorContext</code> by calling the methods:</p><ul>
<li><code>addErrorKey(String errorKey)</code></li>
<li><code>addErrorKeys(Collection&lt;String&gt; errorKeys)</code></li>
</ul><p>The <code>ErrorContext</code> can be retrieved calling the static method <code>getErrorContext()</code> of the <code>RequestContextHolder</code>.</p><pre><code class="java hljs">RequestContextHolder.getErrorContext().addErrorKey(<span class="hljs-string">"my.error.key"</span>);
</code></pre><p>Manually adding error keys will not change the status code of the response.</p><div class="alert alert-warning">
<p>The return object of the controller methods must extend <code>BaseResource</code> in order to populate the <code>returnMessages</code> field.<br>
The object that extends <code>BaseResource</code> could also be wrapped in a <code>ResponseEntity</code> object.</p>
</div><h3 id="Error-Keys-from-Unhandled-Exceptions"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Error-Keys-from-Unhandled-Exceptions" title="Error-Keys-from-Unhandled-Exceptions"><i class="fa fa-link"></i></a>Error Keys from Unhandled Exceptions</h3><p>Error keys are also extracted from the unhandled exceptions catched by the <code>ControllerAdvice</code>.<br>
Depending on the exception type, an error key is added and the status code is populated in the response:</p><ul>
<li><strong>IBearDomainException</strong> (<code>BearDomainException</code>, <code>BearDomainRuntimeException</code>):
<ul>
<li><strong>error key</strong>: the key is retrieved from the <em><strong>code</strong></em> field of the exception</li>
<li><strong>status code</strong>: the status code is retrieved from the <em><strong>responseStatus</strong></em> field of the exception</li>
</ul>
</li>
<li><strong>Hibernate Validation Exceptions</strong> (<code>ConstraintViolationException</code>, <code>MethodArgumentNotValidException</code>):
<ul>
<li><strong>error key</strong>: the key is generated joining controller name, method name, parameter name, eventually one or more subparameter names and failed validation<br>
<code>&lt;controllerName&gt;.&lt;methodName&gt;.&lt;parameterName&gt;[.&lt;subParameterName&gt;].&lt;failedValidation&gt;</code></li>
<li><strong>status code</strong>: <strong>400</strong> (<em>BAD REQUEST</em>)</li>
</ul>
</li>
<li><strong>Missing Required Parameter Exception</strong> (<code>MissingServletRequestParameterException</code>):
<ul>
<li><strong>error key</strong>: <em>missing.parameter.error</em></li>
<li><strong>status code</strong>: <strong>400</strong> (<em>BAD REQUEST</em>)</li>
</ul>
</li>
<li><strong>Missing Request Part Exception</strong> (<code>MissingServletRequestPartException</code>):
<ul>
<li><strong>error key</strong>: <em>missing.request.part.error</em></li>
<li><strong>status code</strong>: <strong>400</strong> (<em>BAD REQUEST</em>)</li>
</ul>
</li>
<li><strong>Missing Path Variable Exception</strong> (<code>MissingPathVariableException</code>):
<ul>
<li><strong>error key</strong>: <em>missing.path.variable.error</em></li>
<li><strong>status code</strong>: <strong>400</strong> (<em>BAD REQUEST</em>)</li>
</ul>
</li>
<li><strong>Missing Body Exception</strong> (<code>HttpMessageNotReadableException</code>):
<ul>
<li><strong>error key</strong>: <em>missing.body.error</em></li>
<li><strong>status code</strong>: <strong>400</strong> (<em>BAD REQUEST</em>)</li>
</ul>
</li>
<li><strong>Unsupported Media Type Exception</strong> (<code>HttpMediaTypeNotSupportedException</code>):
<ul>
<li><strong>error key</strong>: <em>unsupported.media.type.error</em></li>
<li><strong>status code</strong>: <strong>415</strong> (<em>UNSUPPORTED MEDIA TYPE</em>)</li>
</ul>
</li>
<li><strong>Not Acceptable Media Type Exception</strong> (<code>HttpMediaTypeNotAcceptableException</code>):
<ul>
<li><strong>error key</strong>: <em>not.acceptable.media.type.error</em></li>
<li><strong>status code</strong>: <strong>406</strong> (<em>NOT ACCEPTABLE</em>)</li>
</ul>
</li>
<li><strong>Unsupported Method Exception</strong> (<code>HttpRequestMethodNotSupportedException</code>):
<ul>
<li><strong>error key</strong>: <em>unsupported.method.error</em></li>
<li><strong>status code</strong>: <strong>405</strong> (<em>METHOD NOT ALLOWED</em>)</li>
</ul>
</li>
<li><strong>Other exceptions</strong>:
<ul>
<li><strong>error key</strong>: <em>generic.error</em></li>
<li><strong>status code</strong>: <strong>500</strong> (<em>INTERNAL SERVER ERROR</em>)</li>
</ul>
</li>
</ul><div class="alert alert-info">
<p>In order to return an error response, the developer must throw an implementation of <code>IBearDomainException</code> (<code>BearDomainException</code> or <code>BearDomainRuntimeException</code>) defining error key and status code respectively in the <code>code</code> and <code>responseStatus</code> fields.</p>
</div><h3 id="Translation-from-Error-Key-to-Error-Message"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Translation-from-Error-Key-to-Error-Message" title="Translation-from-Error-Key-to-Error-Message"><i class="fa fa-link"></i></a>Translation from Error Key to Error Message</h3><p>The translation from error keys to error messages differs from <strong>BE4FE</strong> to <strong>Core</strong> projects.</p><h4 id="BE4FE-Error-Translation"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#BE4FE-Error-Translation" title="BE4FE-Error-Translation"><i class="fa fa-link"></i></a>BE4FE Error Translation</h4><p><img src="./BEAR Framework Development Guide_files/QxG1HlL.png" alt=""></p><ol>
<li>BE4FE microservices get the error messages related to the stored keys from an <strong>ErrorManager microservice</strong>.<br>
Every channel will have its own ErrorManager.</li>
<li>The error messages returned by the ErrorManager are stored in a <strong>local cache</strong> for 4 hours.<br>
The microservice will call the ErrorManager only for keys not contained in the local cache.</li>
<li>The keys that are not resolved by the ErrorManager are than resolved using a <strong>local configuration</strong>.</li>
<li>If the local configuration does not contain a definition for a key, a <strong>default error</strong> is returned.</li>
</ol><p>The developer must set the url of the ErrorManger related to the same channel of the BE4FE microservice in the <code>application.yml</code> file:</p><pre><code class="yml hljs">error-manager:
  enabled: <span class="hljs-literal">true</span>
  url: <span class="hljs-variable">${ERROR_MANAGER_URL}</span>/messages/{projectId}
</code></pre><h4 id="Core-Error-Translation"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Core-Error-Translation" title="Core-Error-Translation"><i class="fa fa-link"></i></a>Core Error Translation</h4><ol>
<li>Core microservices get the error messages related to the stored keys only from local configuration.</li>
<li>If the local configuration does not contain a definition for a key, a default error is returned.</li>
</ol><h4 id="Local-Error-Message-Definition"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Local-Error-Message-Definition" title="Local-Error-Message-Definition"><i class="fa fa-link"></i></a>Local Error Message Definition</h4><p>Local error messages can be defined in the file <code>src/main/resources/local-error.properties</code>.<br>
For every error key the developer must define an entry for each field, using the following template:</p><p><code>local-error.messages[&lt;errorkey&gt;].&lt;fieldName&gt;</code></p><p>For example:</p><pre><code class="properties hljs"><span class="hljs-built_in">local</span>-error.messages[my.error.key1].errorCode=ERR001
<span class="hljs-built_in">local</span>-error.messages[my.error.key1].message=My message 1
<span class="hljs-built_in">local</span>-error.messages[my.error.key1].messageForm.fieldName=fieldName
<span class="hljs-built_in">local</span>-error.messages[my.error.key1].messageForm.formName=formName
<span class="hljs-built_in">local</span>-error.messages[my.error.key1].messageTitle=My Title 1
<span class="hljs-built_in">local</span>-error.messages[my.error.key1].retry=<span class="hljs-literal">false</span>
<span class="hljs-built_in">local</span>-error.messages[my.error.key1].severity=ERROR

<span class="hljs-built_in">local</span>-error.messages[my.error.key2].errorCode=ERR002
<span class="hljs-built_in">local</span>-error.messages[my.error.key2].message=My message 2
<span class="hljs-built_in">local</span>-error.messages[my.error.key2].messageTitle=My Title 2
<span class="hljs-built_in">local</span>-error.messages[my.error.key2].retry=<span class="hljs-literal">false</span>
<span class="hljs-built_in">local</span>-error.messages[my.error.key2].severity=WARNING
</code></pre><h4 id="Remote-Error-Message-Definition"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Remote-Error-Message-Definition" title="Remote-Error-Message-Definition"><i class="fa fa-link"></i></a>Remote Error Message Definition</h4><p>The ErrorManager microservice retrieves the error messages from the <code>errormessages</code> collection of his own MongoDB.<br>
For each couple <code>&lt;error key, projectId&gt;</code>, the collection contains a list of error messages in order to handle messages in different languages.<br>
The projectId is the <code>artifactId</code> of the caller microservice.</p><p>MongoDB <code>errormessages</code> collection structure:</p><pre><code class="json hljs">[
  {
    <span class="hljs-attr">"_id"</span>: {
      <span class="hljs-attr">"projectId"</span>: <span class="hljs-string">"artifactId"</span>,
      <span class="hljs-attr">"messageKey"</span>: <span class="hljs-string">"error.key"</span>
    },
    <span class="hljs-attr">"errorMessages"</span>: [
      {
        <span class="hljs-attr">"language"</span>: <span class="hljs-string">"IT"</span>,
        <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Message IT"</span>,
        <span class="hljs-attr">"messageTitle"</span>: <span class="hljs-string">"Message Title IT"</span>,
        <span class="hljs-attr">"retry"</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">"errorCode"</span>: <span class="hljs-string">"ERROR_CODE"</span>,
        <span class="hljs-attr">"messageForm"</span>: {
          <span class="hljs-attr">"formName"</span>: <span class="hljs-string">"formName"</span>,
          <span class="hljs-attr">"fieldName"</span>: <span class="hljs-string">"fieldName"</span>
        },
        <span class="hljs-attr">"severity"</span>: <span class="hljs-string">"WARNING"</span>
      },
      {
        <span class="hljs-attr">"language"</span>: <span class="hljs-string">"ENG"</span>,
        <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Message ENG"</span>,
        <span class="hljs-attr">"messageTitle"</span>: <span class="hljs-string">"Message Title ENG"</span>,
        <span class="hljs-attr">"retry"</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">"errorCode"</span>: <span class="hljs-string">"ERROR_CODE"</span>,
        <span class="hljs-attr">"messageForm"</span>: {
          <span class="hljs-attr">"formName"</span>: <span class="hljs-string">"formName"</span>,
          <span class="hljs-attr">"fieldName"</span>: <span class="hljs-string">"fieldName"</span>
        },
        <span class="hljs-attr">"severity"</span>: <span class="hljs-string">"WARNING"</span>
      }
    ]
  }
]
</code></pre><h2 id="Application-Documentation-Swagger"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Application-Documentation-Swagger" title="Application-Documentation-Swagger"><i class="fa fa-link"></i></a>Application Documentation (Swagger)</h2><p>Your spring-boot application automacally expose api documentation in html format at the url <code>&lt;your-host&gt;/swagger-ui.html</code> and in json format at endpoint <code>&lt;your-host&gt;/v2/api-docs</code>.</p><p><img src="./BEAR Framework Development Guide_files/TdECuoe.png" alt="swagger-ui"></p><p>With swagger annotations you can add some information to your Api and Models</p><p><code>@Api</code> groups a set of services under a unique descriptor. Example:</p><pre><code class="java hljs"><span class="hljs-meta">@Api</span>(value = <span class="hljs-string">"users"</span>, description = <span class="hljs-string">"Endpoint for user management"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulController</span> </span>{

}
</code></pre><p><img src="./BEAR Framework Development Guide_files/Z48uQFr.png" alt=""></p><p><code>@ApiOperation</code> has a more specific value, it adds information to a method/rest.</p><p><code>@ApiResponses</code> sets a list of possible @ApiResponse, which are in charge to define possible reponses. Example:</p><pre><code class="java hljs"><span class="hljs-meta">@GetMapping</span>
<span class="hljs-meta">@ApiOperation</span>(value = <span class="hljs-string">"Find all usesr"</span>, notes = <span class="hljs-string">"Retrieving all users"</span>)
<span class="hljs-meta">@ApiResponses</span>({
    <span class="hljs-meta">@ApiResponse</span>(code = <span class="hljs-number">200</span>, message = <span class="hljs-string">"Success"</span>)
})
<span class="hljs-keyword">public</span> ResponseEntity&lt;?&gt; getUsers(Pageable pageable, HttpServletRequest request, HttpServletResponse response) {

}
</code></pre><p><img src="./BEAR Framework Development Guide_files/mqS952c.png" alt=""></p><h2 id="Code-Generation-Swagger"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Code-Generation-Swagger" title="Code-Generation-Swagger"><i class="fa fa-link"></i></a>Code Generation (Swagger)</h2><p>To generate model from another service use the <code>swagger-codegen-maven-plugin</code>, add some definition to you <code>pom.xml</code> like in this example</p><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.swagger<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>swagger-codegen-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
   <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>generate<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">inputSpec</span>&gt;</span>https://petstore.swagger.io/v2/swagger.json<span class="hljs-tag">&lt;/<span class="hljs-name">inputSpec</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">language</span>&gt;</span>spring<span class="hljs-tag">&lt;/<span class="hljs-name">language</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">modelPackage</span>&gt;</span>${project.groupId}.model.petstore<span class="hljs-tag">&lt;/<span class="hljs-name">modelPackage</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">generateSupportingFiles</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">generateSupportingFiles</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">generateApis</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">generateApis</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">output</span>&gt;</span>src/main/gen<span class="hljs-tag">&lt;/<span class="hljs-name">output</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configOptions</span>&gt;</span>
               <span class="hljs-tag">&lt;<span class="hljs-name">sourceFolder</span>&gt;</span>petstore<span class="hljs-tag">&lt;/<span class="hljs-name">sourceFolder</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configOptions</span>&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
</code></pre><p>The most important configurations are:</p><ul>
<li><code>&lt;inputSpec&gt;https://petstore.swagger.io/v2/swagger.json&lt;/inputSpec&gt;</code> is the swagger descriptor of remote service, this file is also generally served at this endpoint <code>&lt;your-host/v2/api-docs&gt;</code></li>
<li><code>&lt;language&gt;spring&lt;/language&gt;</code> define the output format</li>
<li><code>&lt;modelPackage&gt;${project.groupId}.model.petstore&lt;/modelPackage&gt;</code> define tha package of generated model class according your project</li>
</ul><p>The maven plugin generate <em>petStore</em> model classes under target folder in path genrated-sources/main/java like specified in <em>output</em> and <em>sourceFolder</em> param.<br>
Now you can find the generated java classes in the folder <code>src/main/gen/petstore</code>, that you can mark as <em>generated_sources</em>.</p><p><img src="./BEAR Framework Development Guide_files/5d6uH3d.png" alt=""></p><h2 id="Cache-Manager"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Cache-Manager" title="Cache-Manager"><i class="fa fa-link"></i></a>Cache Manager</h2><div class="alert alert-warning">
<p><strong>Package naming convention</strong><br>
com.intesasanpaolo.bear.[ACRONYM].[PROJECT].cache</p>
</div><p>The cache manager simplifies the access to a cache service, executing the core workflow necessary for managing a cache and leaving the application the onyl requirement to perform puts and gets.</p><h3 id="Create-a-cache"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-a-cache" title="Create-a-cache"><i class="fa fa-link"></i></a>Create a cache</h3><p>Create a class in the <code>com.intesasanpaolo.bear.&lt;ACRONYM&gt;.cache</code> package, that extends the <code>BaseBearCache&lt;KEY, VALUE&gt;</code>.</p><p>The generic types have the following meaning:</p><ul>
<li><strong>KEY</strong>:      The type of the cache key</li>
<li><strong>VALUE</strong>:    The type of the cache content</li>
</ul><div class="alert alert-info">
<p>An example of Cache can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/cache/UserCache.java?at=refs%2Fheads%2Fenv%2Fsvil" target="_blank" rel="noopener">CacheExample</a></p>
</div><h3 id="Configure-the-cache"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-cache" title="Configure-the-cache"><i class="fa fa-link"></i></a>Configure the cache</h3><p>To configure the connection to one or more data sources through the Mongo Connector, you have to edit the <code>application.yml</code> file inserting a new item under the <code>cache.items</code> section: the name of the item must correspond to the name of the class created during the preious step and it must have the following properties:</p><ul>
<li><strong>expiryPolicy</strong>:     the kind of expire policy to use</li>
<li><strong>durationAmount</strong>:   the amount of time representing the duration (a number)</li>
<li><strong>durationUnit</strong>:     the unit of measure for the duration (DAYS|HOURS|MINUTES|SECONDS|MILLISECONDS|MICROSECONDS|NANOSECONDS)</li>
<li><strong>mocked</strong>:           if set to <code>true</code> it set up an in-memory local cache for testing. If set to <code>false</code> it points to the actual caching cluster</li>
</ul><p>An example of configuration is:</p><pre><code class="yaml hljs"><span class="hljs-keyword">cache</span>:
  items:
    UserCache:
      expiryPolicy: CreatedExpiryPolicy
      durationAmount: <span class="hljs-number">10</span>
      durationUnit: SECONDS
      mocked: <span class="hljs-literal">false</span>
</code></pre><h4 id="Caching-policies"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Caching-policies" title="Caching-policies"><i class="fa fa-link"></i></a>Caching policies</h4><p>The following table represents the available epiry policies along with the pareters that each of them takes into account:</p><table>
<thead>
<tr>
<th>Policy name</th>
<th style="text-align:center">Creation time</th>
<th style="text-align:center">Last access time</th>
<th style="text-align:center">Last update time</th>
</tr>
</thead>
<tbody>
<tr>
<td>CreatedExpiryPolicy</td>
<td style="text-align:center">Used</td>
<td style="text-align:center">-</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td>AccessedExpiryPolicy</td>
<td style="text-align:center">Used</td>
<td style="text-align:center">Used</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td>ModifiedExpiryPolicy</td>
<td style="text-align:center">Used</td>
<td style="text-align:center">-</td>
<td style="text-align:center">Used</td>
</tr>
<tr>
<td>TouchedExpiryPolicy</td>
<td style="text-align:center">Used</td>
<td style="text-align:center">Used</td>
<td style="text-align:center">Used</td>
</tr>
<tr>
<td>EternalExpiryPolicy</td>
<td style="text-align:center">-</td>
<td style="text-align:center">-</td>
<td style="text-align:center">-</td>
</tr>
</tbody>
</table><p>E.g. The <code>TouchedExpiryPolicy</code> defines the expiry duration of a cache entry based on when it was last created, updated or accessed.</p><h4 id="Distributed-cache-configuration"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Distributed-cache-configuration" title="Distributed-cache-configuration"><i class="fa fa-link"></i></a>Distributed cache configuration</h4><p>In order to set-up the ditributed cache management (a.k.a hazelcast client), you must a file named <code>hazelcast-client.xml</code> into the <code>resource</code> directory containing the client connection parameters.</p><p>An example of <code>hazelcast-client.xml</code> is:</p><pre><code class="xml hljs"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span><span class="hljs-meta">?&gt;</span></span>
<span class="hljs-tag">&lt;<span class="hljs-name">hazelcast-client</span>
    <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.hazelcast.com/schema/client-config hazelcast-client-config-3.9.xsd"</span>
    <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.hazelcast.com/schema/client-config"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"sticky-session"</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">network</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">cluster-members</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">address</span>&gt;</span>localhost:8081<span class="hljs-tag">&lt;/<span class="hljs-name">address</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">cluster-members</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">redo-operation</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">redo-operation</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">connection-attempt-period</span>&gt;</span>5000<span class="hljs-tag">&lt;/<span class="hljs-name">connection-attempt-period</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">network</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hazelcast-client</span>&gt;</span>
</code></pre><p>For the PaaS configuration please refer to [this section](#PaaS configuration1)</p><h4 id="Mock-the-cache"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mock-the-cache" title="Mock-the-cache"><i class="fa fa-link"></i></a>Mock the cache</h4><p>If the mocked confiration property is set to <code>true</code>, an in-memory cache manager will be set up. In this case the cache is not distributed but remain local to the application machine.</p><h3 id="PaaS-configuration"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#PaaS-configuration" title="PaaS-configuration"><i class="fa fa-link"></i></a>PaaS configuration</h3><p>To correctly configure the Cache on the application deployed on the PaaS, you must follow these steps:</p><p><strong>1. Request a Hazelcast Cluster</strong>: send an email to “Coordinamento Progetti” asking to deploy a hazelcast cluster with the following naming convention:<br>
- <code>&lt;microservice-name&gt;-cache-v1</code> for a single microservice<br>
- <code>&lt;acronym&gt;-cache-v1</code> for all the microservices belonging to a project with the same acronym</p><p><strong>2. Use the following <code>hazelcast-client.xml</code>:</strong></p><pre><code class="xml hljs"><span class="php"><span class="hljs-meta">&lt;?</span>xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span><span class="hljs-meta">?&gt;</span></span>
<span class="hljs-tag">&lt;<span class="hljs-name">hazelcast-client</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
  <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.hazelcast.com/schema/client-config
                               http://www.hazelcast.com/schema/client-config/hazelcast-client-config-3.10.xsd"</span>
  <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.hazelcast.com/schema/client-config"</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hazelcast.discovery.enabled"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">network</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">discovery-strategies</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">discovery-strategy</span> <span class="hljs-attr">enabled</span>=<span class="hljs-string">"true"</span>
        <span class="hljs-attr">class</span>=<span class="hljs-string">"com.hazelcast.kubernetes.HazelcastKubernetesDiscoveryStrategy"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">discovery-strategies</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">network</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">hazelcast-client</span>&gt;</span>

</code></pre><p><strong>3. Additional Environment Variables:</strong>: The discovery strategy <code>HazelcastKubernetesDiscoveryStrategy</code> in the <code>hazelcast-client.xml</code> needs 2 additional environment variables:<br>
- <code>HAZELCAST_KUBERNETES_SERVICE_NAME</code> with the value of the hazelcast cluster defined in step 1.<br>
- <code>HAZELCAST_KUBERNETES_NAMESPACE</code> with the value of:</p><pre><code class="yaml hljs">  fieldRef:
    apiVersion: v1
    fieldPath: metadata.<span class="hljs-keyword">namespace</span>

</code></pre><p>In order to set environment variables open a ticket in the application environment at the following path: TICKET DI FUNZIONE -&gt; Infrastruttura server dipartimentali -&gt; Area AP -&gt; Unix -&gt; PaaS OpenShift.</p><p><strong>4. Add the following dependency if you are using BEAR Framework version up to 0.9.0</strong>:</p><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.hazelcast<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hazelcast-kubernetes<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.hazelcast<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hazelcast<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

</code></pre><p>With later versions this dependency will be introduced in the framework.</p><h3 id="Use-case-example"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-example" title="Use-case-example"><i class="fa fa-link"></i></a>Use case example</h3><p>In the class where you need to use the cache, create an <code>@Autowired</code> field for the class cache created above; then simply invoke the <code>put()</code> or the <code>get()</code> method on it.</p><div class="alert alert-info">
<p>A usage example of the cache service can be seen at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/service/UserService.java?at=refs%2Fheads%2Fenv%2Fsvil#18-29" target="_blank" rel="noopener">UserService</a></p>
</div><h2 id="Advanced-features"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Advanced-features" title="Advanced-features"><i class="fa fa-link"></i></a>Advanced features</h2><h3 id="JSON-Patch"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JSON-Patch" title="JSON-Patch"><i class="fa fa-link"></i></a>JSON Patch</h3><p>If you want to create a method that performs entity updates, you can use the JSONPatch feauture (<a href="http://jsonpatch.com/" target="_blank" rel="noopener">http://jsonpatch.com</a>).</p><pre><code class="java hljs"><span class="hljs-meta">@PatchMapping</span>(value = <span class="hljs-string">"/{id}"</span>)
<span class="hljs-function"><span class="hljs-keyword">public</span> ResponseEntity&lt;UserResource&gt; <span class="hljs-title">updateUser</span><span class="hljs-params">(@PathVariable(value = <span class="hljs-string">"id"</span>)</span> String id, @RequestBody JsonNode patchBody) </span>{

}
</code></pre><p>In the Controller the Http request needs a body with a <code>JsonNode</code> <em>patchBody</em>, containing an array of patch operations. The patch operations supported by JSON Patch are “add”, “remove”, “replace”, “move”, “copy” and “test”. The operations are applied in order: if any of them fail then the whole patch operation should abort. An example of <code>JsonNode</code> array:</p><pre><code class="json hljs">[
  { <span class="hljs-attr">"op"</span>: <span class="hljs-string">"replace"</span>, <span class="hljs-attr">"path"</span>: <span class="hljs-string">"/baz"</span>, <span class="hljs-attr">"value"</span>: <span class="hljs-string">"boo"</span> },
  { <span class="hljs-attr">"op"</span>: <span class="hljs-string">"add"</span>, <span class="hljs-attr">"path"</span>: <span class="hljs-string">"/hello"</span>, <span class="hljs-attr">"value"</span>: [<span class="hljs-string">"world"</span>] },
  { <span class="hljs-attr">"op"</span>: <span class="hljs-string">"remove"</span>, <span class="hljs-attr">"path"</span>: <span class="hljs-string">"/foo"</span> }
]
</code></pre><p>Then you can define some rules to forbid or to allow only certain operations on specific fields. You can easily make it throught the <code>PatchBuilder</code> as follows:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span></div><div class="code">Patch patch = PatchBuilder.getInstance()                    # Get a PatchBuilder instance
    .body(patchBody)                                        # Pass the JsoonNode array
    .forbidPath("/**")                                      # Forbid all operations on all fields
    .allow("/firstName", PatchOperation.Type.REPLACE.op)    # Define allowed operation on a path
    .allowPath("/lastName")                                 # Allow all operations on a path
    .build();
</div></div></code></pre><p>Here the main <code>PatchBuilder</code> methods:</p><ul>
<li>allow(String pattern, String op)</li>
<li>forbid(String pattern, String op)</li>
<li>allowPath(String pattern)</li>
<li>forbidPath(String pattern)</li>
<li>allowOperation(String op)</li>
<li>forbidOperation(String op)</li>
</ul><p>You can see a Patch application happening in a PATCH Http Request at <a href="https://bitbucket.intesasanpaolo.com/projects/CDBP0/repos/bear-v1/browse/src/main/java/com/intesasanpaolo/bear/service/controller/UserController.java?at=refs%2Fheads%2Fenv%2Fsvil#109-120" target="_blank" rel="noopener">UserControllerPatch</a></p><h3 id="Futures"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Futures" title="Futures"><i class="fa fa-link"></i></a>Futures</h3><p><em>TODO</em></p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span></div><div class="code"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BitCoinCommand</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseCommand</span>&lt;<span class="hljs-title">BitCoin</span>&gt; </span>{

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> BitCoinService bitCoinService;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> BitCoin <span class="hljs-title">execute</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
        Future&lt;BitCoin&gt; bitCoinFuture = callAsyncService(bitCoinService::getBitCoinStats);
        <span class="hljs-keyword">return</span> bitCoinFuture.get();
    }
}
</div></div></code></pre><h3 id="Message-Converters"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Message-Converters" title="Message-Converters"><i class="fa fa-link"></i></a>Message Converters</h3><p>It is possible to add custom <em>Message Converters</em> to handle specific media types. To add your <em>Message Converters</em>, simply create a <code>@Configuration</code> class implementing <code>CustomConvertersConfigurer</code>:</p><pre><code class="java hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span></div><div class="code"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MessageConvertersConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">CustomConvertersConfigurer</span> </span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;HttpMessageConverter&lt;?&gt;&gt; customConverters() {
        <span class="hljs-comment">//return the list of custom converters</span>
    }

}
</div></div></code></pre><p>Override its method to return the desired list of <em>Message Converters</em> that will be added to the default one that handles <code>application/*json</code>.</p><p>To handle specific media types, configure your <em>Message Converter</em> accordingly (e.g. implementing its <code>canRead</code>/<code>canWrite</code>/<code>getSupportedMediaTypes</code> methods, or using an higher level abstract converter) and then add those media types to the <code>produces</code> field of <code>@RequestMapping</code> annotation on the desired <code>@RestController</code>.</p><h3 id="Multiple-JPA-Connections"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Multiple-JPA-Connections" title="Multiple-JPA-Connections"><i class="fa fa-link"></i></a>Multiple JPA Connections</h3><p><em>TODO</em></p><h2 id="Branching-Strategy"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Branching-Strategy" title="Branching-Strategy"><i class="fa fa-link"></i></a>Branching Strategy</h2><h3 id="Default-branches"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Default-branches" title="Default-branches"><i class="fa fa-link"></i></a>Default branches</h3><p><img src="./BEAR Framework Development Guide_files/6Gk7Vq6.png" alt=""></p><p>By default we have three branches:</p><ul>
<li><strong><code>master</code></strong>: contains the code currently in production</li>
<li><strong><code>env/svil</code></strong>: branch dedicated to the <em>SVIL</em> releases</li>
<li><strong><code>hotfix/bfix</code></strong>: branch dedicated to emergenccy fixes</li>
</ul><h3 id="Features-development-branches"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Features-development-branches" title="Features-development-branches"><i class="fa fa-link"></i></a>Features development branches</h3><p><img src="./BEAR Framework Development Guide_files/vvQ0PD1.png" alt=""></p><p>The feature branches isolates the development of an evolutive or a new functionality.</p><div class="alert alert-warning">
<p>The naming convetion is <code>frature/&lt;changeName&gt;</code> or <code>feature/&lt;CR-number&gt;</code></p>
</div><h3 id="Hotfix-development-branches"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Hotfix-development-branches" title="Hotfix-development-branches"><i class="fa fa-link"></i></a>Hotfix development branches</h3><p><img src="./BEAR Framework Development Guide_files/0fSvcO2.png" alt=""></p><p>The feature branches isolates the development of a single hotfix.</p><div class="alert alert-warning">
<p>The naming convetion is <code>hotfixfeature/&lt;changeName&gt;</code> or <code>hotfixfeature/&lt;CR-number&gt;</code></p>
</div><h2 id="Junit-Test"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Junit-Test" title="Junit-Test"><i class="fa fa-link"></i></a>Junit Test</h2><h3 id="Configure-Junit"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-Junit" title="Configure-Junit"><i class="fa fa-link"></i></a>Configure Junit</h3><p>To test your methods implementations you have to use spring junit facilities.<br>
In your test classes you must add suffix test at the end of your class name as done below</p><div class="alert alert-warning">
<p>The naming convetion is <code>yourClassNameTest</code></p>
</div><p>Configure your class with following annotations</p><pre><code class="java hljs"><span class="hljs-meta">@RunWith</span>(Suite.class)
<span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-meta">@WebAppConfiguration</span>
<span class="hljs-meta">@ContextConfiguration</span>(classes = {CoreTestSpringConfiguration.class})
<span class="hljs-meta">@Suite</span>.SuiteClasses({
        CityTest.class,
        CustomerTest.class,
        PreferenceTest.class,
        UserTest.class
})
</code></pre><ul>
<li>@RunWith: tells the Suite runner which test classes to include in this suite and in which order.</li>
<li>@SpringBootTest: annotation that can be specified on a test class that runs Spring Boot based tests. Provides additional features over and above the regular Spring TestContext Framework</li>
<li>@WebAppConfiguration: It’s used to denote that the ApplicationContext which is bootstrapped for the test should be an instance of WebApplicationContext.</li>
<li>@ContextConfiguration: can be used to declare either path-based resource locations or annotated classes</li>
<li>@Suite.SuiteClasses: put here all classes containing the test cases that you want to run</li>
</ul><p>Add following attributes to your test class configuration:</p><pre><code class="java hljs">    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">protected</span> WebApplicationContext wac;
    <span class="hljs-keyword">protected</span> MockMvc mockMvc;
</code></pre><p>Instantiate you mockMvc with a MockMvcBuilders:</p><pre><code class="java hljs">  <span class="hljs-meta">@Before</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setupMockMvc</span><span class="hljs-params">()</span> </span>{
    mockMvc = MockMvcBuilders
        .webAppContextSetup(wac)
        .build();
}
</code></pre><p>The <code>setupMockMvc()</code> method is annotated with JUnit’s @Before, indicating that it should be executed before any test methods. It passes the injected WebApplicationContext into the <code>webAppContextSetup()</code> method and then calls <code>build()</code> to produce a MockMvc instance, which is assigned to an instance variable for test methods to use.</p><h3 id="Implementing-unit-test"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Implementing-unit-test" title="Implementing-unit-test"><i class="fa fa-link"></i></a>Implementing unit test</h3><p>Annotate you test classes with @RunWith annotation, wich is responsible to tell to JUnit to run using Spring’s testing support</p><pre><code class="java hljs"><span class="hljs-meta">@RunWith</span>(SpringRunner.class)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CityTest</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseCoreTest</span> </span>{
</code></pre><p>Now you can annotate your test cases classes with @Test annotation, in order to test method behavior, then use MockMvc to take advantage of perform method</p><pre><code class="java hljs"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">yourTestNameTest</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>{
    mockMvc.perform()
}
</code></pre><p>As parameter perform method you have to pass a MockMvcRequestBuilders http method, depending on your requirement.<br>
Here an example with a get method,which will receive the url of the service you want to test:</p><pre><code class="java hljs">mockMvc.perform(get(<span class="hljs-string">"/your_url_string"</span>)
</code></pre><p>Here some <code>MockHttpServletRequestBuilder</code> methods:</p><ul>
<li>accept(String… mediaTypes)</li>
<li>header(String name, Object… values)</li>
</ul><p>while here other methods you can add as <code>ResultActions</code>:</p><ul>
<li>andExpect(ResultMatcher var1)</li>
<li>andDo(ResultHandler var1)</li>
</ul><p>A full Example:</p><p>Use spring boot mook annotation to mock a variable:</p><pre><code class="java hljs"><span class="hljs-meta">@MockBean</span>
GetCustomersCommand getCustomersCommand;
</code></pre><p>Create inside your test method a json case string</p><pre><code class="java hljs">
String jsonLineTest = <span class="hljs-string">"[{lastName:\"Rossi\"} ,{lastName:\"Bianchi\"}]"</span>;
</code></pre><p>Instantiate your variables, they have to match with your jsonLineTest, so:</p><pre><code class="java hljs">
        Customer c1 = <span class="hljs-keyword">new</span> Customer();
        Customer c2 = <span class="hljs-keyword">new</span> Customer();
        List&lt;Customer&gt; customers = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();

        c1.setLastName(<span class="hljs-string">"Rossi"</span>);
        c2.setLastName(<span class="hljs-string">"Bianchi"</span>);

        customers.add(c1);
        customers.add(c2);

</code></pre><p>Now use ‘when’ mockito logic to define expected behavior:</p><pre><code class="java hljs">when(getCustomersCommand.execute()).thenReturn(customers);
</code></pre><p>Here you are defining that, when you call execute(), you will receive the <code>customer</code> object just defined as output.</p><p>Now test and expect the junit result with perform() method:</p><pre><code class="java hljs">mockMvc.perform(get(<span class="hljs-string">"/your_url_string"</span>)
.accept(MediaType.APPLICATION_JSON)
.andExpect(content().json(jsonLineTest))
.andExpect(status().isOk());)))));
</code></pre><p>First it performs a GET request against <code>/your_url_string</code>. JsonLineTest is your String variable you populated with expected result. Then it expects that the request is successful (<code>isOk()</code> asserts an HTTP 200 response code).</p><h2 id="Properties-Manager"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Properties-Manager" title="Properties-Manager"><i class="fa fa-link"></i></a>Properties Manager</h2><p>Bear framework define an utility to resolve properties in standard and unique way.</p><p>In order to resolve property developers must use the calss<code>com.intesasanpaolo.bear.core.properties.PropertiesManager</code> simply autowing it, this manager provides some utily methods to get the properties.</p><p>Autowire of PropertiesManager</p><pre><code class="java hljs"><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> PropertiesManager propertiesManager;
</code></pre><p>retrieving of a property</p><pre><code class="java hljs">String propertyExample=propertiesManager.get(<span class="hljs-string">"example.myProperty"</span>, String.class, <span class="hljs-string">"value not present"</span>);
</code></pre><p>the property <code>"example.myProperty"</code> is defined in application.yml file</p><pre><code class="yaml hljs"><span class="hljs-section">example:</span>
  myProperty: someValue
</code></pre><div class="alert alert-info">
<p>You can find this use case in showcase project UserController class.</p>
</div><h3 id="External-configuration-properties"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#External-configuration-properties" title="External-configuration-properties"><i class="fa fa-link"></i></a>External configuration properties</h3><p>If the value of a property must be different according to the environment on which the service is deployed, you can add a placeholder for that property in the <code>application.yml</code> file.</p><p>This placeholder will be resolved by an environment variable set by the PaaS.</p><p>An example is:</p><pre><code class="yaml hljs">connectors:
  restConfigurations:
    items:
      MyConnector:
        url: ${ENDPOINT_SERVICENAME:http:<span class="hljs-comment">//the-local-endpoint}/foo/bar</span>
</code></pre><pre><code class="yaml hljs"><span class="hljs-attribute">connectors</span>:
  <span class="hljs-attribute">jpaMongoConfigurations</span>:
    <span class="hljs-attribute">connection</span>:
      <span class="hljs-attribute">uri</span>: mongodb://<span class="hljs-variable">${DSMONGO_ACRONYM_USERNAME}</span>:<span class="hljs-variable">${DSMONGO_ACRONYM_PASSWORD}</span>@<span class="hljs-variable">${DSMONGO_ACRONYM_URL}</span>
</code></pre><p>For local development a default value can be set as shown above, after a semicolon according to the shown syntax.</p><p>Remind that this value will be overridden by the environment variable.</p><div class="alert alert-danger">
<p>The definition of environment variables must be requested to the PaaS support team.</p>
</div><h3 id="Environment-Variables-Request-Procedure"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Environment-Variables-Request-Procedure" title="Environment-Variables-Request-Procedure"><i class="fa fa-link"></i></a>Environment Variables Request Procedure</h3><ul>
<li>Connect to the <a href="http://chci0.sede.corp.sanpaoloimi.com:8390/scriptChci0/chci05/pages/index" target="_blank" rel="noopener">Change Console</a></li>
<li>Look for the release related UDC (system test or prod); the search box is on the left, under ‘Quick Searches’</li>
<li>Set the UDC to state 10</li>
<li>Open a new request, through the corresponding button, for the system test or prod</li>
<li>Create a new activity in the request</li>
<li>Set the activity type to <code>setenv</code>, then, for each environment variable to be set:
<ul>
<li>Insert the name</li>
<li>Set the ‘Bank’ field to <code>X</code></li>
<li>Insert your user in the <code>User</code> field</li>
<li>Insert the variable value</li>
<li>If the value is not known (eg MongoDB password) put a placeholder in the value, then enter in the field ‘Notes’ all the access data for MongoDB, specifying that this variable must be set by the competent entities.</li>
<li>Confirm the entry</li>
<li>Move the UDC to state 20 - when it reaches 50, the change will be performed</li>
</ul>
</li>
</ul><p>After the completion you can see the variable configuration from OpenShift, in the <code>ConfigMap</code>.<br>
Secret values, ex. MongoDB password, will be stored as <code>Secrets</code>.</p><h2 id="Logging"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Logging" title="Logging"><i class="fa fa-link"></i></a>Logging</h2><p>Bear framework provides a proper logger in all architectural managed classes(for example BaseController, BaseCommand, BaseService and many more). In this classes you can directly use the field <code>logger</code> to get a reference to the logger. In order to maintain retrocompatiblity, the <code>bearLogger()</code> method is also present, although deprecated.</p><p>If the field <code>logger</code> isn’t inherited or is impossible to use, developers can define directly the logger in this way:</p><pre><code class="java hljs"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Logger log = LoggerUtils.getLogger(MyClass.class);
</code></pre><p>If a developer needs to create a log message, he/she MUST avoid string concatenation and use instead string format and varargs parameter.</p><p><strong>USE THIS</strong></p><pre><code class="java hljs">logger.debug(<span class="hljs-string">"My {} log message - entity ID {}"</span>,descriptorString,entityID);
</code></pre><p><strong>AVOID THIS</strong></p><pre><code class="java hljs">logger.debug(<span class="hljs-string">"My "</span>+descriptorString+<span class="hljs-string">" log message - entity ID "</span> + entityID);
</code></pre><h3 id="Logging-configuration"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Logging-configuration" title="Logging-configuration"><i class="fa fa-link"></i></a>Logging configuration</h3><p>In application.yml file is possible to override log level threshold simply defing the new log level for the desired packages or even class.</p><pre><code class="yaml hljs"><span class="hljs-selector-tag">logging</span>:
  <span class="hljs-selector-tag">level</span>:
    <span class="hljs-selector-tag">root</span>: <span class="hljs-selector-tag">ERROR</span>
    <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.intesasanpaolo</span><span class="hljs-selector-class">.bear</span>: <span class="hljs-selector-tag">ERROR</span>
    <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.intesasanpaolo</span><span class="hljs-selector-class">.bear</span><span class="hljs-selector-class">.config</span>: <span class="hljs-selector-tag">INFO</span>
</code></pre><h3 id="Logging-the-payload"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Logging-the-payload" title="Logging-the-payload"><i class="fa fa-link"></i></a>Logging the payload</h3><p>In application.yml file is possibile to define the max length in byte of the payload to be logged in input of controlled-managed classes (default: 300)</p><pre><code class="yaml hljs"><span class="hljs-selector-tag">bear</span><span class="hljs-selector-class">.request</span><span class="hljs-selector-class">.logging</span><span class="hljs-selector-class">.max</span><span class="hljs-selector-class">.length</span>: 200
</code></pre><h2 id="Tracing"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Tracing" title="Tracing"><i class="fa fa-link"></i></a>Tracing</h2><p>BEAR provides a functionality to trace all incoming and outgoing messages of your application on a dedicated event queue. The queue-tracing mechanism can also be mocked, so that BEAR will simply trace on logs.</p><p>In particular, all these components can be traced:</p><ul>
<li>Controllers</li>
<li>RestConnectors <em>(and their DataPower version)</em></li>
<li>SoapConnectors <em>(and their DataPower version)</em></li>
<li>JdbcConnectors (not JPA)</li>
<li>MongoConnectors (not JPA)</li>
</ul><p>For Controllers, RestConnectors and SoapConnectors, BEAR will trace HTTP Headers and Body of request and response, plus request URI, method and response status code. For MongoConnectors and JdbcConnectors, BEAR will trace the query; it will also trace results for MongoConnectors and results set size for JdbcConnectors if a RowMapper is used. <em><strong>Connectors are not traced if they are mocked</strong></em>, since there is no outgoing message.</p><p>Tracing is configured just by means of properties. To enable it, <code>tracing.enabled</code> must be set to <code>true</code>. <em><strong>No other specific configuration will be considered if this property is missing or set to</strong></em> <code>false</code>. Tracing can also be mocked by setting <code>tracing.mocked</code> to <code>true</code>, thus enabling tracing on logs, where all ‘\n’ chars will be removed in order to have a single line. If you need to trace on a dedicated event queue (see below), set it to <code>false</code> instead.</p><pre><code class="yaml hljs">tracing:
    enabled: <span class="hljs-literal">true</span>
    mocked: <span class="hljs-literal">false</span>
</code></pre><p>To configure the tracing event producer, whose name is <code>TracingEventConnector</code>, use the standard configuration required by any BEAR event producer (see <a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#event-connector">EventConnector</a>). <code>TracingEventConnector</code> <em><strong>is already created and managed by the framework</strong></em>, so there is no need to create one: it will automatically trace messages by emitting events on the desired queue. Use the following properties to configure it:</p><pre><code class="yaml hljs"><span class="hljs-symbol">connectors:</span>
    <span class="hljs-symbol">eventConfigurations:</span>
        <span class="hljs-symbol">items:</span>
            <span class="hljs-symbol">TracingEventConnector:</span>
                <span class="hljs-symbol">topic:</span> the-topic-name
                <span class="hljs-symbol">bootstrapServers:</span> &lt;IP&gt;<span class="hljs-symbol">:&lt;PORT&gt;</span>[,...]
</code></pre><p><em><strong>To enable tracing for Controllers, an additional property must be set</strong></em>: <code>controllers.tracing.enabled</code>. It is also possible to limit the traced body length for requests or responses using <code>maxBodyLength</code> (default is <code>10000</code>). <em><strong>This property refers to bytes length</strong></em>.</p><pre><code class="yaml hljs">controllers:
    tracing:
        enabled: <span class="hljs-literal">true</span>
        maxBodyLength: 10000
</code></pre><p>Furthermore, it is possible to disable tracing for specific Connectors (or types of Connectors, such as RestConnectors). To do so, set its/their <code>enabledTracing</code> property to <code>false</code>. Examples:</p><pre><code class="yaml hljs">connectors:
    restConfigurations:
        YourUntracedRestConnector:
            enabledTracing: <span class="hljs-literal">false</span>
</code></pre><p>or</p><pre><code class="yaml hljs">connectors:
    restConfigurations:
        <span class="hljs-keyword">default</span>:
            enabledTracing: <span class="hljs-literal">false</span>
</code></pre><p>As usual, specific <code>enabledTracing</code> properties take precedence over <code>default.enabledTracing</code>.</p><h3 id="Tracing-format"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Tracing-format" title="Tracing-format"><i class="fa fa-link"></i></a>Tracing format</h3><p>The single tracing message <em><strong>for Connectors will contain both request and response, or request and error</strong></em> in case of exceptions such as connection refused, timeout and so on. <em><strong>For Controllers, instead, request and response will be traced separately</strong></em>, thus with two events. It is possible to match them using the <code>requestId</code> parameter contained in the messages.</p><p>The tracing messages are in plain text format, because they have to be human readable. Here the specific formats for every traceable BEAR component:</p><h4 id="Controller1"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Controller1" title="Controller1"><i class="fa fa-link"></i></a>Controller</h4><h5 id="Request1"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request1" title="Request1"><i class="fa fa-link"></i></a>Request</h5><pre><code class="log hljs">[<span class="hljs-meta">API REQUEST</span>] --- [HTTP] - RequestId: <span class="hljs-number">1394e828</span><span class="hljs-number">-7379</span><span class="hljs-number">-4036</span><span class="hljs-number">-8</span>d02-b66959f9fa61 - Method: GET - URI: /customers - Headers: [some-header: <span class="hljs-keyword">value</span>,  other-header: <span class="hljs-keyword">value</span>] - Body: [Empty] --- [RESPONSE] - Status: <span class="hljs-number">200</span> - Headers: [other-header: somevalue] - Body: {<span class="hljs-string">"content"</span>:<span class="hljs-string">"value"</span>}
</code></pre><h5 id="Reponse"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Reponse" title="Reponse"><i class="fa fa-link"></i></a>Reponse</h5><pre><code class="log hljs">[<span class="hljs-meta">API RESPONSE</span>] --- [HTTP] - RequestId: <span class="hljs-number">1394e828</span><span class="hljs-number">-7379</span><span class="hljs-number">-4036</span><span class="hljs-number">-8</span>d02-b66959f9fa61 - Method: GET - URI: /customers - Headers: [some-header: <span class="hljs-keyword">value</span>,  other-header: <span class="hljs-keyword">value</span>] - Body: [Empty] --- [RESPONSE] - Status: <span class="hljs-number">200</span> - Headers: [x-request-id: <span class="hljs-number">1394e828</span><span class="hljs-number">-7379</span><span class="hljs-number">-4036</span><span class="hljs-number">-8</span>d02-b66959f9fa61] - Body: {<span class="hljs-string">"content"</span>:<span class="hljs-string">"value"</span>}
</code></pre><h4 id="RestConnector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#RestConnector" title="RestConnector"><i class="fa fa-link"></i></a>RestConnector</h4><pre><code class="log hljs">[<span class="hljs-meta">REST CONNECTOR</span>] --- [REQUEST] - Method: GET - URI: /products - Headers: [some-header: <span class="hljs-keyword">value</span>, other-header: <span class="hljs-keyword">value</span>] - Body: [Empty] --- [RESPONSE] - Status: <span class="hljs-number">200</span> - Headers: [header-name: <span class="hljs-keyword">value</span>] - Body: {<span class="hljs-string">"content"</span>:<span class="hljs-string">"something"</span>}
</code></pre><h4 id="SoapConnector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#SoapConnector" title="SoapConnector"><i class="fa fa-link"></i></a>SoapConnector</h4><pre><code class="log hljs">[SOAP CONNECTOR] --- [REQUEST] - <span class="hljs-symbol">SoapRequest:</span> &lt;<span class="hljs-symbol">env:</span>Envelope <span class="hljs-symbol">xmlns:</span>env=<span class="hljs-string">"http://www.w3.org/2003/05/soap-envelope"</span>&gt;&lt;<span class="hljs-symbol">env:</span>Header&gt;&lt;<span class="hljs-symbol">ns3:</span>ISPWebservicesHeader <span class="hljs-symbol">xmlns:</span>ns3=<span class="hljs-string">"http://intesasanpaolo.it/"</span>&gt;...&lt;<span class="hljs-regexp">/ns3:ISPWebservicesHeader&gt;&lt;/env</span><span class="hljs-symbol">:Header&gt;&lt;env</span><span class="hljs-symbol">:Body&gt;&lt;ns2</span><span class="hljs-symbol">:Add</span> <span class="hljs-symbol">xmlns:</span>ns2=<span class="hljs-string">"http://tempuri.org/"</span>&gt;&lt;<span class="hljs-symbol">ns2:</span>intA&gt;<span class="hljs-number">41</span>&lt;<span class="hljs-regexp">/ns2:intA&gt;&lt;ns2:intB&gt;2&lt;/ns</span>2<span class="hljs-symbol">:intB&gt;&lt;/ns2</span><span class="hljs-symbol">:Add&gt;&lt;/env</span><span class="hljs-symbol">:Body&gt;&lt;/env</span><span class="hljs-symbol">:Envelope&gt;</span> --- [RESPONSE] - <span class="hljs-symbol">SoapResponse:</span> &lt;<span class="hljs-symbol">env:</span>Envelope <span class="hljs-symbol">xmlns:</span>env=<span class="hljs-string">"http://www.w3.org/2003/05/soap-envelope"</span>&gt;&lt;<span class="hljs-symbol">env:</span>Header/&gt;&lt;<span class="hljs-symbol">env:</span>Body&gt;&lt;AddResponse xmlns=<span class="hljs-string">"http://tempuri.org/"</span>&gt;&lt;AddResult&gt;<span class="hljs-number">43</span>&lt;<span class="hljs-regexp">/AddResult&gt;&lt;/</span>AddResponse&gt;&lt;<span class="hljs-regexp">/env:Body&gt;&lt;/env</span><span class="hljs-symbol">:Envelope&gt;</span>
</code></pre><h4 id="MongoConnector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#MongoConnector" title="MongoConnector"><i class="fa fa-link"></i></a>MongoConnector</h4><pre><code class="log hljs"><span class="hljs-selector-attr">[MONGO CONNECTOR]</span> <span class="hljs-selector-tag">---</span> <span class="hljs-selector-attr">[REQUEST]</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Type</span>: <span class="hljs-selector-tag">FIND</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Query</span>: {<span class="hljs-attribute">_id</span>:<span class="hljs-string">"a"</span>, name:<span class="hljs-string">"TheName"</span>, population:<span class="hljs-number">0</span>} <span class="hljs-selector-tag">---</span> <span class="hljs-selector-attr">[RESPONSE]</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">ResultSetSize</span>: 1
</code></pre><h4 id="JdbcConnector"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JdbcConnector" title="JdbcConnector"><i class="fa fa-link"></i></a>JdbcConnector</h4><pre><code class="log hljs">[<span class="hljs-meta">JDBC CONNECTOR</span>] --- [REQUEST] - Type: FIND - Query: SELECT * FROM CUSTOMERS WHERE age = <span class="hljs-number">25</span> --- [RESPONSE] - ResultSetSize: <span class="hljs-number">42</span>
</code></pre><h4 id="Example-of-Connector-error"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Example-of-Connector-error" title="Example-of-Connector-error"><i class="fa fa-link"></i></a>Example of Connector error</h4><pre><code class="log hljs">[<span class="hljs-meta">REST CONNECTOR</span>] --- [REQUEST] - Method: GET - URI: /products - Headers: [some-header: <span class="hljs-keyword">value</span>, other-header: <span class="hljs-keyword">value</span>] - Body: [Empty] --- [RESPONSE] - Exception: Timeout
</code></pre><h2 id="Service-Orchestration"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Service-Orchestration" title="Service-Orchestration"><i class="fa fa-link"></i></a>Service Orchestration</h2><p>In order to run more than one service in a functionality you can call multiple services into a single method.<br>
This specific logic must be applied in command layer.<br>
Moreover you can implement async call if is needed.<br>
Following a sequences of examples:</p><p>Go into your command class,autowire your services that will be needed to retrieve all datas</p><pre><code class="java hljs">    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> CityService cityService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> PreferenceRepository preferenceRepository;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> InternalBitCoinService internalBitCoinService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> JdbcService jdbcService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> CalculatorService calculatorService;
</code></pre><p>Then implement your logic</p><h3 id="Async-call"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Async-call" title="Async-call"><i class="fa fa-link"></i></a>Async call</h3><p>This 3 services are performed in separate thread in a parallel execution</p><pre><code class="java hljs">Future&lt;BitCoin&gt; bitCoinFuture = callAsyncService(internalBitCoinService::getCoreBitCoinStats);
Future&lt;List&lt;Preference&gt;&gt; preferencesFuture = callAsyncService(preferenceRepository::findAll);
Future&lt;Integer&gt; result  = callAsyncService(()-&gt; calculatorService.add(<span class="hljs-number">123</span>, <span class="hljs-number">4568</span>));

</code></pre><p>All of them used callAsyncService method:</p><pre><code class="java hljs">   <span class="hljs-keyword">public</span> &lt;F&gt; <span class="hljs-function">Future&lt;F&gt; <span class="hljs-title">callAsyncService</span><span class="hljs-params">(Supplier&lt;F&gt; T)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.asyncUtils.callAsyncService(T);
    }

</code></pre><h3 id="Sync-call"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Sync-call" title="Sync-call"><i class="fa fa-link"></i></a>Sync call</h3><p>After async call we don’t know if precedent calls are completed but we can proceed with our  sequential steps</p><p>Instantiate your object model, then start to charge attributes calling the appropiate services</p><pre><code class="java hljs">  UserInfo userInfo = <span class="hljs-keyword">new</span> UserInfo();
        userInfo.setUser(user.get());

        List&lt;City&gt; cities = cityService.findAll();
        <span class="hljs-keyword">if</span>(cities!=<span class="hljs-keyword">null</span> &amp;&amp; !cities.isEmpty()){
            userInfo.setCity(cities.get(<span class="hljs-number">0</span>));
        }

        List&lt;Customer&gt; customers = jdbcService.getCustomers();
        <span class="hljs-keyword">if</span>(customers!=<span class="hljs-keyword">null</span> &amp;&amp; !customers.isEmpty()){
            userInfo.setCustomer(customers.get(<span class="hljs-number">0</span>));
        }


        userInfo.setBitcoin(bitCoinFuture.get());
        List&lt;Preference&gt; preferences = preferencesFuture.get();
        <span class="hljs-keyword">if</span>(preferences!=<span class="hljs-keyword">null</span> &amp;&amp; !preferences.isEmpty()) {
            userInfo.setPreference(preferences.get(<span class="hljs-number">0</span>));
        }

        userInfo.setTotalRevenue(result.get());

        <span class="hljs-keyword">return</span> userInfo;
</code></pre><h3 id="Sequence-Diagram"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Sequence-Diagram" title="Sequence-Diagram"><i class="fa fa-link"></i></a>Sequence Diagram</h3><p><img src="./BEAR Framework Development Guide_files/pS8Gfeq.png" alt=""></p><h2 id="Security-Configuration"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Security-Configuration" title="Security-Configuration"><i class="fa fa-link"></i></a>Security Configuration</h2><p>It is possible to restrict the access to some microservice’s endpoint only to the users that will present a valit <code>JWT</code> token.</p><h3 id="Token-utilization"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Token-utilization" title="Token-utilization"><i class="fa fa-link"></i></a>Token utilization</h3><p>The <code>JWT</code> token must be provided within the header of the <code>HTTP</code> request. It is sufficient to add a header with key <code>Authorization</code> and value <code>Bearer &lt;JWT-Token&gt;</code>.</p><p>The additional claim provided within the <code>JWT</code> token can be retrieved using the following static method:</p><pre><code class="java hljs">String jwtToken = RequestContextHolder.getAuthorizationContext().getJwtToken();
Map&lt;String, Object&gt; additionalClaims = RequestContextHolder.getAuthorizationContext().getAdditionalClaims();
</code></pre><p>Please notice that these information are provided through an <code>InheritableThreadLocal</code>, thus can be retrieved only from the thread that is hangling the request; any additional thread (e.g. the ones spawned for <code>callAsync()</code> cannot direcly access there information).</p><h3 id="API-Gateway-Configuration"><a class="anchor hidden-xs" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#API-Gateway-Configuration" title="API-Gateway-Configuration"><i class="fa fa-link"></i></a>API-Gateway Configuration</h3><p>The security configuration is implemented by addind the following parameters to the <code>application.yml</code> file:</p><pre><code class="yaml hljs"><div class="wrapper"><div class="gutter linenumber"><span data-linenumber="1"></span>
<span data-linenumber="2"></span>
<span data-linenumber="3"></span>
<span data-linenumber="4"></span>
<span data-linenumber="5"></span>
<span data-linenumber="6"></span>
<span data-linenumber="7"></span>
<span data-linenumber="8"></span>
<span data-linenumber="9"></span>
<span data-linenumber="10"></span>
<span data-linenumber="11"></span>
<span data-linenumber="12"></span>
<span data-linenumber="13"></span>
<span data-linenumber="14"></span>
<span data-linenumber="15"></span>
<span data-linenumber="16"></span>
<span data-linenumber="17"></span>
<span data-linenumber="18"></span></div><div class="code">keycloak:
  enabled: <span class="hljs-literal">true</span>
  auth-server-url: <span class="hljs-variable">${API_GATEWAY_URL}</span>
  resource: <span class="hljs-variable">${CLIENT_ID}</span>
  realm: <span class="hljs-variable">${REALM_ID}</span>
  public-client: <span class="hljs-literal">true</span>
  ssl-required: external
  confidential-port: 0
  use-resource-role-mappings: <span class="hljs-literal">false</span>
  principal-attribute: preferred_username
  securityConstraints:
  - authRoles:
    - preference_role

    securityCollections:
    - name: paths reserved <span class="hljs-keyword">for</span> preference_role users
      patterns:
      - /preferences
</div></div></code></pre><ul>
<li><strong>Line 3</strong>: the API Client ID</li>
<li><strong>Line 4</strong>: the realm in which the users belongs to</li>
<li><strong>Line 9</strong>: a list of security constraints</li>
</ul><p>Each secusity constraint is composed of a list of role which the user must have and a collection of paths to be restricted to the roles specified above.</p><p>The Endpoint of the API Gateway must be specifiend in an enviroment variable called <code>KEYCLOAK_AUTH_SERVER_URL</code>, whose value must respect the following convention: <code>https://&lt;HOsTNAME&gt;:&lt;PORT&gt;/auth</code></p><div class="alert alert-warning">
<p>If there is no pattern matching a certain URL, it will be considered as <strong>publicly accessible</strong> by default.</p>
</div></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display: none; right: 587.5px;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav">
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#BEAR-Framework-Development-Guide" title="BEAR Framework Development Guide">BEAR Framework Development Guide</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#RELEASE-NOTES" title="RELEASE NOTES">RELEASE NOTES</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0110" title="Build 0.11.0">Build 0.11.0</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0105" title="Build 0.10.5">Build 0.10.5</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0103" title="Build 0.10.3">Build 0.10.3</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0102" title="Build 0.10.2">Build 0.10.2</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0100" title="Build 0.10.0">Build 0.10.0</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-099" title="Build 0.9.9">Build 0.9.9</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-097" title="Build 0.9.7">Build 0.9.7</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-091" title="Build 0.9.1">Build 0.9.1</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-090" title="Build 0.9.0">Build 0.9.0</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-080" title="Build 0.8.0">Build 0.8.0</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-070" title="Build 0.7.0">Build 0.7.0</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0617" title="Build 0.6.17">Build 0.6.17</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0614" title="Build 0.6.14">Build 0.6.14</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0610" title="Build 0.6.10">Build 0.6.10</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-069" title="Build 0.6.9">Build 0.6.9</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-068" title="Build 0.6.8">Build 0.6.8</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-067" title="Build 0.6.7">Build 0.6.7</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-063" title="Build 0.6.3">Build 0.6.3</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-062" title="Build 0.6.2">Build 0.6.2</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-061" title="Build 0.6.1">Build 0.6.1</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-060" title="Build 0.6.0">Build 0.6.0</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-051" title="Build 0.5.1">Build 0.5.1</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-050" title="Build 0.5.0">Build 0.5.0</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Introduction" title="Introduction">Introduction</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Project-creation" title="Project creation">Project creation</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Requirements" title="Requirements">Requirements</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Naming-conventions" title="Naming conventions">Naming conventions</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Repository-setup" title="Repository setup">Repository setup</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Start-up-base-structure" title="Start-up base structure">Start-up base structure</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Spring-boot-servlet-container" title="Spring-boot servlet container">Spring-boot servlet container</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#PaaS-and-Pom-characteristics" title="PaaS and Pom characteristics">PaaS and Pom characteristics</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Project-Build" title="Project Build">Project Build</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Lifecycle" title="Request Lifecycle">Request Lifecycle</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Controller" title="Controller">Controller</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Http-Request-amp-Response" title="Http Request &amp; Response">Http Request &amp; Response</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Swagger" title="Swagger">Swagger</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Cross-Origin-Resource-Sharing-CORS" title="Cross-Origin Resource Sharing (CORS)">Cross-Origin Resource Sharing (CORS)</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Command" title="Command">Command</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Visibility-Cone" title="Visibility Cone">Visibility Cone</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Call-Async-Service" title="Call Async Service">Call Async Service</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Call-In-Transaction" title="Call In Transaction">Call In Transaction</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Copy-Switcher" title="Copy Switcher">Copy Switcher</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Service" title="Service">Service</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Connector" title="Connector">Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#HTTP-Connection-Pool" title="HTTP Connection Pool">HTTP Connection Pool</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Transformers" title="Transformers">Transformers</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Transformer" title="Request Transformer">Request Transformer</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Response-Transformer" title="Response Transformer">Response Transformer</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Resource" title="Resource">Resource</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Resource-Assembler" title="Resource Assembler">Resource Assembler</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Resource-Factory" title="Resource Factory">Resource Factory</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JPA-Connector" title="JPA Connector">JPA Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connection" title="Configure the connection">Configure the connection</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mongo-JPA-Connector" title="Mongo JPA Connector">Mongo JPA Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector1" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connection1" title="Configure the connection">Configure the connection</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example1" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JDBC-Connector" title="JDBC Connector">JDBC Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector2" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers" title="Create the Tansformers">Create the Tansformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example2" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mongo-Connector" title="Mongo Connector">Mongo Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector3" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector1" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers1" title="Create the Tansformers">Create the Tansformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example3" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mongo-GridFS-Connector" title="Mongo GridFS Connector">Mongo GridFS Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector4" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector2" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers2" title="Create the Tansformers">Create the Tansformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example4" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#DB2-Connector" title="DB2 Connector">DB2 Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector5" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector3" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers3" title="Create the Tansformers">Create the Tansformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example5" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Event-Connector" title="Event Connector">Event Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector6" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector4" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers4" title="Create the Tansformers">Create the Tansformers</a></li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example6" title="Use case service example">Use case service example</a></li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Kafka-Endpoints" title="Kafka Endpoints">Kafka Endpoints</a></li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Authorizations" title="Authorizations">Authorizations</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Naming-Convention" title="Naming Convention">Naming Convention</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Topic-Kafka-Creation-Request" title="Topic Kafka Creation Request">Topic Kafka Creation Request</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Rest-Connector" title="Rest Connector">Rest Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector7" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector5" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers5" title="Create the Tansformers">Create the Tansformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example7" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#BEAR-Internal-Connector" title="BEAR Internal Connector">BEAR Internal Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector8" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector6" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers6" title="Create the Tansformers">Create the Tansformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example8" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#BEAR-BearCore-Connector" title="BEAR BearCore Connector">BEAR BearCore Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector9" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector7" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers7" title="Create the Tansformers">Create the Tansformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example9" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#SOAP-Connector" title="SOAP Connector">SOAP Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JAXB2-Maven-Plugin" title="JAXB2 Maven Plugin">JAXB2 Maven Plugin</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#XmlRootElement-annotation" title="XmlRootElement annotation">XmlRootElement annotation</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector10" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector8" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Transformers" title="Create the Transformers">Create the Transformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example10" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#DataPower-SOAP-Connector" title="DataPower SOAP Connector">DataPower SOAP Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JAXB2-Maven-Plugin1" title="JAXB2 Maven Plugin">JAXB2 Maven Plugin</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#XmlRootElement-annotation1" title="XmlRootElement annotation">XmlRootElement annotation</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector11" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector9" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Transaction-Id" title="Transaction Id">Transaction Id</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Transformers1" title="Create the Transformers">Create the Transformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example11" title="Use case service example">Use case service example</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Populate-DataPower-header" title="Populate DataPower header">Populate DataPower header</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#DataPower-REST-Connector" title="DataPower REST Connector">DataPower REST Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector12" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector10" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Transaction-Id1" title="Transaction Id">Transaction Id</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Event-Listener" title="Event Listener">Event Listener</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-listener" title="Create the listener">Create the listener</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-listener" title="Configure the listener">Configure the listener</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Event-Context" title="Event Context">Event Context</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#MQ-Listener" title="MQ Listener">MQ Listener</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-listener1" title="Create the listener">Create the listener</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-listener1" title="Configure the listener">Configure the listener</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#MQlt-gtKafka-Archetypes" title="MQ&lt;-&gt;Kafka Archetypes">MQ&lt;-&gt;Kafka Archetypes</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Shared-Library" title="Shared Library">Shared Library</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Session-Manager" title="Session Manager">Session Manager</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Transaction-Manager" title="Transaction Manager">Transaction Manager</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#2-Steps-Operation-Design" title="2-Steps Operation Design">2-Steps Operation Design</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Host-Bridge" title="Host Bridge">Host Bridge</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Exposed-services" title="Exposed services">Exposed services</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Environment-setup" title="Environment setup">Environment setup</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configuring-the-Host-Bridge" title="Configuring the Host Bridge">Configuring the Host Bridge</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Generated-files" title="Generated files">Generated files</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Application-Customization" title="Application Customization">Application Customization</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Anathomy-of-SimpleApp" title="Anathomy of SimpleApp">Anathomy of SimpleApp</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Error-Handler" title="Error Handler">Error Handler</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Exception-Handling" title="Exception Handling">Exception Handling</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configuration" title="Configuration">Configuration</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Bear-Domain-Exception" title="Bear Domain Exception">Bear Domain Exception</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Error-Response" title="Error Response">Error Response</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Example" title="Example">Example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#New-Exception-Handler-and-Error-Messages" title="New Exception Handler and Error Messages">New Exception Handler and Error Messages</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#ErrorResource" title="ErrorResource">ErrorResource</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Populate-Return-Messages" title="Populate Return Messages">Populate Return Messages</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Error-Keys-from-Unhandled-Exceptions" title="Error Keys from Unhandled Exceptions">Error Keys from Unhandled Exceptions</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Translation-from-Error-Key-to-Error-Message" title="Translation from Error Key to Error Message">Translation from Error Key to Error Message</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Application-Documentation-Swagger" title="Application Documentation (Swagger)">Application Documentation (Swagger)</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Code-Generation-Swagger" title="Code Generation (Swagger)">Code Generation (Swagger)</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Cache-Manager" title="Cache Manager">Cache Manager</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-a-cache" title="Create a cache">Create a cache</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-cache" title="Configure the cache">Configure the cache</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#PaaS-configuration" title="PaaS configuration">PaaS configuration</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-example" title="Use case example">Use case example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Advanced-features" title="Advanced features">Advanced features</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JSON-Patch" title="JSON Patch">JSON Patch</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Futures" title="Futures">Futures</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Message-Converters" title="Message Converters">Message Converters</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Multiple-JPA-Connections" title="Multiple JPA Connections">Multiple JPA Connections</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Branching-Strategy" title="Branching Strategy">Branching Strategy</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Default-branches" title="Default branches">Default branches</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Features-development-branches" title="Features development branches">Features development branches</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Hotfix-development-branches" title="Hotfix development branches">Hotfix development branches</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Junit-Test" title="Junit Test">Junit Test</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-Junit" title="Configure Junit">Configure Junit</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Implementing-unit-test" title="Implementing unit test">Implementing unit test</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Properties-Manager" title="Properties Manager">Properties Manager</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#External-configuration-properties" title="External configuration properties">External configuration properties</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Environment-Variables-Request-Procedure" title="Environment Variables Request Procedure">Environment Variables Request Procedure</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Logging" title="Logging">Logging</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Logging-configuration" title="Logging configuration">Logging configuration</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Logging-the-payload" title="Logging the payload">Logging the payload</a></li>
</ul>
</li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Tracing" title="Tracing">Tracing</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Tracing-format" title="Tracing format">Tracing format</a></li>
</ul>
</li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Service-Orchestration" title="Service Orchestration">Service Orchestration</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Async-call" title="Async call">Async call</a></li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Sync-call" title="Sync call">Sync call</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Sequence-Diagram" title="Sequence Diagram">Sequence Diagram</a></li>
</ul>
</li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Security-Configuration" title="Security Configuration">Security Configuration</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Token-utilization" title="Token utilization">Token utilization</a></li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#API-Gateway-Configuration" title="API-Gateway Configuration">API-Gateway Configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#">Expand all</a><a class="back-to-top" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#">Back to top</a><a class="go-to-bottom" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#">Go to bottom</a></div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print affix" data-spy="affix" style="top: 17px; left: 1320.5px;">
        <div class="toc"><ul class="nav">
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#BEAR-Framework-Development-Guide" title="BEAR Framework Development Guide">BEAR Framework Development Guide</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#RELEASE-NOTES" title="RELEASE NOTES">RELEASE NOTES</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0110" title="Build 0.11.0">Build 0.11.0</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0105" title="Build 0.10.5">Build 0.10.5</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0103" title="Build 0.10.3">Build 0.10.3</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0102" title="Build 0.10.2">Build 0.10.2</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0100" title="Build 0.10.0">Build 0.10.0</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-099" title="Build 0.9.9">Build 0.9.9</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-097" title="Build 0.9.7">Build 0.9.7</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-091" title="Build 0.9.1">Build 0.9.1</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-090" title="Build 0.9.0">Build 0.9.0</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-080" title="Build 0.8.0">Build 0.8.0</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-070" title="Build 0.7.0">Build 0.7.0</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0617" title="Build 0.6.17">Build 0.6.17</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0614" title="Build 0.6.14">Build 0.6.14</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-0610" title="Build 0.6.10">Build 0.6.10</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-069" title="Build 0.6.9">Build 0.6.9</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-068" title="Build 0.6.8">Build 0.6.8</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-067" title="Build 0.6.7">Build 0.6.7</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-063" title="Build 0.6.3">Build 0.6.3</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-062" title="Build 0.6.2">Build 0.6.2</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-061" title="Build 0.6.1">Build 0.6.1</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-060" title="Build 0.6.0">Build 0.6.0</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-051" title="Build 0.5.1">Build 0.5.1</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Build-050" title="Build 0.5.0">Build 0.5.0</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Introduction" title="Introduction">Introduction</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Project-creation" title="Project creation">Project creation</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Requirements" title="Requirements">Requirements</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Naming-conventions" title="Naming conventions">Naming conventions</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Repository-setup" title="Repository setup">Repository setup</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Start-up-base-structure" title="Start-up base structure">Start-up base structure</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Spring-boot-servlet-container" title="Spring-boot servlet container">Spring-boot servlet container</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#PaaS-and-Pom-characteristics" title="PaaS and Pom characteristics">PaaS and Pom characteristics</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Project-Build" title="Project Build">Project Build</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Lifecycle" title="Request Lifecycle">Request Lifecycle</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Controller" title="Controller">Controller</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Http-Request-amp-Response" title="Http Request &amp; Response">Http Request &amp; Response</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Swagger" title="Swagger">Swagger</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Cross-Origin-Resource-Sharing-CORS" title="Cross-Origin Resource Sharing (CORS)">Cross-Origin Resource Sharing (CORS)</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Command" title="Command">Command</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Visibility-Cone" title="Visibility Cone">Visibility Cone</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Call-Async-Service" title="Call Async Service">Call Async Service</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Call-In-Transaction" title="Call In Transaction">Call In Transaction</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Copy-Switcher" title="Copy Switcher">Copy Switcher</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Service" title="Service">Service</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Connector" title="Connector">Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#HTTP-Connection-Pool" title="HTTP Connection Pool">HTTP Connection Pool</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Transformers" title="Transformers">Transformers</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Request-Transformer" title="Request Transformer">Request Transformer</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Response-Transformer" title="Response Transformer">Response Transformer</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Resource" title="Resource">Resource</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Resource-Assembler" title="Resource Assembler">Resource Assembler</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Resource-Factory" title="Resource Factory">Resource Factory</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JPA-Connector" title="JPA Connector">JPA Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connection" title="Configure the connection">Configure the connection</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mongo-JPA-Connector" title="Mongo JPA Connector">Mongo JPA Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector1" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connection1" title="Configure the connection">Configure the connection</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example1" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JDBC-Connector" title="JDBC Connector">JDBC Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector2" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers" title="Create the Tansformers">Create the Tansformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example2" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mongo-Connector" title="Mongo Connector">Mongo Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector3" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector1" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers1" title="Create the Tansformers">Create the Tansformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example3" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Mongo-GridFS-Connector" title="Mongo GridFS Connector">Mongo GridFS Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector4" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector2" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers2" title="Create the Tansformers">Create the Tansformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example4" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#DB2-Connector" title="DB2 Connector">DB2 Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector5" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector3" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers3" title="Create the Tansformers">Create the Tansformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example5" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Event-Connector" title="Event Connector">Event Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector6" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector4" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers4" title="Create the Tansformers">Create the Tansformers</a></li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example6" title="Use case service example">Use case service example</a></li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Kafka-Endpoints" title="Kafka Endpoints">Kafka Endpoints</a></li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Authorizations" title="Authorizations">Authorizations</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Naming-Convention" title="Naming Convention">Naming Convention</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Topic-Kafka-Creation-Request" title="Topic Kafka Creation Request">Topic Kafka Creation Request</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Rest-Connector" title="Rest Connector">Rest Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector7" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector5" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers5" title="Create the Tansformers">Create the Tansformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example7" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#BEAR-Internal-Connector" title="BEAR Internal Connector">BEAR Internal Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector8" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector6" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers6" title="Create the Tansformers">Create the Tansformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example8" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#BEAR-BearCore-Connector" title="BEAR BearCore Connector">BEAR BearCore Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector9" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector7" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Tansformers7" title="Create the Tansformers">Create the Tansformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example9" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#SOAP-Connector" title="SOAP Connector">SOAP Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JAXB2-Maven-Plugin" title="JAXB2 Maven Plugin">JAXB2 Maven Plugin</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#XmlRootElement-annotation" title="XmlRootElement annotation">XmlRootElement annotation</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector10" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector8" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Transformers" title="Create the Transformers">Create the Transformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example10" title="Use case service example">Use case service example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#DataPower-SOAP-Connector" title="DataPower SOAP Connector">DataPower SOAP Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JAXB2-Maven-Plugin1" title="JAXB2 Maven Plugin">JAXB2 Maven Plugin</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#XmlRootElement-annotation1" title="XmlRootElement annotation">XmlRootElement annotation</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector11" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector9" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Transaction-Id" title="Transaction Id">Transaction Id</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-Transformers1" title="Create the Transformers">Create the Transformers</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-service-example11" title="Use case service example">Use case service example</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Populate-DataPower-header" title="Populate DataPower header">Populate DataPower header</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#DataPower-REST-Connector" title="DataPower REST Connector">DataPower REST Connector</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-connector12" title="Create the connector">Create the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-connector10" title="Configure the connector">Configure the connector</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Transaction-Id1" title="Transaction Id">Transaction Id</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Event-Listener" title="Event Listener">Event Listener</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-listener" title="Create the listener">Create the listener</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-listener" title="Configure the listener">Configure the listener</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Event-Context" title="Event Context">Event Context</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#MQ-Listener" title="MQ Listener">MQ Listener</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-the-listener1" title="Create the listener">Create the listener</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-listener1" title="Configure the listener">Configure the listener</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#MQlt-gtKafka-Archetypes" title="MQ&lt;-&gt;Kafka Archetypes">MQ&lt;-&gt;Kafka Archetypes</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Shared-Library" title="Shared Library">Shared Library</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Session-Manager" title="Session Manager">Session Manager</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Transaction-Manager" title="Transaction Manager">Transaction Manager</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#2-Steps-Operation-Design" title="2-Steps Operation Design">2-Steps Operation Design</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Host-Bridge" title="Host Bridge">Host Bridge</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Exposed-services" title="Exposed services">Exposed services</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Environment-setup" title="Environment setup">Environment setup</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configuring-the-Host-Bridge" title="Configuring the Host Bridge">Configuring the Host Bridge</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Generated-files" title="Generated files">Generated files</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Application-Customization" title="Application Customization">Application Customization</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Anathomy-of-SimpleApp" title="Anathomy of SimpleApp">Anathomy of SimpleApp</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Error-Handler" title="Error Handler">Error Handler</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Exception-Handling" title="Exception Handling">Exception Handling</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configuration" title="Configuration">Configuration</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Bear-Domain-Exception" title="Bear Domain Exception">Bear Domain Exception</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Error-Response" title="Error Response">Error Response</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Example" title="Example">Example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#New-Exception-Handler-and-Error-Messages" title="New Exception Handler and Error Messages">New Exception Handler and Error Messages</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#ErrorResource" title="ErrorResource">ErrorResource</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Populate-Return-Messages" title="Populate Return Messages">Populate Return Messages</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Error-Keys-from-Unhandled-Exceptions" title="Error Keys from Unhandled Exceptions">Error Keys from Unhandled Exceptions</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Translation-from-Error-Key-to-Error-Message" title="Translation from Error Key to Error Message">Translation from Error Key to Error Message</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Application-Documentation-Swagger" title="Application Documentation (Swagger)">Application Documentation (Swagger)</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Code-Generation-Swagger" title="Code Generation (Swagger)">Code Generation (Swagger)</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Cache-Manager" title="Cache Manager">Cache Manager</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Create-a-cache" title="Create a cache">Create a cache</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-the-cache" title="Configure the cache">Configure the cache</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#PaaS-configuration" title="PaaS configuration">PaaS configuration</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Use-case-example" title="Use case example">Use case example</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Advanced-features" title="Advanced features">Advanced features</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#JSON-Patch" title="JSON Patch">JSON Patch</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Futures" title="Futures">Futures</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Message-Converters" title="Message Converters">Message Converters</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Multiple-JPA-Connections" title="Multiple JPA Connections">Multiple JPA Connections</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Branching-Strategy" title="Branching Strategy">Branching Strategy</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Default-branches" title="Default branches">Default branches</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Features-development-branches" title="Features development branches">Features development branches</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Hotfix-development-branches" title="Hotfix development branches">Hotfix development branches</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Junit-Test" title="Junit Test">Junit Test</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Configure-Junit" title="Configure Junit">Configure Junit</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Implementing-unit-test" title="Implementing unit test">Implementing unit test</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Properties-Manager" title="Properties Manager">Properties Manager</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#External-configuration-properties" title="External configuration properties">External configuration properties</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Environment-Variables-Request-Procedure" title="Environment Variables Request Procedure">Environment Variables Request Procedure</a></li>
</ul>
</li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Logging" title="Logging">Logging</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Logging-configuration" title="Logging configuration">Logging configuration</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Logging-the-payload" title="Logging the payload">Logging the payload</a></li>
</ul>
</li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Tracing" title="Tracing">Tracing</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Tracing-format" title="Tracing format">Tracing format</a></li>
</ul>
</li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Service-Orchestration" title="Service Orchestration">Service Orchestration</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Async-call" title="Async call">Async call</a></li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Sync-call" title="Sync call">Sync call</a></li>
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Sequence-Diagram" title="Sequence Diagram">Sequence Diagram</a></li>
</ul>
</li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Security-Configuration" title="Security Configuration">Security Configuration</a><ul class="nav">
<li><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#Token-utilization" title="Token utilization">Token utilization</a></li>
<li class=""><a href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#API-Gateway-Configuration" title="API-Gateway Configuration">API-Gateway Configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#">Expand all</a><a class="back-to-top" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#">Back to top</a><a class="go-to-bottom" href="http://showcase-xdce0-test.cloudapps-test.intesasanpaolo.com/app/assets/xdce-module-bear-docs/content/bear-docs.html#">Go to bottom</a></div>
    </div>
    <script src="./BEAR Framework Development Guide_files/jquery.min.js.download"></script>
    <script src="./BEAR Framework Development Guide_files/bootstrap.min.js.download"></script>
    <script src="./BEAR Framework Development Guide_files/gist-embed.min.js.download"></script>
    <script src="./BEAR Framework Development Guide_files/documentation.js.download"></script>



</body></html>